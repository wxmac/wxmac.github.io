<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>åäº”ã€åˆ©ç”¨lesså®ç°ä¸€ä¸ªé›ªèŠ±â„ï¸</title>
      <link href="/2020/01/30/15.%E5%88%A9%E7%94%A8less%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E9%9B%AA%E8%8A%B1%E2%9D%84%EF%B8%8F/"/>
      <url>/2020/01/30/15.%E5%88%A9%E7%94%A8less%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E9%9B%AA%E8%8A%B1%E2%9D%84%EF%B8%8F/</url>
      
        <content type="html"><![CDATA[<h2 id="åˆ©ç”¨lesså®ç°ä¸€ä¸ªé›ªèŠ±"><a href="#åˆ©ç”¨lesså®ç°ä¸€ä¸ªé›ªèŠ±" class="headerlink" title="åˆ©ç”¨lesså®ç°ä¸€ä¸ªé›ªèŠ±"></a>åˆ©ç”¨lesså®ç°ä¸€ä¸ªé›ªèŠ±</h2><ul><li><p>çœ‹äº†ä¸€ç¯‡æ–‡ç« ï¼Œé‡Œé¢ç”¨lesså®ç°äº†ä¸€ä¸ªé›ªèŠ±ï¼Œé‡Œé¢lessçš„ç”¨æ³•è®©æˆ‘çœ¼å‰ä¸€äº®ï¼Œè¯¥çœ‹çœ‹lessçš„å…¶ä»–ç”¨æ³•äº†ã€‚</p><a id="more"></a><p><img src="/images/snow.png" alt></p></li></ul><ul><li>html - å®ç°é›ªèŠ±ï¼Œhtmlç»“æ„æ˜¯å¾ˆé‡è¦çš„ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&lt;figure className=&#123; styleCss.snowflake &#125;&gt;</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="title">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">span</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">span</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">span</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">span</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">span</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">span</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">span</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">span</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">span</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">span</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">span</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">span</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">span</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">span</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">span</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">span</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">span</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">span</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">span</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">span</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">span</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">span</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">span</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">span</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">span</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">span</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">span</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">span</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">span</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">span</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">figure</span>&gt;</span></span></span><br></pre></td></tr></table></figure><ul><li>less - å®ç°é›ªèŠ±çš„æ ¸å¿ƒä»£ç </li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">.snowflake&#123;</span><br><span class="line">    font-size: <span class="number">100</span>px;</span><br><span class="line">    color: snow;</span><br><span class="line">    width: <span class="number">4</span>em;</span><br><span class="line">    height: <span class="number">4</span>em;</span><br><span class="line">    outline: <span class="number">1</span>px dashed yellow;</span><br><span class="line">    position: relative;</span><br><span class="line">    display: flex;</span><br><span class="line">    justify-content: center;</span><br><span class="line"></span><br><span class="line">    div &#123;</span><br><span class="line">        width: <span class="number">0.1</span>em;</span><br><span class="line">        height: <span class="number">2</span>em;</span><br><span class="line">        background-color: currentColor;</span><br><span class="line">        border-radius: <span class="number">0.05</span>em;</span><br><span class="line">        position: absolute;</span><br><span class="line">        transform-origin: bottom;</span><br><span class="line">        transform: rotate(calc(<span class="keyword">var</span>(--n) * <span class="number">60</span>deg));</span><br><span class="line">        display: flex;</span><br><span class="line">        flex-direction: column;</span><br><span class="line">        align-items: center;</span><br><span class="line">        </span><br><span class="line">        span:nth-child(<span class="number">1</span>),span:nth-child(<span class="number">2</span>),span:nth-child(<span class="number">3</span>),span:nth-child(<span class="number">4</span>) &#123;</span><br><span class="line">            width: calc(<span class="keyword">var</span>(--slide-width));</span><br><span class="line">            height: calc(<span class="keyword">var</span>(--slide-width));</span><br><span class="line">            border: <span class="number">0.1</span>em solid;</span><br><span class="line">            border-width: <span class="number">0.1</span>em;</span><br><span class="line">            border-style: none solid solid none;</span><br><span class="line">            border-radius: <span class="number">0.05</span>em;</span><br><span class="line">            transform: rotate(<span class="number">45</span>deg);</span><br><span class="line">        &#125;</span><br><span class="line">        span:nth-child(<span class="number">1</span>)&#123;--slide-width:<span class="number">0.2</span>rem;&#125;</span><br><span class="line">        span:nth-child(<span class="number">2</span>)&#123;--slide-width:<span class="number">0.5</span>rem;&#125;</span><br><span class="line">        span:nth-child(<span class="number">3</span>)&#123;--slide-width:<span class="number">0.4</span>rem;&#125;</span><br><span class="line">        span:nth-child(<span class="number">4</span>)&#123;--slide-width:<span class="number">0.3</span>rem;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    div:nth-child(<span class="number">1</span>) &#123;--n: <span class="number">1</span>;&#125;</span><br><span class="line">    div:nth-child(<span class="number">2</span>) &#123;--n: <span class="number">2</span>;&#125;</span><br><span class="line">    div:nth-child(<span class="number">3</span>) &#123;--n: <span class="number">3</span>;&#125;</span><br><span class="line">    div:nth-child(<span class="number">4</span>) &#123;--n: <span class="number">4</span>;&#125;</span><br><span class="line">    div:nth-child(<span class="number">5</span>) &#123;--n: <span class="number">5</span>;&#125;</span><br><span class="line">    div:nth-child(<span class="number">6</span>) &#123;--n: <span class="number">6</span>;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> less </tag>
            
            <tag> é›ªèŠ± </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åå››ã€eventloopäº‹ä»¶å¾ªç¯</title>
      <link href="/2020/01/25/14.eventloop%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF/"/>
      <url>/2020/01/25/14.eventloop%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF/</url>
      
        <content type="html"><![CDATA[<h2 id="eventloopäº‹ä»¶å¾ªç¯"><a href="#eventloopäº‹ä»¶å¾ªç¯" class="headerlink" title="eventloopäº‹ä»¶å¾ªç¯"></a>eventloopäº‹ä»¶å¾ªç¯</h2><ul><li>jsæ˜¯å•çº¿ç¨‹æ‰§è¡Œçš„ï¼Œeventloopäº‹ä»¶å¾ªç¯å°±æ˜¯è§£å†³javaScriptå•çº¿ç¨‹è¿è¡Œé˜»å¡çš„ä¸€ç§æœºåˆ¶ã€‚</li></ul><h3 id="ä¸€ã€å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡"><a href="#ä¸€ã€å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡" class="headerlink" title="ä¸€ã€å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡"></a>ä¸€ã€å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡</h3> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">åœ¨ js ä¸­ï¼Œä»»åŠ¡åˆ†ä¸ºå®ä»»åŠ¡(macrotask)å’Œå¾®ä»»åŠ¡(microtask)ï¼Œè¿™ä¸¤ä¸ªä»»åŠ¡åˆ†åˆ«ç»´æŠ¤ä¸€ä¸ªé˜Ÿåˆ—ï¼Œå‡é‡‡ç”¨å…ˆè¿›å…ˆå‡º(ç±»ä¼¼æ”¾ç›˜å­)çš„ç­–ç•¥è¿›è¡Œæ‰§è¡Œï¼ŒåŒæ­¥æ‰§è¡Œçš„ä»»åŠ¡éƒ½åœ¨å®ä»»åŠ¡ä¸Šæ‰§è¡Œã€‚</span><br><span class="line">å®ä»»åŠ¡ä¸»è¦æœ‰ï¼šscript(æ•´ä½“ä»£ç )ã€setTimeoutã€setIntervalã€I/Oã€UI äº¤äº’äº‹ä»¶ã€postMessageã€MessageChannelã€setImmediate(Node.js ç¯å¢ƒ)ã€‚</span><br><span class="line">å¾®ä»»åŠ¡ä¸»è¦æœ‰ï¼š<span class="built_in">Promise</span>.thenã€ MutationObserverã€ process.nextTick(Node.js ç¯å¢ƒ)ã€‚</span><br><span class="line"></span><br><span class="line">å®ä»»åŠ¡æ˜¯ç”±å¤šä¸ªå¾®ä»»åŠ¡ç»„æˆçš„ï¼Œå…ˆæ‰§è¡Œå¾®ä»»åŠ¡ï¼Œåæ‰§è¡Œå®ä»»åŠ¡ã€‚</span><br></pre></td></tr></table></figure><h3 id="äºŒã€è¿è¡Œæœºåˆ¶"><a href="#äºŒã€è¿è¡Œæœºåˆ¶" class="headerlink" title="äºŒã€è¿è¡Œæœºåˆ¶"></a>äºŒã€è¿è¡Œæœºåˆ¶</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">åœ¨äº‹ä»¶å¾ªç¯ä¸­ï¼Œæ¯è¿›è¡Œä¸€æ¬¡å¾ªç¯æ“ä½œç§°ä¸º tickï¼Œæ¯ä¸€æ¬¡ tick çš„ä»»åŠ¡å¤„ç†æ¨¡å‹æ˜¯æ¯”è¾ƒå¤æ‚çš„ï¼Œä½†å…³é”®æ­¥éª¤å¦‚ä¸‹ï¼š</span><br><span class="line"></span><br><span class="line">- æ‰§è¡Œä¸€ä¸ªå®ä»»åŠ¡ï¼ˆæ ˆä¸­æ²¡æœ‰å°±ä»äº‹ä»¶é˜Ÿåˆ—ä¸­è·å–ï¼‰</span><br><span class="line">- æ‰§è¡Œè¿‡ç¨‹ä¸­å¦‚æœé‡åˆ°å¾®ä»»åŠ¡ï¼Œå°±å°†å®ƒæ·»åŠ åˆ°å¾®ä»»åŠ¡çš„ä»»åŠ¡é˜Ÿåˆ—ä¸­</span><br><span class="line">- å®ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åï¼Œç«‹å³æ‰§è¡Œå½“å‰å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„æ‰€æœ‰å¾®ä»»åŠ¡ï¼ˆä¾æ¬¡æ‰§è¡Œï¼‰</span><br><span class="line">- å½“å‰å®ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ£€æŸ¥æ¸²æŸ“ï¼Œç„¶åGUIçº¿ç¨‹æ¥ç®¡æ¸²æŸ“</span><br><span class="line">- æ¸²æŸ“å®Œæ¯•åï¼ŒJSçº¿ç¨‹ç»§ç»­æ¥ç®¡ï¼Œå¼€å§‹ä¸‹ä¸€ä¸ªå®ä»»åŠ¡ï¼ˆä»äº‹ä»¶é˜Ÿåˆ—ä¸­è·å–ï¼‰</span><br></pre></td></tr></table></figure><h3 id="ä¸‰ã€ğŸŒ°"><a href="#ä¸‰ã€ğŸŒ°" class="headerlink" title="ä¸‰ã€ğŸŒ°"></a>ä¸‰ã€ğŸŒ°</h3><h3 id="1-å°è¯•è¾“å‡ºä»¥ä¸‹ä»£ç "><a href="#1-å°è¯•è¾“å‡ºä»¥ä¸‹ä»£ç " class="headerlink" title="1.å°è¯•è¾“å‡ºä»¥ä¸‹ä»£ç "></a>1.å°è¯•è¾“å‡ºä»¥ä¸‹ä»£ç </h3> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">2</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">3</span>);</span><br><span class="line">    resolve(<span class="built_in">Date</span>.now());</span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">4</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">5</span>);</span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="number">6</span>);</span><br><span class="line">        resolve(<span class="built_in">Date</span>.now());</span><br><span class="line">    &#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="number">7</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br></pre></td></tr></table></figure><ul><li><p>é‚£ä¹ˆä»¥ä¸Šä»£ç çš„æ‰§è¡Œè¿‡ç¨‹æ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  1 3 5 4 2 6 7 </span></span><br><span class="line"><span class="number">1.</span>ä»£ç ä»ä¸Šå¾€ä¸‹æ‰§è¡Œï¼Œé¦–å…ˆè¾“å‡º <span class="number">1</span>ï¼Œ</span><br><span class="line"><span class="number">2.</span>é‡åˆ°setTimeoutï¼Œæ¨å…¥å®ä»»åŠ¡ï¼Œå¾…åé¢æ‰§è¡Œï¼Œ</span><br><span class="line"><span class="number">3.</span>é‡åˆ°<span class="built_in">Promise</span>ï¼Œé¦–å…ˆæ‰“å° <span class="number">3</span>ï¼ŒæŠŠthenåé¢çš„æ¨å…¥å¾®ä»»åŠ¡ï¼Œ</span><br><span class="line"><span class="number">4.</span>ç›´æ¥æ‰“å° <span class="number">5</span>ï¼Œ</span><br><span class="line"><span class="number">6.</span>é‡åˆ°setTimeoutï¼Œæ¨å…¥å®ä»»åŠ¡ï¼Œå¾…åé¢æ‰§è¡Œï¼Œ</span><br><span class="line"><span class="number">7.</span>å¾®ä»»åŠ¡æŒ‰é¡ºåºæ‰§è¡Œï¼Œæ‰“å° <span class="number">4</span>ï¼Œ</span><br><span class="line"><span class="number">8.</span>å®ä»»åŠ¡æŒ‰é¡ºåºæ‰§è¡Œï¼Œæ‰“å° <span class="number">2</span>ï¼Œä»»åŠ¡é˜Ÿåˆ—ä¸­æ²¡æœ‰å¾®ä»»åŠ¡ï¼Œä¸‹ä¸€æ­¥ï¼Œ</span><br><span class="line"><span class="number">9.</span>æ‰§è¡Œå®ä»»åŠ¡ï¼Œæ‰“å° <span class="number">6</span>ï¼ŒæŠŠthenåé¢çš„æ¨å…¥å¾®ä»»åŠ¡ï¼Œ</span><br><span class="line"><span class="number">10.</span>æ‰§è¡Œå¾®ä»»åŠ¡ï¼Œæ‰“å° <span class="number">7</span>ï¼Œå®Œæˆã€‚</span><br></pre></td></tr></table></figure><h3 id="2-å°è¯•è¾“å‡ºä»¥ä¸‹ä»£ç "><a href="#2-å°è¯•è¾“å‡ºä»¥ä¸‹ä»£ç " class="headerlink" title="2.å°è¯•è¾“å‡ºä»¥ä¸‹ä»£ç "></a>2.å°è¯•è¾“å‡ºä»¥ä¸‹ä»£ç </h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">async1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'async1 start'</span>);</span><br><span class="line">    <span class="keyword">await</span> async2();</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'async1 end'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">async2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'async2'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'script start'</span>);</span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'setTimeout'</span>);</span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line">async1();</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'promise1'</span>);</span><br><span class="line">    resolve();</span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'promise2'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'script end'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line">    await async2()ç­‰ä»·äº</span><br><span class="line">    async2().then(() =&gt; &#123;</span><br><span class="line">            console.log('async1 end');</span><br><span class="line">    &#125;)</span><br><span class="line">**/</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span><br><span class="line">    script start</span><br><span class="line">    async1 start</span><br><span class="line">    async2</span><br><span class="line">    promise1</span><br><span class="line">    script end</span><br><span class="line">    async1 end</span><br><span class="line">    promise2</span><br><span class="line">    setTimeout</span><br><span class="line">*/</span></span><br><span class="line"><span class="number">1.</span>é¦–å…ˆå®šä¹‰äº†ä¸¤ä¸ª<span class="keyword">async</span>ï¼Œæ²¡è°ƒç”¨ï¼Œç›´æ¥ä¸‹ä¸€æ­¥ï¼Œ</span><br><span class="line"><span class="number">2.</span>æ‰§è¡Œ script startï¼Œ</span><br><span class="line"><span class="number">3.</span>é‡åˆ°setTimeoutï¼Œ æ¨å…¥å®ä»»åŠ¡ï¼Œ</span><br><span class="line"><span class="number">3.</span>æ‰§è¡Œ async1å‡½æ•°,åœ¨<span class="keyword">await</span>ä¹‹å‰çš„ä»£ç æ˜¯ç«‹å³æ‰§è¡Œçš„ï¼Œæ‰€ä»¥ä¼šç«‹å³è¾“å‡º async1 start,é‡åˆ°äº†<span class="keyword">await</span>æ—¶ï¼Œä¼šå°†<span class="keyword">await</span>åé¢çš„è¡¨è¾¾å¼æ‰§è¡Œä¸€éï¼Œæ‰€ä»¥å°±ç´§æ¥ç€è¾“å‡ºasync2,æ‰“å°async2ï¼Œ</span><br><span class="line"><span class="number">4.</span>å¾€ä¸‹èµ°ï¼Œé‡åˆ°<span class="built_in">Promise</span>ï¼Œæ‰“å°promise1ï¼Œ thenæ¨å…¥å¾®ä»»åŠ¡ï¼Œ</span><br><span class="line"><span class="number">5.</span>å¾€ä¸‹èµ°ï¼Œæ‰“å°script endï¼Œ</span><br><span class="line"><span class="number">6.</span>ç»§ç»­æŒ‰é¡ºåºæ‰§è¡Œä¹‹å‰ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„å¾®ä»»åŠ¡ï¼Œå…ˆæ‰“å°async1 endï¼Œ å†æ‰“å° promise2ï¼Œ</span><br><span class="line"><span class="number">7.</span>æ‰§è¡Œå®ä»»åŠ¡ï¼Œæ‰“å°setTimeoutã€‚</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> eventloop </tag>
            
            <tag> äº‹ä»¶å¾ªç¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åä¸‰ã€æ•°ç»„å’Œå­—ç¬¦ä¸²ç›¸å…³æ–¹æ³•</title>
      <link href="/2020/01/20/13.%E6%95%B0%E7%BB%84%E5%92%8C%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9B%B8%E5%85%B3%E6%96%B9%E6%B3%95/"/>
      <url>/2020/01/20/13.%E6%95%B0%E7%BB%84%E5%92%8C%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9B%B8%E5%85%B3%E6%96%B9%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ï¼šæ•°ç»„æ–¹æ³•"><a href="#ä¸€ï¼šæ•°ç»„æ–¹æ³•" class="headerlink" title="ä¸€ï¼šæ•°ç»„æ–¹æ³•"></a>ä¸€ï¼šæ•°ç»„æ–¹æ³•</h2><a id="more"></a><h3 id="1-splice-â€“-æ‹¼æ¥æ•°ç»„"><a href="#1-splice-â€“-æ‹¼æ¥æ•°ç»„" class="headerlink" title="1.splice() â€“ æ‹¼æ¥æ•°ç»„"></a>1.splice() â€“ æ‹¼æ¥æ•°ç»„</h3> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨1ï¼š åˆ é™¤å…ƒç´ </span></span><br><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line">arr.splice(<span class="number">0</span>,<span class="number">1</span>); <span class="comment">// [1]</span></span><br><span class="line"><span class="comment">/**</span><br><span class="line">    ç¬¬ä¸€ä¸ªå‚æ•°ï¼ˆ0ï¼‰å®šä¹‰äº†åˆ é™¤å…ƒç´ çš„ä½ç½®ï¼ˆä¸‹æ ‡ï¼‰;</span><br><span class="line">    ç¬¬äºŒä¸ªå‚æ•°ï¼ˆ1ï¼‰å®šä¹‰åº”åˆ é™¤å¤šå°‘å…ƒç´ ;</span><br><span class="line">    è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªåŒ…å«å·²åˆ é™¤é¡¹çš„æ•°ç»„,æ”¹å˜åŸæ•°ç»„ [2,3]</span><br><span class="line">**/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨2ï¼š å‘æŒ‡å®šä½ç½®æ·»åŠ å…ƒç´ </span></span><br><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line">arr.splice(<span class="number">2</span>,<span class="number">0</span>,<span class="number">5</span>,<span class="number">6</span>); <span class="comment">// []</span></span><br><span class="line"><span class="comment">/**</span><br><span class="line">    ç¬¬ä¸€ä¸ªå‚æ•°ï¼ˆ2ï¼‰å®šä¹‰äº†åº”æ·»åŠ æ–°å…ƒç´ çš„ä½ç½®ï¼ˆä¸‹æ ‡ï¼‰;</span><br><span class="line">    ç¬¬äºŒä¸ªå‚æ•°ï¼ˆ0ï¼‰å®šä¹‰åº”åˆ é™¤å¤šå°‘å…ƒç´ ;</span><br><span class="line">    å…¶ä½™å‚æ•°ï¼ˆ'5','6'ï¼‰å®šä¹‰è¦æ·»åŠ çš„æ–°å…ƒç´ .</span><br><span class="line">    è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªåŒ…å«å·²åˆ é™¤é¡¹çš„æ•°ç»„,æ”¹å˜åŸæ•°ç»„ [1, 2, 5, 6, 3]</span><br><span class="line">**/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨3ï¼š å‘æŒ‡å®šä½ç½®æ›¿æ¢å…ƒç´ </span></span><br><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line">arr.splice(<span class="number">2</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">6</span>); <span class="comment">// [3]</span></span><br><span class="line"><span class="comment">/**</span><br><span class="line">    ç¬¬ä¸€ä¸ªå‚æ•°ï¼ˆ2ï¼‰å®šä¹‰äº†åº”æ·»åŠ æ–°å…ƒç´ çš„ä½ç½®ï¼ˆä¸‹æ ‡ï¼‰;</span><br><span class="line">    ç¬¬äºŒä¸ªå‚æ•°ï¼ˆ1ï¼‰å®šä¹‰åº”åˆ é™¤å¤šå°‘å…ƒç´ ;</span><br><span class="line">    å…¶ä½™å‚æ•°ï¼ˆ'5','6'ï¼‰å®šä¹‰è¦æ·»åŠ çš„æ–°å…ƒç´ .</span><br><span class="line">    è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªåŒ…å«å·²åˆ é™¤é¡¹çš„æ•°ç»„,æ”¹å˜åŸæ•°ç»„ [1, 2, 5, 6]</span><br><span class="line">**/</span></span><br></pre></td></tr></table></figure><h3 id="2-slice-â€“-è£å‰ªæ•°ç»„"><a href="#2-slice-â€“-è£å‰ªæ•°ç»„" class="headerlink" title="2.slice() â€“ è£å‰ªæ•°ç»„"></a>2.slice() â€“ è£å‰ªæ•°ç»„</h3>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"> <span class="comment">// ä½¿ç”¨1ï¼š åªæœ‰ä¸€ä¸ªå‚æ•° -- ä»ä¸‹æ ‡ 1 å¼€å§‹åˆ‡å‡ºä¸€æ®µæ•°ç»„ï¼Œç»“æŸå‚æ•°è¢«çœç•¥ï¼Œåˆ™ slice() ä¼šåˆ‡å‡ºæ•°ç»„çš„å‰©ä½™éƒ¨åˆ†</span></span><br><span class="line"> <span class="keyword">const</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>];</span><br><span class="line"> arr.slice(<span class="number">1</span>); <span class="comment">// [2,3,4,5];</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä½¿ç”¨1ï¼š ä¸¤ä¸ªå‚æ•° -- ä»ä¸‹æ ‡ 1 åˆ° 3 åˆ‡å‡ºä¸€æ®µæ•°ç»„ï¼ˆä¸åŒ…æ‹¬ç»“æŸå‚æ•°ï¼‰</span></span><br><span class="line"> <span class="keyword">const</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>];</span><br><span class="line"> arr.slice(<span class="number">1</span>,<span class="number">3</span>); <span class="comment">// [2,3];</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// è¯¥æ–¹æ³•åˆ›å»ºæ–°æ•°ç»„,ä¸ä¼šæ”¹å˜åŸæ•°ç»„</span></span><br></pre></td></tr></table></figure><h3 id="3-toString-ã€join-â€“-æŠŠæ•°ç»„è½¬æ¢ä¸ºå­—ç¬¦ä¸²"><a href="#3-toString-ã€join-â€“-æŠŠæ•°ç»„è½¬æ¢ä¸ºå­—ç¬¦ä¸²" class="headerlink" title="3.toString()ã€join() â€“ æŠŠæ•°ç»„è½¬æ¢ä¸ºå­—ç¬¦ä¸²"></a>3.toString()ã€join() â€“ æŠŠæ•°ç»„è½¬æ¢ä¸ºå­—ç¬¦ä¸²</h3> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line">arr.toString(); <span class="comment">// 1,2,3</span></span><br><span class="line">arr.join(<span class="string">'-'</span>); <span class="comment">// 1-2-3 join() å¯ä»¥è§„å®šåˆ†éš”ç¬¦ -</span></span><br></pre></td></tr></table></figure><h3 id="4-pop-â€“-æ–¹æ³•ä»æ•°ç»„ä¸­åˆ é™¤æœ€åä¸€ä¸ªå…ƒç´ "><a href="#4-pop-â€“-æ–¹æ³•ä»æ•°ç»„ä¸­åˆ é™¤æœ€åä¸€ä¸ªå…ƒç´ " class="headerlink" title="4.pop() â€“ æ–¹æ³•ä»æ•°ç»„ä¸­åˆ é™¤æœ€åä¸€ä¸ªå…ƒç´ "></a>4.pop() â€“ æ–¹æ³•ä»æ•°ç»„ä¸­åˆ é™¤æœ€åä¸€ä¸ªå…ƒç´ </h3> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">const</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"> arr.pop(); <span class="comment">// 3 </span></span><br><span class="line"> <span class="comment">// è¯¥æ–¹æ³•è¿”å›è¢«åˆ é™¤çš„å…ƒç´ , æ”¹å˜åŸæ•°ç»„ [1,2]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line">   ä½¿ç”¨æ ˆçš„æ€æƒ³æ‰å¹³åŒ–æ•°ç»„ï¼š</span><br><span class="line">   const flat = (arr) =&gt; &#123;</span><br><span class="line">      const stack = [...arr];</span><br><span class="line">      const res = [];</span><br><span class="line">      while( stack.length )&#123;</span><br><span class="line">         const next = stack.pop();</span><br><span class="line">         if(Array.isArray(next))&#123;</span><br><span class="line">               stack.push(...next);</span><br><span class="line">         &#125; else &#123;</span><br><span class="line">               res.push(next)</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      return res.reverse();</span><br><span class="line">&#125;*/</span></span><br></pre></td></tr></table></figure><h3 id="5-push-â€“-å‘æ•°ç»„æœ«å°¾æ·»åŠ ä¸€ä¸ªæ–°çš„å…ƒç´ "><a href="#5-push-â€“-å‘æ•°ç»„æœ«å°¾æ·»åŠ ä¸€ä¸ªæ–°çš„å…ƒç´ " class="headerlink" title="5.push() â€“ å‘æ•°ç»„æœ«å°¾æ·»åŠ ä¸€ä¸ªæ–°çš„å…ƒç´ "></a>5.push() â€“ å‘æ•°ç»„æœ«å°¾æ·»åŠ ä¸€ä¸ªæ–°çš„å…ƒç´ </h3> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line">arr.push(<span class="number">4</span>); <span class="comment">// 4</span></span><br><span class="line"><span class="comment">// è¯¥æ–¹æ³•è¿”å›æ–°æ•°ç»„çš„é•¿åº¦ length, æ”¹å˜åŸæ•°ç»„ [1,2,3,4]</span></span><br></pre></td></tr></table></figure><h3 id="6-shift-â€“-åˆ é™¤é¦–ä¸ªæ•°ç»„å…ƒç´ "><a href="#6-shift-â€“-åˆ é™¤é¦–ä¸ªæ•°ç»„å…ƒç´ " class="headerlink" title="6.shift() â€“ åˆ é™¤é¦–ä¸ªæ•°ç»„å…ƒç´ "></a>6.shift() â€“ åˆ é™¤é¦–ä¸ªæ•°ç»„å…ƒç´ </h3> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line">arr.shift(); <span class="comment">// 1</span></span><br><span class="line"><span class="comment">// è¯¥æ–¹æ³•è¿”å›è¢«åˆ é™¤çš„å…ƒç´ , æ”¹å˜åŸæ•°ç»„ [2,3]</span></span><br></pre></td></tr></table></figure><h3 id="7-unshift-â€“-å‘æ•°ç»„å¤´éƒ¨æ·»åŠ æ–°å…ƒç´ "><a href="#7-unshift-â€“-å‘æ•°ç»„å¤´éƒ¨æ·»åŠ æ–°å…ƒç´ " class="headerlink" title="7.unshift() â€“ å‘æ•°ç»„å¤´éƒ¨æ·»åŠ æ–°å…ƒç´ "></a>7.unshift() â€“ å‘æ•°ç»„å¤´éƒ¨æ·»åŠ æ–°å…ƒç´ </h3> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line">arr.unshift(<span class="number">9</span>); <span class="comment">// 4</span></span><br><span class="line"><span class="comment">// è¯¥æ–¹æ³•è¿”å›æ–°æ•°ç»„çš„é•¿åº¦ length, æ”¹å˜åŸæ•°ç»„ [9,1,2,3]</span></span><br></pre></td></tr></table></figure><h3 id="8-concat-â€“-åˆå¹¶æ•°ç»„"><a href="#8-concat-â€“-åˆå¹¶æ•°ç»„" class="headerlink" title="8.concat() â€“ åˆå¹¶æ•°ç»„"></a>8.concat() â€“ åˆå¹¶æ•°ç»„</h3> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"><span class="keyword">const</span> newArr = [<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>];</span><br><span class="line">arr.concat(newArr); <span class="comment">// [1,2,3,4,5,6]</span></span><br><span class="line"><span class="comment">// è¯¥æ–¹æ³•ä¸ä¼šæ›´æ”¹ç°æœ‰æ•°ç»„ï¼Œå®ƒæ€»æ˜¯è¿”å›ä¸€ä¸ªæ–°æ•°ç»„ [1,2,3,4,5,6]</span></span><br></pre></td></tr></table></figure><h3 id="9-sort-â€“-æ•°ç»„æ’åº"><a href="#9-sort-â€“-æ•°ç»„æ’åº" class="headerlink" title="9.sort() â€“ æ•°ç»„æ’åº"></a>9.sort() â€“ æ•°ç»„æ’åº</h3> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">2</span>,<span class="number">1</span>,<span class="number">3</span>];</span><br><span class="line">arr.sort(); <span class="comment">// [1,2,3]</span></span><br><span class="line">arr.sort((a,b) =&gt; b - a) <span class="comment">// [3,2,1]</span></span><br><span class="line"><span class="comment">// è¯¥æ–¹æ³•ä¸ä¼šæ›´æ”¹ç°æœ‰æ•°ç»„ï¼Œå®ƒæ€»æ˜¯è¿”å›ä¸€ä¸ªæ–°æ•°ç»„ [1,2,3,4,5,6]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line">    // 1.æ’åº</span><br><span class="line">        const compare = (property,desc) =&gt; &#123;</span><br><span class="line">            return function (a, b) &#123;</span><br><span class="line">                var value1 = a[property];</span><br><span class="line">                var value2 = b[property];</span><br><span class="line">                if(desc)&#123;</span><br><span class="line">                    // å‡åºæ’åˆ—</span><br><span class="line">                    return value1 - value2;</span><br><span class="line">                &#125;else&#123;</span><br><span class="line">                    // é™åºæ’åˆ—</span><br><span class="line">                    return value2 - value1;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    2. æŸ¥æ‰¾æœ€å¤§å€¼</span><br><span class="line">        Math.max.apply(null, arr);</span><br><span class="line"></span><br><span class="line">    3. æŸ¥æ‰¾æœ€å°å€¼</span><br><span class="line">        Math.min.apply(null, arr);</span><br><span class="line">*/</span></span><br></pre></td></tr></table></figure><h3 id="9-reverse-â€“-åè½¬æ•°ç»„"><a href="#9-reverse-â€“-åè½¬æ•°ç»„" class="headerlink" title="9.reverse() â€“ åè½¬æ•°ç»„"></a>9.reverse() â€“ åè½¬æ•°ç»„</h3> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line">arr.reverse(arr); <span class="comment">// [3,2,1]</span></span><br></pre></td></tr></table></figure><h2 id="äºŒï¼šå­—ç¬¦ä¸²æ–¹æ³•"><a href="#äºŒï¼šå­—ç¬¦ä¸²æ–¹æ³•" class="headerlink" title="äºŒï¼šå­—ç¬¦ä¸²æ–¹æ³•"></a>äºŒï¼šå­—ç¬¦ä¸²æ–¹æ³•</h2><h3 id="1-indexOf-â€“-è¿”å›å­—ç¬¦ä¸²ä¸­æŒ‡å®šæ–‡æœ¬-é¦–æ¬¡-å‡ºç°çš„ç´¢å¼•ï¼ˆä½ç½®ï¼‰"><a href="#1-indexOf-â€“-è¿”å›å­—ç¬¦ä¸²ä¸­æŒ‡å®šæ–‡æœ¬-é¦–æ¬¡-å‡ºç°çš„ç´¢å¼•ï¼ˆä½ç½®ï¼‰" class="headerlink" title="1.indexOf() â€“ è¿”å›å­—ç¬¦ä¸²ä¸­æŒ‡å®šæ–‡æœ¬ é¦–æ¬¡ å‡ºç°çš„ç´¢å¼•ï¼ˆä½ç½®ï¼‰"></a>1.indexOf() â€“ è¿”å›å­—ç¬¦ä¸²ä¸­æŒ‡å®šæ–‡æœ¬ é¦–æ¬¡ å‡ºç°çš„ç´¢å¼•ï¼ˆä½ç½®ï¼‰</h3> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> str = <span class="string">'indexOf'</span>;</span><br><span class="line">str.indexOf(<span class="string">'index'</span>); <span class="comment">// 0</span></span><br><span class="line"><span class="comment">// å¦‚æœæœªæ‰¾åˆ°æ–‡æœ¬ï¼Œ è¿”å› -1</span></span><br></pre></td></tr></table></figure><h3 id="2-lastIndexOf-â€“-è¿”å›æŒ‡å®šæ–‡æœ¬åœ¨å­—ç¬¦ä¸²ä¸­-æœ€å-ä¸€æ¬¡å‡ºç°çš„ç´¢å¼•"><a href="#2-lastIndexOf-â€“-è¿”å›æŒ‡å®šæ–‡æœ¬åœ¨å­—ç¬¦ä¸²ä¸­-æœ€å-ä¸€æ¬¡å‡ºç°çš„ç´¢å¼•" class="headerlink" title="2.lastIndexOf() â€“ è¿”å›æŒ‡å®šæ–‡æœ¬åœ¨å­—ç¬¦ä¸²ä¸­ æœ€å ä¸€æ¬¡å‡ºç°çš„ç´¢å¼•"></a>2.lastIndexOf() â€“ è¿”å›æŒ‡å®šæ–‡æœ¬åœ¨å­—ç¬¦ä¸²ä¸­ æœ€å ä¸€æ¬¡å‡ºç°çš„ç´¢å¼•</h3> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> str = <span class="string">'lastIndexOf'</span>;</span><br><span class="line">str.lastIndexOf(<span class="string">'last'</span>); <span class="comment">// 0</span></span><br><span class="line"><span class="comment">// å¦‚æœæœªæ‰¾åˆ°æ–‡æœ¬ï¼Œ è¿”å› -1</span></span><br></pre></td></tr></table></figure><h3 id="3-slice-ã€substring-ã€substr-â€“-è£å‰ªå­—ç¬¦ä¸²"><a href="#3-slice-ã€substring-ã€substr-â€“-è£å‰ªå­—ç¬¦ä¸²" class="headerlink" title="3.slice()ã€substring()ã€substr() â€“ è£å‰ªå­—ç¬¦ä¸²"></a>3.slice()ã€substring()ã€substr() â€“ è£å‰ªå­—ç¬¦ä¸²</h3> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æœ‰ä¸‰ç§æå–éƒ¨åˆ†å­—ç¬¦ä¸²çš„æ–¹æ³•ï¼š</span></span><br><span class="line"> - slice(start, end)</span><br><span class="line"> - substring(start, end)</span><br><span class="line"> - substr(start, length)</span><br></pre></td></tr></table></figure><ul><li><p>slice() â€“ æå–å­—ç¬¦ä¸²çš„æŸä¸ªéƒ¨åˆ†å¹¶åœ¨æ–°å­—ç¬¦ä¸²ä¸­è¿”å›è¢«æå–çš„éƒ¨åˆ†</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> str = <span class="string">'æå–å­—ç¬¦ä¸²'</span>;</span><br><span class="line">str.slice(<span class="number">2</span>,<span class="number">3</span>); <span class="comment">// 'å­—'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœæŸä¸ªå‚æ•°ä¸ºè´Ÿï¼Œåˆ™ä»å­—ç¬¦ä¸²çš„ç»“å°¾å¼€å§‹è®¡æ•°ã€‚</span></span><br><span class="line">str.slice(-<span class="number">3</span>,-<span class="number">2</span>); <span class="comment">// 'å­—'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœçœç•¥ç¬¬äºŒä¸ªå‚æ•°ï¼Œåˆ™è¯¥æ–¹æ³•å°†è£å‰ªå­—ç¬¦ä¸²çš„å‰©ä½™éƒ¨åˆ†ï¼š</span></span><br><span class="line">str.slice(<span class="number">1</span>); <span class="comment">// 'å–å­—ç¬¦ä¸²'</span></span><br></pre></td></tr></table></figure></li><li><p>substring() â€“ ç±»ä¼¼äº slice(), ä½†æ˜¯æ— æ³•æ¥å—è´Ÿçš„ç´¢å¼•</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> str = <span class="string">'æå–å­—ç¬¦ä¸²'</span>;</span><br><span class="line">str.substring(<span class="number">2</span>,<span class="number">3</span>); <span class="comment">// 'å­—'</span></span><br></pre></td></tr></table></figure></li><li><p>substr() â€“ ç±»ä¼¼äº slice(), ä½†æ˜¯ç¬¬äºŒä¸ªå‚æ•°è§„å®šè¢«æå–éƒ¨åˆ†çš„é•¿åº¦</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> str = <span class="string">'æå–å­—ç¬¦ä¸²'</span>;</span><br><span class="line">str.substring(<span class="number">2</span>,<span class="number">3</span>); <span class="comment">// 'å­—ç¬¦ä¸²'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœçœç•¥ç¬¬äºŒä¸ªå‚æ•°ï¼Œåˆ™è¯¥ substr() å°†è£å‰ªå­—ç¬¦ä¸²çš„å‰©ä½™éƒ¨åˆ†ã€‚</span></span><br><span class="line"> str.substring(<span class="number">2</span>); <span class="comment">// 'å–å­—ç¬¦ä¸²'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¦‚æœé¦–ä¸ªå‚æ•°ä¸ºè´Ÿï¼Œåˆ™ä»å­—ç¬¦ä¸²çš„ç»“å°¾è®¡ç®—ä½ç½®ã€‚ç¬¬äºŒä¸ªå‚æ•°ä¸èƒ½ä¸ºè´Ÿï¼Œå› ä¸ºå®ƒå®šä¹‰çš„æ˜¯é•¿åº¦ã€‚</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="4-replace-â€“-ç”¨å¦ä¸€ä¸ªå€¼æ›¿æ¢åœ¨å­—ç¬¦ä¸²ä¸­æŒ‡å®šçš„å€¼"><a href="#4-replace-â€“-ç”¨å¦ä¸€ä¸ªå€¼æ›¿æ¢åœ¨å­—ç¬¦ä¸²ä¸­æŒ‡å®šçš„å€¼" class="headerlink" title="4.replace() â€“ ç”¨å¦ä¸€ä¸ªå€¼æ›¿æ¢åœ¨å­—ç¬¦ä¸²ä¸­æŒ‡å®šçš„å€¼"></a>4.replace() â€“ ç”¨å¦ä¸€ä¸ªå€¼æ›¿æ¢åœ¨å­—ç¬¦ä¸²ä¸­æŒ‡å®šçš„å€¼</h3>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> str = <span class="string">'hello world'</span>;</span><br><span class="line">str.replace(<span class="regexp">/l/ig</span>,<span class="string">'æ›¿æ¢'</span>); <span class="comment">// "heæ›¿æ¢æ›¿æ¢o woræ›¿æ¢d" </span></span><br><span class="line"><span class="comment">// è¿”å›çš„æ˜¯æ–°å­—ç¬¦ä¸²ã€‚</span></span><br></pre></td></tr></table></figure><h3 id="5-toUpperCase-â€“-æŠŠå­—ç¬¦ä¸²è½¬æ¢ä¸ºå¤§å†™"><a href="#5-toUpperCase-â€“-æŠŠå­—ç¬¦ä¸²è½¬æ¢ä¸ºå¤§å†™" class="headerlink" title="5.toUpperCase() â€“ æŠŠå­—ç¬¦ä¸²è½¬æ¢ä¸ºå¤§å†™"></a>5.toUpperCase() â€“ æŠŠå­—ç¬¦ä¸²è½¬æ¢ä¸ºå¤§å†™</h3>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> str = <span class="string">'hello world'</span>;</span><br><span class="line">str.toUpperCase(); <span class="comment">// "HELLO WORLD"</span></span><br></pre></td></tr></table></figure><h3 id="6-toLowerCase-â€“-æŠŠå­—ç¬¦ä¸²è½¬æ¢ä¸ºå°å†™"><a href="#6-toLowerCase-â€“-æŠŠå­—ç¬¦ä¸²è½¬æ¢ä¸ºå°å†™" class="headerlink" title="6.toLowerCase() â€“  æŠŠå­—ç¬¦ä¸²è½¬æ¢ä¸ºå°å†™"></a>6.toLowerCase() â€“  æŠŠå­—ç¬¦ä¸²è½¬æ¢ä¸ºå°å†™</h3>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> str = <span class="string">'HELLO WORLD'</span>;</span><br><span class="line">str.toLowerCase(); <span class="comment">// "hello world"</span></span><br></pre></td></tr></table></figure><h3 id="7-concat-â€“-è¿æ¥ä¸¤ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ä¸²"><a href="#7-concat-â€“-è¿æ¥ä¸¤ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ä¸²" class="headerlink" title="7.concat() â€“  è¿æ¥ä¸¤ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ä¸²"></a>7.concat() â€“  è¿æ¥ä¸¤ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ä¸²</h3>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> str = <span class="string">'hello'</span>;</span><br><span class="line"><span class="keyword">const</span> str2 = <span class="string">'world'</span>;</span><br><span class="line">str.concat(str2); <span class="comment">// "helloworld"</span></span><br></pre></td></tr></table></figure><h3 id="8-trim-â€“-åˆ é™¤å­—ç¬¦ä¸²ä¸¤ç«¯çš„ç©ºç™½ç¬¦ï¼š"><a href="#8-trim-â€“-åˆ é™¤å­—ç¬¦ä¸²ä¸¤ç«¯çš„ç©ºç™½ç¬¦ï¼š" class="headerlink" title="8.trim() â€“  åˆ é™¤å­—ç¬¦ä¸²ä¸¤ç«¯çš„ç©ºç™½ç¬¦ï¼š"></a>8.trim() â€“  åˆ é™¤å­—ç¬¦ä¸²ä¸¤ç«¯çš„ç©ºç™½ç¬¦ï¼š</h3>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> str = <span class="string">' hello world '</span>;</span><br><span class="line">str.trim(); <span class="comment">// "hello world"</span></span><br></pre></td></tr></table></figure><h3 id="9-split-â€“-å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°ç»„"><a href="#9-split-â€“-å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°ç»„" class="headerlink" title="9.split() â€“ å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°ç»„"></a>9.split() â€“ å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°ç»„</h3> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> str = <span class="string">'1,2,3,4'</span>;</span><br><span class="line">str.split(<span class="string">','</span>); <span class="comment">// ["1", "2", "3", "4"]</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> å­—ç¬¦ä¸² </tag>
            
            <tag> å­—ç¬¦ä¸²æ–¹æ³• </tag>
            
            <tag> æ•°ç»„ </tag>
            
            <tag> æ•°ç»„æ–¹æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åäºŒã€æ•°ç»„å»é‡</title>
      <link href="/2020/01/15/12.%E6%95%B0%E7%BB%84%E5%8E%BB%E9%87%8D/"/>
      <url>/2020/01/15/12.%E6%95%B0%E7%BB%84%E5%8E%BB%E9%87%8D/</url>
      
        <content type="html"><![CDATA[<h2 id="æ•°ç»„å»é‡"><a href="#æ•°ç»„å»é‡" class="headerlink" title="æ•°ç»„å»é‡"></a>æ•°ç»„å»é‡</h2><a id="more"></a><ul><li><p>reduce + find</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> data = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">6</span>,<span class="number">7</span>];</span><br><span class="line"><span class="keyword">const</span> distinct = (arr) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> arr.reduce((total,curr, index) =&gt; &#123;</span><br><span class="line">        <span class="comment">// findè¿”å›æ•°ç»„ä¸­æ»¡è¶³æä¾›çš„æµ‹è¯•å‡½æ•°çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„å€¼</span></span><br><span class="line">        <span class="keyword">const</span> exist = total.find((item) =&gt; item === curr );</span><br><span class="line">        <span class="keyword">if</span>(!exist)&#123;</span><br><span class="line">            total.push(curr)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> total</span><br><span class="line">    &#125;,[])</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(distinct(data)); <span class="comment">// // [1, 2, 3, 4, 5, 6, 7]</span></span><br><span class="line"><span class="comment">// åˆ©ç”¨findæŸ¥æ‰¾æ˜¯å¦å­˜åœ¨ç›¸åŒå…ƒç´ ï¼Œå¦‚æœä¸å­˜åœ¨å°±pushåˆ°æ•°ç»„é‡Œ</span></span><br></pre></td></tr></table></figure></li><li><p>1.filter + indexOf</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">1</span>,<span class="number">2</span>];</span><br><span class="line"><span class="keyword">const</span> distinct = (arr) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> arr.filter((item,index) =&gt; &#123;</span><br><span class="line">        <span class="keyword">return</span> arr.indexOf(item) === index</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(distinct(arr));<span class="comment">// [1, 2, 3, 4, 5]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ©ç”¨indexOfæ£€æµ‹å…ƒç´ åœ¨æ•°ç»„ä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®æ˜¯å¦å’Œå…ƒç´ ç°åœ¨çš„ä½ç½®ç›¸ç­‰ï¼Œå¦‚æœä¸ç­‰åˆ™è¯´æ˜è¯¥å…ƒç´ æ˜¯é‡å¤å…ƒç´ </span></span><br></pre></td></tr></table></figure></li><li><p>åŒé‡forå¾ªç¯</p></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> data = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">1</span>,<span class="number">2</span>];</span><br><span class="line"><span class="keyword">const</span> distinct = (arr) =&gt; &#123;</span><br><span class="line">     <span class="keyword">for</span>( <span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.length; i++ )&#123;</span><br><span class="line">         <span class="keyword">for</span>(<span class="keyword">let</span> j = i + <span class="number">1</span>; j &lt; arr.length; j++)&#123;</span><br><span class="line">             <span class="keyword">if</span>(arr[i] === arr[j])&#123;</span><br><span class="line">                 arr.splice(j, <span class="number">1</span>);</span><br><span class="line">                 j--;</span><br><span class="line">             &#125;</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">return</span> arr;</span><br><span class="line">&#125;;</span><br><span class="line"> <span class="built_in">console</span>.log(distinct(data)); <span class="comment">// [1, 2, 3, 4, 5]</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">// å…ˆå®šä¹‰ä¸€ä¸ªåŒ…å«åŸå§‹æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ çš„æ•°ç»„ï¼Œç„¶åéå†åŸå§‹æ•°ç»„ï¼Œå°†åŸå§‹æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ä¸æ–°æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ è¿›è¡Œæ¯”å¯¹ï¼Œå¦‚æœä¸é‡å¤åˆ™æ·»åŠ åˆ°æ–°æ•°ç»„ä¸­ï¼Œæœ€åè¿”å›æ–°æ•°ç»„</span></span><br></pre></td></tr></table></figure><ul><li><p>ES6 ä¸­çš„ Set å»é‡</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> data = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">1</span>,<span class="number">2</span>];</span><br><span class="line"><span class="keyword">const</span> distinct = (arr) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> [...new <span class="built_in">Set</span>(arr)]</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(distinct(data)); <span class="comment">// [1, 2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure></li><li><p>ä¾‹å­ğŸŒ°</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">   ï¼ˆæºç¨‹ï¼‰ç®—æ³•æ‰‹å†™é¢˜</span><br><span class="line">    å·²çŸ¥å¦‚ä¸‹æ•°ç»„ï¼š</span><br><span class="line">    var arr = [ [1, 2, 2], [3, 4, 5, 5], [6, 7, 8, 9, [11, 12, [12, 13, [14] ] ] ], 10];</span><br><span class="line">    ç¼–å†™ä¸€ä¸ªç¨‹åºå°†æ•°ç»„æ‰å¹³åŒ–å¹¶å»é™¤å…¶ä¸­é‡å¤éƒ¨åˆ†æ•°æ®ï¼Œæœ€ç»ˆå¾—åˆ°ä¸€ä¸ªå‡åºä¸”ä¸é‡å¤çš„æ•°ç»„</span><br><span class="line">**/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = [ [<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">5</span>], [<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, [<span class="number">11</span>, <span class="number">12</span>, [<span class="number">12</span>, <span class="number">13</span>, [<span class="number">14</span>] ] ] ], <span class="number">10</span>];</span><br><span class="line"><span class="keyword">const</span> flat = (arr) =&gt; &#123; <span class="comment">// æ‰å¹³åŒ–æ•°ç»„</span></span><br><span class="line">    <span class="keyword">return</span> arr.reduce((prv, curr) =&gt; &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Array</span>.isArray(curr) ? prv.concat(flat(curr)) : prv.concat(curr) </span><br><span class="line">    &#125;,[])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> newArr = flat(arr);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> removeRepeat = (arr) =&gt; &#123; <span class="comment">// æ•°ç»„å»é‡</span></span><br><span class="line">    <span class="keyword">return</span> arr.filter((item,index) =&gt; &#123;</span><br><span class="line">        <span class="keyword">return</span> arr.indexOf(item) === index</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> res = removeRepeat(newArr)</span><br><span class="line"><span class="built_in">console</span>.log(res.sort((a,b) =&gt; a - b))</span><br><span class="line"><span class="comment">// [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line">    ç®€ä¾¿è§£æ³•ï¼š</span><br><span class="line">    Array.from( new Set( arr.flat(Infinity)) ).sort(( a, b )=&gt;a - b)</span><br><span class="line">**/</span></span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> æ•°ç»„ </tag>
            
            <tag> æ•°ç»„å»é‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åä¸€ã€ä¹å®«æ ¼æŠ½å¥–</title>
      <link href="/2020/01/10/11.%E4%B9%9D%E5%AE%AB%E6%A0%BC%E6%8A%BD%E5%A5%96/"/>
      <url>/2020/01/10/11.%E4%B9%9D%E5%AE%AB%E6%A0%BC%E6%8A%BD%E5%A5%96/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¹å®«æ ¼æŠ½å¥–"><a href="#ä¹å®«æ ¼æŠ½å¥–" class="headerlink" title="ä¹å®«æ ¼æŠ½å¥–"></a>ä¹å®«æ ¼æŠ½å¥–</h2><a id="more"></a><p><img src="/images/lottery.png" alt></p><ul><li><p>1.jså®ç°</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Lottery</span></span>&#123;</span><br><span class="line">    constructor(&#123;</span><br><span class="line">        startBtnEl,</span><br><span class="line">        giftAllEl,</span><br><span class="line">        prizeIndex,</span><br><span class="line">        delayTime,</span><br><span class="line">        animateTime,</span><br><span class="line">        clearActive,</span><br><span class="line">        _luckyTimes,</span><br><span class="line">        haveChange,</span><br><span class="line">        successCallback = () =&gt; &#123;&#125;</span><br><span class="line"></span><br><span class="line">    &#125;)&#123;</span><br><span class="line">        <span class="built_in">Object</span>.assign(<span class="keyword">this</span>,&#123;</span><br><span class="line">            startBtnEl, <span class="comment">//  å¼€å§‹æŒ‰é’®</span></span><br><span class="line">            giftAllEl, <span class="comment">// æ‰€æœ‰å¥–å“å…¬å…±class</span></span><br><span class="line">            prizeIndex: prizeIndex || <span class="string">'è°¢è°¢å‚ä¸'</span>, <span class="comment">// æŠ½ä¸­å¥–å“ä¸‹æ ‡</span></span><br><span class="line">            _luckyTimes: _luckyTimes || <span class="number">0</span>, <span class="comment">// æŠ½å¥–æ¬¡æ•°</span></span><br><span class="line">            delayTime: delayTime || <span class="number">3000</span>, <span class="comment">// å»¶æ—¶å¤šå°‘ç§’å¾—åˆ°ç»“æœ</span></span><br><span class="line">            animateTime: animateTime || <span class="number">200</span>, <span class="comment">// åŠ¨ç”»æ—¶é—´</span></span><br><span class="line">            clearActive: clearActive || <span class="literal">true</span>, <span class="comment">// æ¸…é™¤çŠ¶æ€</span></span><br><span class="line">            haveChange: haveChange || <span class="literal">false</span>, <span class="comment">// æ˜¯å¦è¿˜æœ‰æŠ½å¥–æœºä¼š</span></span><br><span class="line">            successCallback <span class="comment">// æŠ½ä¸­å¥–å“å›è°ƒ</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="keyword">this</span>.$prizeItemsEl = <span class="literal">null</span>, <span class="comment">// å¥–å“</span></span><br><span class="line">        <span class="keyword">this</span>.lotteryPrizeIndex = <span class="number">0</span>, <span class="comment">// ä¹å®«æ ¼å¯¹åº”ä¸‹æ ‡</span></span><br><span class="line">        <span class="keyword">this</span>.timer = <span class="literal">null</span>, <span class="comment">// å®šæ—¶å™¨</span></span><br><span class="line">        <span class="keyword">this</span>.init()</span><br><span class="line">    &#125;</span><br><span class="line">    init()&#123;</span><br><span class="line">        <span class="keyword">this</span>.$lotteryStartEl = <span class="built_in">document</span>.querySelector(<span class="keyword">this</span>.startBtnEl) </span><br><span class="line">        <span class="keyword">this</span>.$prizeItemsEl = <span class="built_in">document</span>.querySelectorAll(<span class="keyword">this</span>.giftAllEl) <span class="comment">// ğŸ…å¥–å“</span></span><br><span class="line">        <span class="keyword">this</span>.initStartEvent()</span><br><span class="line">    &#125;</span><br><span class="line">    initStartEvent()&#123;</span><br><span class="line">        <span class="keyword">let</span> haveChange = <span class="keyword">this</span>.haveChange;</span><br><span class="line">        <span class="keyword">const</span> el = <span class="keyword">this</span>.$lotteryStartEl</span><br><span class="line">        el.onclick = () =&gt; &#123;</span><br><span class="line">            <span class="keyword">if</span> (!el.classList.contains(<span class="string">'disabled'</span>) ) &#123;</span><br><span class="line">                <span class="keyword">this</span>.setStartBtnStatus(<span class="literal">true</span>)</span><br><span class="line">                <span class="keyword">if</span> (haveChange) &#123;</span><br><span class="line">                    <span class="comment">// æœ‰æŠ½å¥–æœºä¼šï¼Œå¾—åˆ°æŠ½å¥–ç»“æœ</span></span><br><span class="line">                    <span class="keyword">this</span>.getTargetPrize()</span><br><span class="line">                    <span class="keyword">this</span>.handleStartAnimate()</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">// æ²¡æœ‰æŠ½å¥–æœºä¼šäº†</span></span><br><span class="line">                    <span class="built_in">console</span>.log(<span class="string">'æ²¡æœ‰æŠ½å¥–æœºä¼šäº†'</span>)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å¼€å§‹æŠ½å¥–åŠ¨ç”»</span></span><br><span class="line">    handleStartAnimate()&#123;</span><br><span class="line">        <span class="keyword">this</span>.lotteryPrizeIndex = <span class="number">0</span></span><br><span class="line">        <span class="keyword">this</span>.timer = setInterval(() =&gt; &#123;</span><br><span class="line">            <span class="keyword">this</span>.lotteryPrizeIndex = <span class="keyword">this</span>.lotteryPrizeIndex === <span class="number">8</span> ? <span class="number">1</span> : <span class="keyword">this</span>.lotteryPrizeIndex + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">this</span>.addPrizeMask();</span><br><span class="line">            <span class="comment">// è¿™é‡Œå¾ˆå·§å¦™ï¼Œlottery-prize_item_index å’Œhtmlä¸€è‡´</span></span><br><span class="line">            <span class="built_in">document</span>.querySelector(<span class="string">`.lottery-prize_item_<span class="subst">$&#123;this.lotteryPrizeIndex&#125;</span>`</span>).classList.remove(<span class="string">'mask'</span>)</span><br><span class="line">        &#125;, <span class="keyword">this</span>.animateTime)</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.timer</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ·»åŠ æ‰€æœ‰å¥–å“çš„é®ç½©çŠ¶æ€</span></span><br><span class="line">    addPrizeMask()&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, l = <span class="keyword">this</span>.$prizeItemsEl.length; i &lt; l; i++) &#123;</span><br><span class="line">            <span class="keyword">this</span>.$prizeItemsEl[i].classList.add(<span class="string">'mask'</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ¸…é™¤æ‰€æœ‰å¥–å“çš„é®ç½©çŠ¶æ€</span></span><br><span class="line">    clearPrizeActive () &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, l = <span class="keyword">this</span>.$prizeItemsEl.length; i &lt; l; i++) &#123;</span><br><span class="line">            <span class="keyword">this</span>.$prizeItemsEl[i].classList.remove(<span class="string">'mask'</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æŠ½å¥–ç»“æœ</span></span><br><span class="line">    getTargetPrize()&#123;</span><br><span class="line">        <span class="comment">// æ¨¡æ‹Ÿéšæœºå¾—åˆ°ä¸€ä¸ªç»“æœ</span></span><br><span class="line">        <span class="keyword">let</span> prizeIndex = <span class="keyword">this</span>.prizeIndex;</span><br><span class="line">        <span class="keyword">if</span>(prizeIndex == <span class="string">'è°¢è°¢å‚ä¸'</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(prizeIndex == <span class="number">0</span> || prizeIndex == <span class="number">9</span>)&#123;</span><br><span class="line">            prizeIndex = <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å»¶æ—¶å‡ ç§’å¾—åˆ°ç»“æœ</span></span><br><span class="line">        setTimeout(() =&gt; &#123;</span><br><span class="line">            <span class="keyword">typeof</span> <span class="keyword">this</span>.successCallback === <span class="string">'function'</span> &amp;&amp; <span class="keyword">this</span>.successCallback(prizeIndex)</span><br><span class="line">            <span class="keyword">this</span>.stopPrizeAnimate(prizeIndex)</span><br><span class="line">        &#125;, <span class="keyword">this</span>.delayTime)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å…³é—­æŠ½å¥–åŠ¨ç”»</span></span><br><span class="line">    stopPrizeAnimate(index)&#123;</span><br><span class="line">        <span class="keyword">if</span> (index) &#123;</span><br><span class="line">            <span class="keyword">let</span> stopTimer = <span class="literal">null</span></span><br><span class="line">            stopTimer = setInterval(() =&gt; &#123;</span><br><span class="line">                <span class="keyword">if</span> (index === <span class="keyword">this</span>.lotteryPrizeIndex ) &#123;</span><br><span class="line">                    clearInterval(stopTimer)</span><br><span class="line">                    clearInterval(<span class="keyword">this</span>.timer)</span><br><span class="line">                    <span class="keyword">this</span>.setStartBtnStatus()</span><br><span class="line">                    <span class="keyword">if</span> (<span class="keyword">this</span>.clearActive) &#123;</span><br><span class="line">                        <span class="comment">//this.clearPrizeActive()</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;, <span class="number">100</span>)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">this</span>.setStartBtnStatus()</span><br><span class="line">            clearInterval(<span class="keyword">this</span>.timer)</span><br><span class="line">            <span class="keyword">this</span>.clearPrizeActive()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æŒ‰é’®çŠ¶æ€</span></span><br><span class="line">    setStartBtnStatus (status) &#123;</span><br><span class="line">        <span class="keyword">if</span> (status) &#123;</span><br><span class="line">            <span class="keyword">this</span>.$lotteryStartEl.classList.add(<span class="string">'disabled'</span>)</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">this</span>._luckyTimes) &#123; </span><br><span class="line">            <span class="keyword">this</span>.$lotteryStartEl.classList.remove(<span class="string">'disabled'</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Lottery(&#123;</span><br><span class="line">    startBtnEl: <span class="string">'.J_lottery-start'</span>,</span><br><span class="line">    giftAllEl: <span class="string">'.lottery-prize_item'</span>,</span><br><span class="line">    prizeIndex:<span class="number">2</span> ,</span><br><span class="line">    haveChange: <span class="literal">true</span>,</span><br><span class="line">    _luckyTimes: <span class="number">2</span>,</span><br><span class="line">    successCallback(prizeIndex)&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'prizeIndex---&gt;'</span>,prizeIndex)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>2.htmlç»“æ„</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"lottery-prize_items"</span>&gt;</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"lottery-prize_item lottery-prize_item_1"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">img</span> <span class="attribute">src</span>=<span class="value">"./ä¸‹è½½.jpeg"</span> <span class="attribute">alt</span>=<span class="value">""</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"lottery-prize_item lottery-prize_item_2"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">img</span> <span class="attribute">src</span>=<span class="value">"./ä¸‹è½½.jpeg"</span> <span class="attribute">alt</span>=<span class="value">""</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"lottery-prize_item lottery-prize_item_3"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">img</span> <span class="attribute">src</span>=<span class="value">"./ä¸‹è½½.jpeg"</span> <span class="attribute">alt</span>=<span class="value">""</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"lottery-prize_item lottery-prize_item_8"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">img</span> <span class="attribute">src</span>=<span class="value">"./ä¸‹è½½.jpeg"</span> <span class="attribute">alt</span>=<span class="value">""</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"lottery-start J_lottery-start "</span>&gt;</span>GO! <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"lottery-prize_item lottery-prize_item_4"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">img</span> <span class="attribute">src</span>=<span class="value">"./ä¸‹è½½.jpeg"</span> <span class="attribute">alt</span>=<span class="value">""</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"lottery-prize_item lottery-prize_item_7"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">img</span> <span class="attribute">src</span>=<span class="value">"./ä¸‹è½½.jpeg"</span> <span class="attribute">alt</span>=<span class="value">""</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"lottery-prize_item lottery-prize_item_6"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">img</span> <span class="attribute">src</span>=<span class="value">"./ä¸‹è½½.jpeg"</span> <span class="attribute">alt</span>=<span class="value">""</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"lottery-prize_item lottery-prize_item_5"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">img</span> <span class="attribute">src</span>=<span class="value">"./ä¸‹è½½.jpeg"</span> <span class="attribute">alt</span>=<span class="value">""</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li><li><p>3.css</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">*&#123;margin: 0; padding: 0;&#125;</span><br><span class="line">    .lottery-prize_items&#123;</span><br><span class="line">        width: 430px; </span><br><span class="line">        height:400px;</span><br><span class="line">        display: flex;</span><br><span class="line">        flex-wrap: wrap;</span><br><span class="line">        justify-content: space-between;</span><br><span class="line">        align-content: space-between;</span><br><span class="line">        padding: 20px;</span><br><span class="line">        background-color: #446CD3;</span><br><span class="line">        border-radius: 5px;</span><br><span class="line">    &#125;</span><br><span class="line">    .lottery-prize_items .lottery-prize_item, .lottery-prize_items .lottery-start&#123;</span><br><span class="line">        width: 120px;</span><br><span class="line">        height: 120px;</span><br><span class="line">        background: #D2DAFF;</span><br><span class="line">        background: #fff;</span><br><span class="line">        border-radius: 5px;</span><br><span class="line">        position: relative;</span><br><span class="line">        display: flex;</span><br><span class="line">        align-items: center;</span><br><span class="line">        justify-content: center;</span><br><span class="line">        user-select: none;</span><br><span class="line">        overflow: hidden;</span><br><span class="line">    &#125;</span><br><span class="line">    .lottery-prize_items  .mask:after&#123;</span><br><span class="line">        display: block;</span><br><span class="line">        content: '';</span><br><span class="line">        position: absolute;</span><br><span class="line">        top: 0;</span><br><span class="line">        left: 0;</span><br><span class="line">        width: 100%;</span><br><span class="line">        height: 120px;</span><br><span class="line">        background: rgba(94, 139, 255, 0.4);</span><br><span class="line">        border-radius: 5px;</span><br><span class="line">    &#125;</span><br><span class="line">    .lottery-prize_items .disabled&#123;</span><br><span class="line">        background: #C4C6CA;</span><br><span class="line">        color: #fff;</span><br><span class="line">    &#125;</span><br><span class="line">    .lottery-prize_items .lottery-prize_item img&#123;</span><br><span class="line">        width: 120px;</span><br><span class="line">        height: 120px;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> lottery </tag>
            
            <tag> æŠ½å¥– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åã€èŠ‚æ—¥å¤´åƒå°æŒ‚ä»¶</title>
      <link href="/2020/01/05/10.%E8%8A%82%E6%97%A5%E5%A4%B4%E5%83%8F%E5%B0%8F%E6%8C%82%E4%BB%B6/"/>
      <url>/2020/01/05/10.%E8%8A%82%E6%97%A5%E5%A4%B4%E5%83%8F%E5%B0%8F%E6%8C%82%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<h2 id="å®ç°æ€è·¯ï¼š"><a href="#å®ç°æ€è·¯ï¼š" class="headerlink" title="å®ç°æ€è·¯ï¼š"></a>å®ç°æ€è·¯ï¼š</h2><p><a href="https://juejin.im/post/5e00f66751882512773663dd" target="_blank" rel="external">å‚è€ƒå¤§ä½¬é“¾æ¥</a><br><img src="/images/christmas.png" alt="æ•ˆæœ"></p><p>ä¸Šä¼ çš„å¤´åƒå’Œå°æŒ‚ä»¶è¦åŒ¹é…åˆ°ä¸€èµ·ï¼Œåˆ©ç”¨canvasç”Ÿæˆå›¾ç‰‡ï¼Œå¹¶ä¸‹è½½ã€‚</p><a id="more"></a><h2 id="å®ç°ä»£ç "><a href="#å®ç°ä»£ç " class="headerlink" title="å®ç°ä»£ç "></a>å®ç°ä»£ç </h2><ul><li>é¦–å…ˆæŠŠhtmlå†™å¥½ï¼Œå†åŠ ä¸Šä¸€é¡¿CSSæ“ä½œï¼Œæ ·å¼å¦‚ä¸‹<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// html</span></span><br><span class="line"><span class="keyword">const</span> &#123; targetUrl, loading &#125; = <span class="keyword">this</span>.state;</span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">className</span>=<span class="value">&#123;</span> `$&#123;<span class="attribute">styleCss.avatarBox</span>&#125; ` &#125;&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">className</span>=<span class="value">&#123;</span> `$&#123;<span class="attribute">styleCss.avatar_main</span>&#125; $&#123;<span class="attribute">loading</span> ? <span class="attribute">styleCss.loader</span> <span class="attribute">:</span> ''&#125;` &#125;&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">img</span> <span class="attribute">onClick</span>=<span class="value">&#123;</span> () =&gt;</span> this.handleArrowChange('LEFT') &#125; className=&#123; styleCss.arrowLeft &#125; src=&#123; require('@/assets/img/avatar/arrowLeft.svg') &#125; alt=""/&gt;</span><br><span class="line"><span class="tag">&lt;<span class="title">img</span> <span class="attribute">onClick</span>=<span class="value">&#123;</span> () =&gt;</span> this.handleArrowChange('RIGHT') &#125;  className=&#123; styleCss.arrowRight &#125; src=&#123; require('@/assets/img/avatar/arrowRight.svg') &#125; alt=""/&gt;</span><br><span class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"file"</span>   <span class="attribute">accept</span>=<span class="value">"image/*"</span> <span class="attribute">onChange</span>=<span class="value">&#123;</span> (<span class="attribute">e</span>) =&gt;</span> this.handleUploadImgInit(e) &#125;/&gt;</span><br><span class="line"><span class="tag">&lt;<span class="title">img</span> <span class="attribute">src</span>=<span class="value">&#123;</span> <span class="attribute">targetUrl</span> &#125; <span class="attribute">alt</span>=<span class="value">""</span> <span class="attribute">className</span>=<span class="value">&#123;</span> <span class="attribute">styleCss.avatar_target</span> &#125;/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="title">canvas</span> <span class="attribute">className</span>=<span class="value">&#123;</span> <span class="attribute">styleCss.canvas</span> &#125; <span class="attribute">ref</span>=<span class="value">"canvas"</span> /&gt;</span></span></span><br></pre></td></tr></table></figure></li></ul><p><img src="/images/christmas1.png" alt></p><h3 id="æ ¸å¿ƒä»£ç "><a href="#æ ¸å¿ƒä»£ç " class="headerlink" title="æ ¸å¿ƒä»£ç "></a>æ ¸å¿ƒä»£ç </h3><ul><li><p>1ã€å®šä¹‰ç›¸å…³å˜é‡</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> CANVANS_SIZE = <span class="number">256</span>;</span><br><span class="line"><span class="comment">// å°æŒ‚ä»¶æ•°ç»„,styleä½ç½®å’Œå¤§å°ä¿¡æ¯éœ€è¦è‡ªå·±è¯•éªŒä¸€ä¸‹</span></span><br><span class="line"><span class="keyword">const</span> imgSourceList = [&#123;</span><br><span class="line">    source: <span class="built_in">require</span>(<span class="string">'@/assets/img/avatar/1.png'</span>),</span><br><span class="line">    style: &#123;</span><br><span class="line">        width: <span class="number">108</span>,</span><br><span class="line">        height: <span class="number">88</span>,</span><br><span class="line">        top: <span class="string">`<span class="subst">$&#123;CANVANS_SIZE - 88&#125;</span>`</span>,</span><br><span class="line">        left: <span class="string">`<span class="subst">$&#123;CANVANS_SIZE - 108&#125;</span>`</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;, &#123;</span><br><span class="line">    source: <span class="built_in">require</span>(<span class="string">'@/assets/img/avatar/2.png'</span>),</span><br><span class="line">    style: &#123;</span><br><span class="line">        width: <span class="number">128</span>,</span><br><span class="line">        height: <span class="number">128</span>,</span><br><span class="line">        top: <span class="string">`<span class="subst">$&#123;CANVANS_SIZE - 108&#125;</span>`</span>,</span><br><span class="line">        left: <span class="string">`<span class="subst">$&#123;CANVANS_SIZE - 118&#125;</span>`</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;, &#123;</span><br><span class="line">    source: <span class="built_in">require</span>(<span class="string">'@/assets/img/avatar/3.png'</span>),</span><br><span class="line">    style: &#123;</span><br><span class="line">        width: <span class="number">96</span>,</span><br><span class="line">        height: <span class="number">108</span>,</span><br><span class="line">        top: <span class="string">`<span class="subst">$&#123;CANVANS_SIZE - 128&#125;</span>`</span>,</span><br><span class="line">        left: <span class="string">`<span class="subst">$&#123;CANVANS_SIZE - 86&#125;</span>`</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;, &#123;</span><br><span class="line">    source: <span class="built_in">require</span>(<span class="string">'@/assets/img/avatar/4.png'</span>),</span><br><span class="line">    style: &#123;</span><br><span class="line">        width: CANVANS_SIZE,</span><br><span class="line">        height: <span class="number">226</span>,</span><br><span class="line">        top: -<span class="number">38</span>,</span><br><span class="line">        left: <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;, &#123;</span><br><span class="line">    source: <span class="built_in">require</span>(<span class="string">'@/assets/img/avatar/5.png'</span>),</span><br><span class="line">    style: &#123;</span><br><span class="line">        width: <span class="number">100</span>,</span><br><span class="line">        height: <span class="number">126</span>,</span><br><span class="line">        top: <span class="number">0</span>,</span><br><span class="line">        left: CANVANS_SIZE / <span class="number">3</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;];</span><br><span class="line"></span><br><span class="line"><span class="keyword">this</span>.state=&#123;</span><br><span class="line">    decorationCurrent: imgSourceList[<span class="number">0</span>], <span class="comment">// å°æŒ‚ä»¶1</span></span><br><span class="line">    decorationList: imgSourceList, <span class="comment">// å°æŒ‚ä»¶æ•°ç»„</span></span><br><span class="line">    currentIndex:<span class="number">0</span>, <span class="comment">// å½“å‰æŒ‚ä»¶ä¸‹æ ‡</span></span><br><span class="line">    loading:<span class="literal">false</span> <span class="comment">// æ˜¯å¦æ˜¾ç¤ºåŠ è½½</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>2ã€åˆå§‹åŒ–canvas</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"> componentDidMount()&#123;</span><br><span class="line">   <span class="keyword">const</span> &#123; decorationCurrent &#125; = <span class="keyword">this</span>.state;</span><br><span class="line">   <span class="comment">// åˆå§‹åŒ–æŒ‚è½½å°æŒ‚ä»¶</span></span><br><span class="line">   <span class="keyword">this</span>.handleMakeImage(<span class="literal">null</span>, decorationCurrent).then(targetUrl =&gt; &#123;</span><br><span class="line">       <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">           targetUrl</span><br><span class="line">       &#125;);</span><br><span class="line">   &#125;);</span><br><span class="line"><span class="comment">// æŒ‚è½½canvas</span></span><br><span class="line">   <span class="keyword">this</span>.initCanvas();</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> initCanvas() &#123;</span><br><span class="line">   <span class="keyword">const</span> &#123; canvas &#125; = <span class="keyword">this</span>.refs;</span><br><span class="line">   canvas.width = CANVANS_SIZE;</span><br><span class="line">   canvas.height = CANVANS_SIZE;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure></li><li><p>3ã€ä¸Šä¼ å›¾ç‰‡</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">async</span> handleUploadImgInit(e)&#123;</span><br><span class="line">   <span class="keyword">const</span> _this = <span class="keyword">this</span>;</span><br><span class="line">   <span class="keyword">const</span> target = e.target;</span><br><span class="line">   <span class="keyword">const</span> &#123; canvas &#125; = <span class="keyword">this</span>.refs;</span><br><span class="line">   <span class="keyword">const</span> &#123; decorationCurrent &#125; = <span class="keyword">this</span>.state;</span><br><span class="line">   <span class="keyword">const</span> context = canvas.getContext(<span class="string">'2d'</span>);</span><br><span class="line">   <span class="keyword">const</span> files = e.target.files[<span class="number">0</span>]; <span class="comment">// ä¸Šä¼ çš„å›¾ç‰‡</span></span><br><span class="line">   <span class="keyword">const</span> base64Url = <span class="keyword">await</span> <span class="keyword">this</span>.handleBase64Img(files);</span><br><span class="line">   <span class="keyword">const</span> imgObj = <span class="keyword">await</span> <span class="keyword">this</span>.createImage(base64Url);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è°ƒæ•´ç”¨æˆ·å›¾ç‰‡å°ºå¯¸</span></span><br><span class="line"><span class="comment">// æ— è®ºå®½å¤§äºé«˜è¿˜æ˜¯å®½å°äºé«˜ï¼Œéƒ½ä¼šè¿›è¡Œç­‰æ¯”ç¼©æ”¾</span></span><br><span class="line">   <span class="keyword">const</span> type = imgObj.width - imgObj.height;</span><br><span class="line">   <span class="keyword">if</span> (type &gt; <span class="number">0</span>) &#123; <span class="comment">// å®½ &gt; é«˜</span></span><br><span class="line">       <span class="keyword">const</span> w = imgObj.width * CANVANS_SIZE / imgObj.height;</span><br><span class="line">       context.drawImage(imgObj, <span class="number">0</span>, <span class="number">0</span>, w, CANVANS_SIZE);</span><br><span class="line">   &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type &lt; <span class="number">0</span>) &#123; <span class="comment">// å®½ &lt; é«˜</span></span><br><span class="line">       <span class="keyword">const</span> h = imgObj.height * CANVANS_SIZE / imgObj.width;</span><br><span class="line">       context.drawImage(imgObj, <span class="number">0</span>, <span class="number">0</span>, CANVANS_SIZE, h);</span><br><span class="line">   &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">       context.drawImage(imgObj, <span class="number">0</span>, <span class="number">0</span>, CANVANS_SIZE, CANVANS_SIZE);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// canvasè½¬å›¾ç‰‡</span></span><br><span class="line">   <span class="keyword">const</span> imgUrl = canvas.toDataURL(<span class="string">'image/png'</span>);</span><br><span class="line">   <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">       imgUrl:imgUrl</span><br><span class="line">   &#125;,() =&gt; &#123;</span><br><span class="line">       target.value = <span class="string">''</span>; <span class="comment">// å¯ä»¥é‡å¤ä¸Šä¼ åŒä¸€å¼ å›¾ç‰‡</span></span><br><span class="line">   &#125;)</span><br><span class="line"></span><br><span class="line">   <span class="keyword">this</span>.handleMakeImage(imgUrl, decorationCurrent).then(targetUrl =&gt; &#123;</span><br><span class="line">       <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">           targetUrl</span><br><span class="line">       &#125;);</span><br><span class="line">   &#125;);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">// ä¸Šä¼ å›¾ç‰‡base64è½¬åŒ–</span></span><br><span class="line"> handleBase64Img(files)&#123;</span><br><span class="line">     <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>((resolve,reject) =&gt; &#123;</span><br><span class="line">         <span class="keyword">let</span> reads = <span class="keyword">new</span> FileReader();</span><br><span class="line">         reads.readAsDataURL(files);</span><br><span class="line">         reads.onload = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">             resolve(<span class="keyword">this</span>.result);</span><br><span class="line">         &#125;;</span><br><span class="line">     &#125;)</span><br><span class="line">     </span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">// åˆ›å»ºå›¾ç‰‡</span></span><br><span class="line"> createImage(imgUrl) &#123;</span><br><span class="line">     <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>((resolve, rejest) =&gt; &#123;</span><br><span class="line">         <span class="keyword">const</span> imgObj = <span class="keyword">new</span> Image();</span><br><span class="line">         imgObj.src = imgUrl;</span><br><span class="line">         imgObj.onload = (e) =&gt; &#123;</span><br><span class="line">             resolve(imgObj);</span><br><span class="line">         &#125;;</span><br><span class="line">     &#125;);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure></li><li><p>4ã€æŠŠå¤´åƒå’ŒæŒ‚ä»¶ç»„åˆåœ¨ä¸€èµ·ï¼Œç”Ÿæˆå›¾ç‰‡é“¾æ¥ï¼ˆå…³é”®ï¼‰</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> *  @param &#123; string &#125; imgUrl -- å¤„ç†çš„ç”¨æˆ·å›¾ç‰‡url</span><br><span class="line"> *  @param &#123; object &#125; decorationCurrent -- å°æŒ‚ä»¶</span><br><span class="line"> * */</span> </span><br><span class="line"><span class="keyword">async</span> handleMakeImage(imgUrl, decorationCurrent)&#123;</span><br><span class="line">  <span class="keyword">if</span> (!(imgUrl || decorationCurrent)) &#123; <span class="keyword">return</span> <span class="string">''</span>; &#125;</span><br><span class="line">  <span class="keyword">const</span> &#123; source, style &#125; = decorationCurrent;</span><br><span class="line">  <span class="keyword">const</span> &#123; width, height, top, left &#125; = style;</span><br><span class="line">  <span class="keyword">const</span> &#123; canvas &#125; = <span class="keyword">this</span>.refs;</span><br><span class="line">  <span class="keyword">this</span>.clearCanvas(canvas);</span><br><span class="line">  <span class="keyword">const</span> context = canvas.getContext(<span class="string">'2d'</span>);</span><br><span class="line">  <span class="keyword">if</span> (imgUrl) &#123;</span><br><span class="line">      <span class="keyword">const</span> bgImg = <span class="keyword">await</span> <span class="keyword">this</span>.createImage(imgUrl);</span><br><span class="line">      context.drawImage(bgImg, <span class="number">0</span>, <span class="number">0</span>, bgImg.width, bgImg.height);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (decorationCurrent &amp;&amp; source) &#123;</span><br><span class="line">      <span class="keyword">const</span> imgObj = <span class="keyword">await</span> <span class="keyword">this</span>.createImage(source);</span><br><span class="line">      context.drawImage(imgObj, left, top, width, height);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> targetUrl = canvas.toDataURL(<span class="string">'image/png'</span>);</span><br><span class="line">  <span class="keyword">return</span> targetUrl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">clearCanvas(targetCanvans) &#123;</span><br><span class="line">    <span class="keyword">let</span> ctx = targetCanvans.getContext(<span class="string">'2d'</span>);</span><br><span class="line">    ctx.clearRect(<span class="number">0</span>, <span class="number">0</span>, targetCanvans.width, targetCanvans.height);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>5ã€å·¦å³åˆ‡æ¢å°æŒ‚ä»¶</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">handleArrowChange(type)&#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; decorationList  &#125; = <span class="keyword">this</span>.state;</span><br><span class="line">      <span class="keyword">const</span> length = decorationList.length - <span class="number">1</span>;</span><br><span class="line">      <span class="keyword">let</span> index = <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">this</span>.setState((prvState) =&gt;&#123;</span><br><span class="line">          <span class="keyword">if</span>(type === <span class="string">'LEFT'</span>)&#123; <span class="comment">// å·¦</span></span><br><span class="line">              index = --prvState.currentIndex &lt; <span class="number">0</span>  ? length : prvState.currentIndex;</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123; <span class="comment">// å³</span></span><br><span class="line">              index = ++prvState.currentIndex &gt; length ? <span class="number">0</span> : prvState.currentIndex;</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">return</span> &#123;</span><br><span class="line">              loading:<span class="literal">true</span>,</span><br><span class="line">              currentIndex:index,</span><br><span class="line">              decorationCurrent: imgSourceList[index],</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;, () =&gt; &#123;</span><br><span class="line">          <span class="keyword">const</span> &#123; imgUrl, decorationCurrent&#125; = <span class="keyword">this</span>.state;</span><br><span class="line">          <span class="keyword">this</span>.handleMakeImage(imgUrl, decorationCurrent).then(targetUrl =&gt; &#123;</span><br><span class="line">              <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">                  targetUrl,</span><br><span class="line">                  loading:<span class="literal">false</span>,</span><br><span class="line">              &#125;);</span><br><span class="line">          &#125;);</span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> canvas </tag>
            
            <tag> å°æŒ‚ä»¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¹ã€å°†å…·æœ‰ç›¸åŒå±æ€§çš„å¯¹è±¡åˆå¹¶åˆ°ä¸€ä¸ªæ•°ç»„ä¸­</title>
      <link href="/2020/01/01/9.%E5%B1%9E%E6%80%A7%E5%90%88%E5%B9%B6/"/>
      <url>/2020/01/01/9.%E5%B1%9E%E6%80%A7%E5%90%88%E5%B9%B6/</url>
      
        <content type="html"><![CDATA[<h2 id="å°†å…·æœ‰ç›¸åŒå±æ€§çš„å¯¹è±¡åˆå¹¶åˆ°ä¸€ä¸ªæ•°ç»„ä¸­"><a href="#å°†å…·æœ‰ç›¸åŒå±æ€§çš„å¯¹è±¡åˆå¹¶åˆ°ä¸€ä¸ªæ•°ç»„ä¸­" class="headerlink" title="å°†å…·æœ‰ç›¸åŒå±æ€§çš„å¯¹è±¡åˆå¹¶åˆ°ä¸€ä¸ªæ•°ç»„ä¸­"></a>å°†å…·æœ‰ç›¸åŒå±æ€§çš„å¯¹è±¡åˆå¹¶åˆ°ä¸€ä¸ªæ•°ç»„ä¸­</h2><a id="more"></a><p>æ–°å¹´æ–°æ°”è±¡ï¼Œæ–°çš„ä¸€å¹´ï¼Œç»§ç»­åŠ æ²¹ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> data = [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">'group_name'</span>:<span class="string">'A'</span>,</span><br><span class="line">        <span class="string">'type'</span>: <span class="string">'apple'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">'group_name'</span>:<span class="string">'A'</span>,</span><br><span class="line">        <span class="string">'type'</span>: <span class="string">'almond'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">'group_name'</span>:<span class="string">'B'</span>,</span><br><span class="line">        <span class="string">'type'</span>: <span class="string">'banana'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">'group_name'</span>:<span class="string">'B'</span>,</span><br><span class="line">        <span class="string">'type'</span>: <span class="string">'bennet'</span></span><br><span class="line">    &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä»£ç å®ç°</span></span><br><span class="line"><span class="comment">// &#123; group_name, type &#125; = currValue</span></span><br><span class="line"><span class="keyword">const</span> res = data.reduce( (prv, &#123; group_name, type &#125; ) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> exist = prv.find(item =&gt; item.group_name == group_name);</span><br><span class="line">    <span class="keyword">if</span> (exist) &#123;</span><br><span class="line">        exist[<span class="string">"data"</span>].push(&#123;</span><br><span class="line">            group_name:group_name,</span><br><span class="line">            type:type</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        prv.push(&#123; group_name, data: [&#123;</span><br><span class="line">            group_name:group_name,</span><br><span class="line">            type:type</span><br><span class="line">        &#125;]&#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> prv;</span><br><span class="line">&#125;, []);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(res)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰“å°ç»“æœå¦‚ä¸‹ï¼š</span></span><br><span class="line">[</span><br><span class="line">    &#123;  </span><br><span class="line">       <span class="string">'group_name'</span>:A,</span><br><span class="line">        data:[</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">'group_name'</span>:<span class="string">'A'</span>,</span><br><span class="line">                <span class="string">'type'</span>: <span class="string">'apple'</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">'group_name'</span>:<span class="string">'A'</span>,</span><br><span class="line">                <span class="string">'type'</span>: <span class="string">'almond'</span></span><br><span class="line">            &#125;,</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;  </span><br><span class="line">        <span class="string">'group_name'</span>:B,</span><br><span class="line">         data:[</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">'group_name'</span>:<span class="string">'B'</span>,</span><br><span class="line">                <span class="string">'type'</span>: <span class="string">'banana'</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">'group_name'</span>:<span class="string">'B'</span>,</span><br><span class="line">                <span class="string">'type'</span>: <span class="string">'bennet'</span></span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> reduce </tag>
            
            <tag> æ•°ç»„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…«ã€æ‰å¹³åŒ–æ•°ç»„</title>
      <link href="/2019/12/30/8.%E6%89%81%E5%B9%B3%E5%8C%96%E6%95%B0%E7%BB%84/"/>
      <url>/2019/12/30/8.%E6%89%81%E5%B9%B3%E5%8C%96%E6%95%B0%E7%BB%84/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ï¼šArray-prototype-flat"><a href="#ä¸€ï¼šArray-prototype-flat" class="headerlink" title="ä¸€ï¼šArray.prototype.flat()"></a>ä¸€ï¼šArray.prototype.flat()</h2><a id="more"></a><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,[<span class="number">7</span>,<span class="number">8</span>]],<span class="number">9</span>,<span class="number">10</span>];</span><br><span class="line"><span class="comment">// ä¸ä¼ å‚æ•°æ—¶ï¼Œé»˜è®¤â€œæ‹‰å¹³â€ä¸€å±‚</span></span><br><span class="line">arr.flat();</span><br><span class="line"><span class="comment">// // [1, 2, 3, 4, 5, 6, [7,8], 9, 10]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¼ å…¥ä¸€ä¸ªæ•´æ•°å‚æ•°ï¼Œæ•´æ•°å³â€œæ‹‰å¹³â€çš„å±‚æ•°</span></span><br><span class="line">arr.flat(<span class="number">2</span>);</span><br><span class="line"><span class="comment">// // [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Infinity å…³é”®å­—ä½œä¸ºå‚æ•°æ—¶ï¼Œæ— è®ºå¤šå°‘å±‚åµŒå¥—ï¼Œéƒ½ä¼šè½¬ä¸ºä¸€ç»´æ•°ç»„</span></span><br><span class="line"><span class="comment">// Infinity(æ— ç©·å¤§)åœ¨ JS ä¸­æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ•°å­—ï¼Œå®ƒçš„ç‰¹æ€§æ˜¯ï¼šå®ƒæ¯”ä»»ä½•æœ‰é™çš„æ•°å­—éƒ½å¤§ã€‚</span></span><br><span class="line">arr.flat(<span class="literal">Infinity</span>);</span><br><span class="line"> <span class="comment">// [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¼ å…¥ &lt;=0 çš„æ•´æ•°å°†è¿”å›åŸæ•°ç»„ï¼Œä¸â€œæ‹‰å¹³â€</span></span><br><span class="line">arr.flat(<span class="number">0</span>);</span><br><span class="line">arr.flat(-<span class="number">10</span>);</span><br><span class="line"> <span class="comment">// [1,2,3,[4,5,6,[7,8]],9,10]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¦‚æœåŸæ•°ç»„æœ‰ç©ºä½ï¼Œflat()æ–¹æ³•ä¼šè¿‡æ»¤ç©ºä½</span></span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,,].flat()</span><br><span class="line"><span class="comment">// [1, 2, 3]</span></span><br></pre></td></tr></table></figure><h2 id="äºŒï¼šå…¶ä»–æ–¹æ³•å®ç°"><a href="#äºŒï¼šå…¶ä»–æ–¹æ³•å®ç°" class="headerlink" title="äºŒï¼šå…¶ä»–æ–¹æ³•å®ç°"></a>äºŒï¼šå…¶ä»–æ–¹æ³•å®ç°</h2><h3 id="1-reduce"><a href="#1-reduce" class="headerlink" title="1.reduce"></a>1.reduce</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> flat = (arr) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> arr.reduce((prv,cur) =&gt; &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Array</span>.isArray(cur) ? prv.concat(flat(cur)) : prv.concat(cur) </span><br><span class="line">    &#125;,[])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-ä½¿ç”¨æ ˆçš„æ€æƒ³å®ç°-flat-å‡½æ•°"><a href="#2-ä½¿ç”¨æ ˆçš„æ€æƒ³å®ç°-flat-å‡½æ•°" class="headerlink" title="2.ä½¿ç”¨æ ˆçš„æ€æƒ³å®ç° flat å‡½æ•°"></a>2.ä½¿ç”¨æ ˆçš„æ€æƒ³å®ç° flat å‡½æ•°</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">const flat = (arr) =&gt; &#123;</span><br><span class="line">    const stack = [...arr];</span><br><span class="line">    const res = [];</span><br><span class="line">    <span class="keyword">while</span>( stack.length )&#123;</span><br><span class="line">        const next = stack.pop();</span><br><span class="line">        <span class="keyword">if</span>(Array.isArray(next))&#123;</span><br><span class="line">            stack.push(...next);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            res.push(next)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">return</span> res.reverse();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-é€šè¿‡ä¼ å…¥æ•´æ•°å‚æ•°æ§åˆ¶â€œæ‹‰å¹³â€å±‚æ•°"><a href="#3-é€šè¿‡ä¼ å…¥æ•´æ•°å‚æ•°æ§åˆ¶â€œæ‹‰å¹³â€å±‚æ•°" class="headerlink" title="3.é€šè¿‡ä¼ å…¥æ•´æ•°å‚æ•°æ§åˆ¶â€œæ‹‰å¹³â€å±‚æ•°"></a>3.é€šè¿‡ä¼ å…¥æ•´æ•°å‚æ•°æ§åˆ¶â€œæ‹‰å¹³â€å±‚æ•°</h3> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const flat = (arr, num = <span class="number">1</span>) =&gt; &#123;</span><br><span class="line">    <span class="built_in">return</span> num &gt; <span class="number">0</span> ?</span><br><span class="line">        arr.reduce(</span><br><span class="line">        (pre, cur) =&gt; pre.concat(Array.isArray(cur) ? flat(cur, num - <span class="number">1</span>) : cur),[])</span><br><span class="line">    :</span><br><span class="line">    arr.slice()</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#const arr = [1,2,3,[1,2,3,4, [2,3,4]]];</span></span><br><span class="line"><span class="comment">#flat(arr,Infinity)</span></span><br></pre></td></tr></table></figure><p><a href="https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Global_Objects/Array/flat" target="_blank" rel="external">MDNå‚è€ƒé“¾æ¥</a></p><p><a href="https://juejin.im/post/5dff18a4e51d455804256d31" target="_blank" rel="external">å…¶ä»–å‚è€ƒ</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> flat </tag>
            
            <tag> æ‰å¹³åŒ–æ•°ç»„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸ƒã€ä¸åˆ·æ–°ä¿®æ”¹urlé“¾æ¥</title>
      <link href="/2019/12/25/7.%E4%B8%8D%E5%88%B7%E6%96%B0%E4%BF%AE%E6%94%B9url%E9%93%BE%E6%8E%A5/"/>
      <url>/2019/12/25/7.%E4%B8%8D%E5%88%B7%E6%96%B0%E4%BF%AE%E6%94%B9url%E9%93%BE%E6%8E%A5/</url>
      
        <content type="html"><![CDATA[<p>æœ‰ä¸€ä¸ªè¿™æ ·çš„éœ€æ±‚ï¼Œç‚¹å‡»åˆ†é¡µï¼Œä¸åˆ·æ–°é¡µé¢ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æˆ‘ä»¬çš„pageå‚æ•°æ˜¯è®°å½•åœ¨urlé‡Œçš„ï¼š https://xxx.html?page=1</span></span><br><span class="line"><span class="comment">//å¦‚æœé‡‡å–ç¡¬æ‹¼æ¥çš„æ–¹å¼ï¼Œæ— ç–‘ä¼šåˆ·æ–°é¡µé¢</span></span><br><span class="line"><span class="built_in">window</span>.location.href = <span class="built_in">window</span>.location.pathname + <span class="string">`?page=<span class="subst">$&#123;page&#125;</span>`</span></span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="1-pushState-æ–¹æ³•"><a href="#1-pushState-æ–¹æ³•" class="headerlink" title="1.pushState() æ–¹æ³•"></a>1.pushState() æ–¹æ³•</h2><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/History_API" target="_blank" rel="external">MDNé“¾æ¥</a><br>ä¸€ä¸ªçŠ¶æ€å¯¹è±¡, ä¸€ä¸ªæ ‡é¢˜ (ç›®å‰è¢«å¿½ç•¥), å’Œ (å¯é€‰çš„) ä¸€ä¸ªURL. è®©æˆ‘ä»¬æ¥è§£é‡Šä¸‹è¿™ä¸‰ä¸ªå‚æ•°è¯¦ç»†å†…å®¹ï¼šï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- çŠ¶æ€å¯¹è±¡ â€” çŠ¶æ€å¯¹è±¡stateæ˜¯ä¸€ä¸ªJavaScriptå¯¹è±¡ï¼Œé€šè¿‡pushState () åˆ›å»ºæ–°çš„å†å²è®°å½•æ¡ç›®ã€‚æ— è®ºä»€ä¹ˆæ—¶å€™ç”¨æˆ·å¯¼èˆªåˆ°æ–°çš„çŠ¶æ€ï¼Œpopstateäº‹ä»¶å°±ä¼šè¢«è§¦å‘ï¼Œä¸”è¯¥äº‹ä»¶çš„stateå±æ€§åŒ…å«è¯¥å†å²è®°å½•æ¡ç›®çŠ¶æ€å¯¹è±¡çš„å‰¯æœ¬</span><br><span class="line">- æ ‡é¢˜ â€” Firefox ç›®å‰å¿½ç•¥è¿™ä¸ªå‚æ•°ï¼Œä½†æœªæ¥å¯èƒ½ä¼šç”¨åˆ°ã€‚åœ¨æ­¤å¤„ä¼ ä¸€ä¸ªç©ºå­—ç¬¦ä¸²åº”è¯¥å¯ä»¥å®‰å…¨çš„é˜²èŒƒæœªæ¥è¿™ä¸ªæ–¹æ³•çš„æ›´æ”¹ã€‚æˆ–è€…ï¼Œä½ å¯ä»¥ä¸ºè·³è½¬çš„stateä¼ é€’ä¸€ä¸ªçŸ­æ ‡é¢˜</span><br><span class="line">- URL â€” è¯¥å‚æ•°å®šä¹‰äº†æ–°çš„å†å²URLè®°å½•ã€‚æ³¨æ„ï¼Œè°ƒç”¨ pushState() åæµè§ˆå™¨å¹¶ä¸ä¼šç«‹å³åŠ è½½è¿™ä¸ªURLï¼Œä½†å¯èƒ½ä¼šåœ¨ç¨åæŸäº›æƒ…å†µä¸‹åŠ è½½è¿™ä¸ªURLï¼Œæ¯”å¦‚åœ¨ç”¨æˆ·é‡æ–°æ‰“å¼€æµè§ˆå™¨æ—¶ã€‚æ–°URLä¸å¿…é¡»ä¸ºç»å¯¹è·¯å¾„ã€‚å¦‚æœæ–°URLæ˜¯ç›¸å¯¹è·¯å¾„ï¼Œé‚£ä¹ˆå®ƒå°†è¢«ä½œä¸ºç›¸å¯¹äºå½“å‰URLå¤„ç†ã€‚æ–°URLå¿…é¡»ä¸å½“å‰URLåŒæºï¼Œå¦åˆ™ pushState() ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚è¯¥å‚æ•°æ˜¯å¯é€‰çš„ï¼Œç¼ºçœä¸ºå½“å‰URL</span><br></pre></td></tr></table></figure><h2 id="2-pushStateä½¿ç”¨"><a href="#2-pushStateä½¿ç”¨" class="headerlink" title="2.pushStateä½¿ç”¨"></a>2.pushStateä½¿ç”¨</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> pageSize = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">const</span> url = <span class="string">`<span class="subst">$&#123;window.location.pathname&#125;</span>?page=<span class="subst">$&#123;pageSize&#125;</span>`</span></span><br><span class="line"><span class="built_in">window</span>.history.pushState(&#123;url: url&#125;, <span class="string">''</span>, url);</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šå°±èƒ½å®ç°é¡µé¢æ— åˆ·æ–°ä¿®æ”¹urlé“¾æ¥ã€‚</p><p>é¡ºä¾¿æ”¾ä¸Šè·å–å’Œä¿®æ”¹urlçš„å‡½æ•°ï¼š</p><h2 id="3-è·å–å’Œä¿®æ”¹urlçš„å‡½æ•°ï¼š"><a href="#3-è·å–å’Œä¿®æ”¹urlçš„å‡½æ•°ï¼š" class="headerlink" title="3.è·å–å’Œä¿®æ”¹urlçš„å‡½æ•°ï¼š"></a>3.è·å–å’Œä¿®æ”¹urlçš„å‡½æ•°ï¼š</h2><h3 id="è·å–urlå‚æ•°"><a href="#è·å–urlå‚æ•°" class="headerlink" title="è·å–urlå‚æ•°"></a>è·å–urlå‚æ•°</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getParams</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"(^|&amp;)"</span> + name + <span class="string">"=([^&amp;]*)(&amp;|$)"</span>);</span><br><span class="line">    <span class="keyword">let</span> r = <span class="built_in">window</span>.location.search.substr(<span class="number">1</span>).match(reg);</span><br><span class="line">    <span class="keyword">if</span> (r != <span class="literal">null</span>) <span class="keyword">return</span> <span class="built_in">unescape</span>(r[<span class="number">2</span>]); <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ›´æ”¹urlå‚æ•°"><a href="#æ›´æ”¹urlå‚æ•°" class="headerlink" title="æ›´æ”¹urlå‚æ•°"></a>æ›´æ”¹urlå‚æ•°</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">replaceParamVal</span>(<span class="params">paramName,replaceWith</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> oUrl = <span class="built_in">window</span>.location.href.toString();</span><br><span class="line">    <span class="keyword">var</span> re = evil(<span class="string">'/('</span>+ paramName+<span class="string">'=)([^&amp;]*)/gi'</span>);</span><br><span class="line">    <span class="keyword">var</span> nUrl = oUrl.replace(re,paramName+<span class="string">'='</span>+replaceWith);</span><br><span class="line">    <span class="keyword">this</span>.location = nUrl;</span><br><span class="line">    <span class="built_in">window</span>.location.href=nUrl</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">evil</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> Fn = <span class="built_in">Function</span>; <span class="comment">//ä¸€ä¸ªå˜é‡æŒ‡å‘Functionï¼Œé˜²æ­¢æœ‰äº›å‰ç«¯ç¼–è¯‘å·¥å…·æŠ¥é”™</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Fn(<span class="string">'return '</span> + fn)();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> pushState </tag>
            
            <tag> url </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…­ã€å‡½æ•°èŠ‚æµå’Œé˜²æŠ–</title>
      <link href="/2019/12/23/6.%E5%87%BD%E6%95%B0%E8%8A%82%E6%B5%81%E5%92%8C%E9%98%B2%E6%8A%96/"/>
      <url>/2019/12/23/6.%E5%87%BD%E6%95%B0%E8%8A%82%E6%B5%81%E5%92%8C%E9%98%B2%E6%8A%96/</url>
      
        <content type="html"><![CDATA[<h2 id="1-èŠ‚æµ"><a href="#1-èŠ‚æµ" class="headerlink" title="1.èŠ‚æµ"></a>1.èŠ‚æµ</h2><p>æ ¸å¿ƒæ€æƒ³: å¦‚æœåœ¨å®šæ—¶å™¨çš„æ—¶é—´èŒƒå›´å†…å†æ¬¡è§¦å‘ï¼Œåˆ™ä¸äºˆç†ç¬ï¼Œç­‰å½“å‰å®šæ—¶å™¨å®Œæˆï¼Œæ‰èƒ½å¯åŠ¨ä¸‹ä¸€ä¸ªå®šæ—¶å™¨ä»»åŠ¡ã€‚</p><a id="more"></a> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> throttle = (fn, delay) =&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> flag = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">return</span> (...args) =&gt; &#123;</span><br><span class="line">        <span class="keyword">let</span> context = <span class="keyword">this</span>;</span><br><span class="line">        <span class="keyword">if</span> (!flag) <span class="keyword">return</span>;</span><br><span class="line">        flag = <span class="literal">false</span>;</span><br><span class="line">        setTimeout(() =&gt; &#123;</span><br><span class="line">            fn.apply(context, args);</span><br><span class="line">            flag = <span class="literal">true</span>;</span><br><span class="line">        &#125;, delay);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="2-é˜²æŠ–"><a href="#2-é˜²æŠ–" class="headerlink" title="2.é˜²æŠ–"></a>2.é˜²æŠ–</h2><p> æ ¸å¿ƒæ€æƒ³: æ¯æ¬¡äº‹ä»¶è§¦å‘éƒ½åˆ é™¤åŸæ¥çš„å®šæ—¶å™¨ï¼Œå»ºç«‹æ–°çš„å®šæ—¶å™¨ï¼Œåå¤è§¦å‘å‡½æ•°ï¼Œé‚£ä¹ˆä»æœ€åä¸€æ¬¡è§¦å‘å¼€å§‹è®¡æ—¶ã€‚</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> debounce = (fn, delay) =&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> timer = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">return</span>  (...args) =&gt; &#123;</span><br><span class="line">        <span class="keyword">let</span> context = <span class="keyword">this</span>;</span><br><span class="line">        <span class="keyword">if</span>(timer)&#123;  </span><br><span class="line">            clearTimeout(timer)</span><br><span class="line">        &#125;;</span><br><span class="line">        timer = setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            fn.apply(context, args);</span><br><span class="line">        &#125;, delay);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-åˆå¹¶"><a href="#3-åˆå¹¶" class="headerlink" title="3.åˆå¹¶"></a>3.åˆå¹¶</h2><p> ç°åœ¨æˆ‘ä»¬å¯ä»¥æŠŠé˜²æŠ–å’ŒèŠ‚æµæ”¾åˆ°ä¸€èµ·ï¼Œæœ‰æ—¶å€™è§¦å‘çš„å¤ªé¢‘ç¹ä¼šå¯¼è‡´ä¸€æ¬¡å“åº”éƒ½æ²¡æœ‰ï¼Œæˆ‘ä»¬å¸Œæœ›åˆ°äº†å›ºå®šçš„æ—¶é—´å¿…é¡»ç»™ç”¨æˆ·ä¸€ä¸ªå“åº”ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span>  throttle = (fn, delay) =&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> flag = <span class="literal">true</span>, timer = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">...args</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">let</span> context = <span class="keyword">this</span>;</span><br><span class="line">        <span class="keyword">if</span>( !flag )&#123; <span class="keyword">return</span> &#125;;  </span><br><span class="line">        clearTimeout(timer);</span><br><span class="line">        flag = <span class="literal">false</span>;</span><br><span class="line">        timer = setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            flag = <span class="literal">true</span>;</span><br><span class="line">            fn.apply(context, args);</span><br><span class="line">        &#125;, delay);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-å®è·µ-â€“-å›¾ç‰‡æ‡’åŠ è½½"><a href="#4-å®è·µ-â€“-å›¾ç‰‡æ‡’åŠ è½½" class="headerlink" title="4.å®è·µ â€“ å›¾ç‰‡æ‡’åŠ è½½"></a>4.å®è·µ â€“ å›¾ç‰‡æ‡’åŠ è½½</h2><h3 id="clientHeight-ã€scrollTop-ã€-offsetTop"><a href="#clientHeight-ã€scrollTop-ã€-offsetTop" class="headerlink" title="clientHeight ã€scrollTop ã€ offsetTop"></a>clientHeight ã€scrollTop ã€ offsetTop</h3><p>æ€è·¯ï¼š ç»™imgä¸€ä¸ªé»˜è®¤å›¾ç‰‡ï¼Œä»¥åŠdata-srcå±æ€§ï¼Œå½“é¡µé¢æ»šåŠ¨åˆ°å¯¹åº”imgå…ƒç´ çš„æ—¶å€™ï¼ŒæŠŠdata-srcèµ‹å€¼ç»™srcã€‚<br> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç»™imgä¸€ä¸ªé»˜è®¤å›¾ç‰‡</span></span><br><span class="line">&lt;img src=<span class="string">"default.png"</span> data-src=<span class="string">"xxx/img.png"</span> /&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é€šè¿‡ç›‘å¬ scroll äº‹ä»¶æ¥åˆ¤æ–­å›¾ç‰‡æ˜¯å¦åˆ°è¾¾è§†å£:</span></span><br><span class="line"><span class="keyword">let</span> img = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"img"</span>);</span><br><span class="line"><span class="keyword">let</span> num = img.length;</span><br><span class="line"><span class="keyword">let</span> count = <span class="number">0</span>; <span class="comment">//è®¡æ•°å™¨ï¼Œä»ç¬¬ä¸€å¼ å›¾ç‰‡å¼€å§‹è®¡</span></span><br><span class="line"></span><br><span class="line">lazyload(); <span class="comment">//é¦–æ¬¡åŠ è½½</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'scroll'</span>, throttle(lazyload, <span class="number">200</span>)); <span class="comment">//èŠ‚æµ</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">lazyload</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> viewHeight = <span class="built_in">document</span>.documentElement.clientHeight;<span class="comment">// è§†å£é«˜åº¦</span></span><br><span class="line">    <span class="keyword">let</span> scrollTop = <span class="built_in">document</span>.documentElement.scrollTop || <span class="built_in">document</span>.body.scrollTop;<span class="comment">//æ»šåŠ¨æ¡æ»šåŠ¨çš„é«˜åº¦</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = count; i &lt; num; i++) &#123;</span><br><span class="line">        <span class="comment">//å…ƒç´ ç°åœ¨å·²ç»å‡ºç°åœ¨è§†å£ä¸­</span></span><br><span class="line">        <span class="keyword">if</span>( img[i].offsetTop &lt; scrollHeight + viewHeight ) &#123;</span><br><span class="line">            <span class="keyword">if</span>(img[i].getAttribute(<span class="string">'src'</span>) !== <span class="string">'default.png'</span>) <span class="keyword">continue</span>; <span class="comment">//å¦‚æœsrcä¸æ˜¯default.png'ï¼Œè·³è¿‡å¾ªç¯ï¼Œç»§ç»­å¾€ä¸‹å¾ªç¯</span></span><br><span class="line">            img[i].src = img[i].getAttribute(<span class="string">"data-src"</span>);</span><br><span class="line">            count ++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//scrollTop + clientHeight === scrollHeight å³è§¦å‘ä¸‹æ‹‰åŠ è½½çš„æ¡ä»¶</span></span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      
        <tags>
            
            <tag> å‡½æ•° </tag>
            
            <tag> èŠ‚æµ/é˜²æŠ– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>äº”ã€js æ·±æ‹·è´ä¸æµ…æ‹·è´</title>
      <link href="/2019/12/18/5.js%20%E6%B7%B1%E6%8B%B7%E8%B4%9D%E4%B8%8E%E6%B5%85%E6%8B%B7%E8%B4%9D/"/>
      <url>/2019/12/18/5.js%20%E6%B7%B1%E6%8B%B7%E8%B4%9D%E4%B8%8E%E6%B5%85%E6%8B%B7%E8%B4%9D/</url>
      
        <content type="html"><![CDATA[<h2 id="1-åŸºæœ¬æ•°æ®ç±»å‹å’Œå¼•ç”¨æ•°æ®ç±»å‹"><a href="#1-åŸºæœ¬æ•°æ®ç±»å‹å’Œå¼•ç”¨æ•°æ®ç±»å‹" class="headerlink" title="1.åŸºæœ¬æ•°æ®ç±»å‹å’Œå¼•ç”¨æ•°æ®ç±»å‹"></a>1.åŸºæœ¬æ•°æ®ç±»å‹å’Œå¼•ç”¨æ•°æ®ç±»å‹</h2><p> æ•°æ®åˆ†ä¸ºåŸºæœ¬æ•°æ®ç±»å‹å’Œå¼•ç”¨æ•°æ®ç±»å‹</p><p> åŸºæœ¬æ•°æ®ç±»å‹:</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span>ã€<span class="built_in">Number</span>ã€<span class="built_in">Boolean</span>ã€Nullã€Undefinedã€<span class="built_in">Symbol</span>ã€BigInt(?)</span><br></pre></td></tr></table></figure><p> å¼•ç”¨æ•°æ®ç±»å‹:</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>ã€<span class="built_in">Object</span></span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="2-æ¦‚å¿µ"><a href="#2-æ¦‚å¿µ" class="headerlink" title="2.æ¦‚å¿µ"></a>2.æ¦‚å¿µ</h2><p> æµ…æ‹·è´ï¼š</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ä»…ä»…å¤åˆ¶å¯¹è±¡çš„å¼•ç”¨ï¼Œè€Œä¸æ˜¯å¯¹è±¡æœ¬èº«</span><br></pre></td></tr></table></figure><p> æ·±æ‹·è´ï¼š</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æŠŠå¤åˆ¶çš„å¯¹è±¡æ‰€å¼•ç”¨çš„å…¨éƒ¨å¯¹è±¡éƒ½å¤åˆ¶ä¸€é</span><br></pre></td></tr></table></figure><p>ç®€å•æ¥è¯´ï¼Œæµ…æ‹·è´å°±æ˜¯è¿™ä¸ªäººçš„å½±å­ï¼Œæ·±æ‹·è´å°±æ˜¯å¤åˆ¶äº†è¿™ä¸ªäººã€‚</p><h2 id="3-æ–¹æ³•"><a href="#3-æ–¹æ³•" class="headerlink" title="3.æ–¹æ³•"></a>3.æ–¹æ³•</h2><h3 id="æµ…æ‹·è´"><a href="#æµ…æ‹·è´" class="headerlink" title="æµ…æ‹·è´"></a>æµ…æ‹·è´</h3> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> shallowClone = (obj) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> result = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">in</span> obj) &#123;</span><br><span class="line">        <span class="keyword">if</span> (obj.hasOwnProperty(i)) &#123;</span><br><span class="line">            result[i] = obj[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//Objectçš„ hasOwnProperty()æ–¹æ³•è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œåˆ¤æ–­å¯¹è±¡æ˜¯å¦åŒ…å«ç‰¹å®šçš„è‡ªèº«ï¼ˆéç»§æ‰¿ï¼‰å±æ€§ã€‚hasOwnProperty()æ–¹æ³•æ¥å¿½ç•¥ç»§æ‰¿å±æ€§.</span></span><br><span class="line"><span class="comment">//object.assign() æŠŠä»»æ„å¤šä¸ªçš„æºå¯¹è±¡è‡ªèº«çš„å¯æšä¸¾å±æ€§æ‹·è´ç»™ç›®æ ‡å¯¹è±¡ï¼Œç„¶åè¿”å›ç›®æ ‡å¯¹è±¡</span></span><br><span class="line"><span class="comment">//Array.prototype.concat() æ•°ç»„çš„ä¸€ä¸ªå†…ç½®æ–¹æ³•ï¼Œç”¨æˆ·åˆå¹¶ä¸¤ä¸ªæˆ–è€…å¤šä¸ªæ•°ç»„ï¼Œä¸ä¼šæ”¹å˜ç°æœ‰æ•°ç»„ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªæ–°æ•°ç»„</span></span><br><span class="line"><span class="comment">//Array.prototype.slice() æ•°ç»„çš„ä¸€ä¸ªå†…ç½®æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œä¸ä¼šæ”¹å˜åŸæ•°ç»„ </span></span><br><span class="line"><span class="comment">//objå±•å¼€è¿ç®—ç¬¦ [...]</span></span><br><span class="line"><span class="comment">//ä»¥ä¸Šå‡ ç§æ–¹å¼ä¹Ÿå¯ä»¥</span></span><br></pre></td></tr></table></figure><h3 id="æ·±æ‹·è´"><a href="#æ·±æ‹·è´" class="headerlink" title="æ·±æ‹·è´"></a>æ·±æ‹·è´</h3> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> deepClone = (obj) =&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> result = <span class="built_in">Array</span>.isArray(obj) ? [] : &#123;&#125;;</span><br><span class="line">    <span class="keyword">for</span>( <span class="keyword">let</span> i <span class="keyword">in</span> obj )&#123;</span><br><span class="line">        <span class="keyword">if</span>( obj.hasOwnProperty(i) )&#123;</span><br><span class="line">            <span class="keyword">if</span>( <span class="keyword">typeof</span> obj[i] === <span class="string">'object'</span> &amp;&amp;  obj[i] !== <span class="literal">null</span>)&#123;</span><br><span class="line">                result[i] = deepClone(obj[i]) <span class="comment">//é€’å½’å¤åˆ¶</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                result[i] = obj[i]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//Objectçš„hasOwnProperty()æ–¹æ³•è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œåˆ¤æ–­å¯¹è±¡æ˜¯å¦åŒ…å«ç‰¹å®šçš„è‡ªèº«ï¼ˆéç»§æ‰¿ï¼‰å±æ€§ã€‚hasOwnProperty()æ–¹æ³•æ¥å¿½ç•¥ç»§æ‰¿å±æ€§</span></span><br></pre></td></tr></table></figure><p> JSON.stringfy()å’ŒJSON.parse()ä¼šå¿½ç•¥undefinedã€functionã€symbolï¼Œå¯¼è‡´å±æ€§ä¸¢å¤±ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> js </tag>
            
            <tag> å°æŠ€å·§ </tag>
            
            <tag> æ‹·è´ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å››ã€react &amp; html2canvas ç”Ÿæˆå›¾ç‰‡ä¸‹è½½å®è·µ</title>
      <link href="/2019/12/16/4.react%20&amp;%20html2canvas%E5%AE%9E%E8%B7%B5/"/>
      <url>/2019/12/16/4.react%20&amp;%20html2canvas%E5%AE%9E%E8%B7%B5/</url>
      
        <content type="html"><![CDATA[<h2 id="html2canvasçš„é€‰æ‹©"><a href="#html2canvasçš„é€‰æ‹©" class="headerlink" title="html2canvasçš„é€‰æ‹©"></a>html2canvasçš„é€‰æ‹©</h2><p>ç°åœ¨ä¸€èˆ¬ç”Ÿæˆå›¾ç‰‡æœ‰å‰ç«¯å¤„ç†å’Œåç«¯å¤„ç†ä¸¤ç§æ–¹å¼ï¼Œåç«¯ç”Ÿæˆçš„æ–¹æ¡ˆä¸éœ€è¦å‰ç«¯å‡ºåŠ›ï¼Œåªéœ€è¦æ‹¿è·¯å¾„æ¸²æŸ“ï¼Œä½†æ˜¯ä¼šå‡ºç°æ•°æ®å»¶æ—¶ï¼Œæ¨¡æ¿æ›´æ¢å›°éš¾ç­‰é—®é¢˜ï¼Œå‡ºäºçµæ´»æ€§å’Œå‡å°‘åç«¯å·¥ä½œé‡è€ƒè™‘ï¼Œæˆ‘ä»¬é‡‡å– html2canvas  ç»˜åˆ¶é¡µé¢ã€‚</p><p> <a href="https://www.npmjs.com/package/html2canvas" target="_blank" rel="external">html2canvas npm</a><br> <a href="http://html2canvas.hertzen.com/" target="_blank" rel="external">html2canvas ä»‹ç»</a></p> <a id="more"></a><h3 id="1-åœ¨reactä¸­çš„ä½¿ç”¨"><a href="#1-åœ¨reactä¸­çš„ä½¿ç”¨" class="headerlink" title="1.åœ¨reactä¸­çš„ä½¿ç”¨"></a>1.åœ¨reactä¸­çš„ä½¿ç”¨</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å®‰è£…</span></span><br><span class="line">npm install --save html2canvas</span><br><span class="line">or</span><br><span class="line">yarn add html2canvas</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¼•å…¥</span></span><br><span class="line"><span class="keyword">import</span> html2canvas <span class="keyword">from</span> <span class="string">'html2canvas'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä½¿ç”¨</span></span><br><span class="line">html2canvas(<span class="built_in">document</span>.body).then(<span class="function"><span class="keyword">function</span>(<span class="params">canvas</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">document</span>.body.appendChild(canvas);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¦‚æœæƒ³ç”Ÿæˆä¸€éƒ¨åˆ†é¡µé¢çš„è¯ï¼Œhtml2canvaså¯ä»¥æ¢æˆ this.refs.demo</span></span><br><span class="line"><span class="comment">//&lt;div ref="demo"&gt;&lt;/div&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢å°±ä¼šæŠŠé¡µé¢ç®€å•çš„ç»˜åˆ¶å‡ºæ¥ã€‚</p><h2 id="2-canvas-ä¸‹è½½"><a href="#2-canvas-ä¸‹è½½" class="headerlink" title="2.canvas ä¸‹è½½"></a>2.canvas ä¸‹è½½</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">html2canvas(<span class="keyword">this</span>.refs.demo).then(<span class="function"><span class="keyword">function</span>(<span class="params">canvas</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> imgUrl = canvas.toDataURL(<span class="string">"image/png"</span>); <span class="comment">// è·å–å›¾ç‰‡çš„url</span></span><br><span class="line">    <span class="keyword">const</span> elA = <span class="built_in">document</span>.createElement(<span class="string">"a"</span>);</span><br><span class="line">    elA.download = +<span class="keyword">new</span> <span class="built_in">Date</span>() + <span class="string">".png"</span>;</span><br><span class="line">    elA.href = imgUrl ;</span><br><span class="line">    elA.click();</span><br><span class="line">    elA.remove();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¾®ä¿¡ä¸­ä¸èƒ½ä¸‹è½½å›¾ç‰‡ï¼Œå¯ä»¥å±•ç¤ºå›¾ç‰‡å¹¶æç¤ºç”¨æˆ·é•¿æŒ‰ä¿å­˜å›¾ç‰‡</span></span><br></pre></td></tr></table></figure><h2 id="3-å‚è€ƒ"><a href="#3-å‚è€ƒ" class="headerlink" title="3.å‚è€ƒ"></a>3.å‚è€ƒ</h2><p> <a href="https://juejin.im/post/5df2e8ab6fb9a0163770816d" target="_blank" rel="external">å‚è€ƒ1</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> html2canvas </tag>
            
            <tag> js </tag>
            
            <tag> react </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸‰ã€ä¸€äº›è‡ªå·±åœ¨ä½¿ç”¨cssã€jsæŠ€å·§</title>
      <link href="/2019/12/12/3.%E4%B8%80%E4%BA%9B%E8%87%AA%E5%B7%B1%E5%9C%A8%E4%BD%BF%E7%94%A8css%E3%80%81js%E6%8A%80%E5%B7%A7/"/>
      <url>/2019/12/12/3.%E4%B8%80%E4%BA%9B%E8%87%AA%E5%B7%B1%E5%9C%A8%E4%BD%BF%E7%94%A8css%E3%80%81js%E6%8A%80%E5%B7%A7/</url>
      
        <content type="html"><![CDATA[<h2 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h2><a id="more"></a><p>1.çœç•¥ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å•è¡Œçœç•¥</span></span><br><span class="line">width: <span class="number">100</span>px;</span><br><span class="line">white-space: nowrap;</span><br><span class="line">text-overflow: ellipsis;</span><br><span class="line">overflow: hidden;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¤šè¡Œçœç•¥</span></span><br><span class="line">width: <span class="number">100</span>px;</span><br><span class="line">height:<span class="number">50</span>px;</span><br><span class="line">line-height: <span class="number">30</span>px;</span><br><span class="line">overflow: hidden;</span><br><span class="line">text-overflow: ellipsis;</span><br><span class="line">display: -webkit-box;</span><br><span class="line">-webkit-line-clamp: <span class="number">3</span>;  <span class="comment">//å—å…ƒç´ æ˜¾ç¤ºçš„æ–‡æœ¬çš„è¡Œæ•°ã€‚</span></span><br><span class="line">-webkit-box-orient: vertical;</span><br></pre></td></tr></table></figure><p>2.ä¸‹ç®­å¤´<br><img src="/images/two.png" alt></p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">width: 7px;</span><br><span class="line">height: 7px;</span><br><span class="line">border-bottom: 2px solid #bdbdbd;</span><br><span class="line">border-right: 2px solid #bdbdbd;</span><br><span class="line">transform: rotate(45deg);</span><br></pre></td></tr></table></figure><p>3.æ›´æ¢è°·æ­Œæ»šåŠ¨æ¡æ ·å¼ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">::-webkit-scrollbar-thumb&#123;&#125;    <span class="comment">//æ›´æ”¹è°·æ­Œæ»šåŠ¨æ¡æ ·å¼</span></span><br><span class="line">::-webkit-scrollbar&#123;&#125;   <span class="comment">//æ›´æ”¹è°·æ­Œæ»šåŠ¨æ¡èƒŒæ™¯æ ·å¼</span></span><br></pre></td></tr></table></figure><p>4.æ”¹å˜placeholderçš„é¢œè‰²</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">::-moz-placeholder &#123; color: #CDCDCD; &#125;</span><br><span class="line">::-webkit-input-placeholder &#123; color:#CDCDCD; &#125;</span><br><span class="line">:-ms-input-placeholder &#123; color:#CDCDCD; &#125;</span><br></pre></td></tr></table></figure><p>5.é˜´å½±ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//å·¦</span><br><span class="line">box-shadow: -7px 0 5px -5px #333;</span><br><span class="line">//å³</span><br><span class="line">box-shadow: 7px 0 5px -5px #333;</span><br><span class="line">//ä¸Š</span><br><span class="line">box-shadow: 0px -7px 5px -5px #333;</span><br><span class="line">//ä¸‹</span><br><span class="line">box-shadow: 0px 7px 5px -5px #333;</span><br></pre></td></tr></table></figure><p><img src="/images/three.png" alt></p><p>6.å•è¡Œæ–‡å­—å±…ä¸­ï¼Œå¤šè¡Œæ–‡å­—å±…å·¦</p><p>æ–¹æ³•1ï¼š(æ¨è)</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.text&#123;</span><br><span class="line">    display: flex;</span><br><span class="line">    justify-content: center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ–¹æ³•2ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.text&#123;</span><br><span class="line">    display: inline-block;</span><br><span class="line">    position: relative;</span><br><span class="line">    left: <span class="number">50</span>%;</span><br><span class="line">    transform: translateX(-<span class="number">50</span>%);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ–¹æ³•3ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// html</span></span><br><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"content"</span>&gt;</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="title">span</span> <span class="attribute">class</span>=<span class="value">"text"</span>&gt;</span>å•è¡Œæ–‡å­—å±…ä¸­ï¼Œå¤šè¡Œæ–‡å­—å±…å·¦ã€‚å•è¡Œæ–‡å­—å±…ä¸­ï¼Œå¤šè¡Œæ–‡å­—å±…å·¦ã€‚å•è¡Œæ–‡å­—å±…ä¸­ï¼Œå¤šè¡Œæ–‡å­—å±…å·¦ã€‚<span class="tag">&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">// css</span><br><span class="line">.content&#123;</span><br><span class="line">    text-align: center;</span><br><span class="line">&#125;</span><br><span class="line">.text&#123;</span><br><span class="line">    display: inline-block;</span><br><span class="line">    text-align: left;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// åŸç†</span><br><span class="line">//å¯¹äºä¸€ä¸ªå…ƒç´ ï¼Œå¦‚æœå…¶displayå±æ€§å€¼æ˜¯inline-blockï¼Œé‚£ä¹ˆå…¶å®½åº¦ç”±å†…éƒ¨å…ƒç´ å†³å®šï¼Œä½†æ°¸è¿œå°äºâ€œåŒ…å«å—â€å®¹å™¨çš„å°ºå¯¸ï¼Œä¹Ÿå°±æ˜¯â€œåŒ…è£¹æ€§ï¼ˆshrink-to-fitï¼‰â€</span></span><br></pre></td></tr></table></figure><ol start="7"><li>lesså®ç°loading</li></ol><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">.loader &#123;</span><br><span class="line">    position: relative;</span><br><span class="line">    transition: background-color .3s;</span><br><span class="line">    pointer-events: none; </span><br><span class="line">    &amp;:after &#123;</span><br><span class="line">        content: '';</span><br><span class="line">        position: absolute;</span><br><span class="line">        width: 20px;</span><br><span class="line">        height: 20px;</span><br><span class="line">        animation: loadingCircle infinite .75s linear;</span><br><span class="line">        border: 2px solid #888;</span><br><span class="line">        border-top-color: transparent;</span><br><span class="line">        border-radius: 50%;</span><br><span class="line">        z-index: 10;</span><br><span class="line">        top: 0;</span><br><span class="line">        bottom: 0;</span><br><span class="line">        left: 0;</span><br><span class="line">        right: 0;</span><br><span class="line">        margin: auto; </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">.hideLoader&#123;</span><br><span class="line">    display: none;</span><br><span class="line">&#125;</span><br><span class="line">@keyframes loadingCircle &#123;</span><br><span class="line">    0% &#123;</span><br><span class="line">        transform: rotate(0); </span><br><span class="line">    &#125;</span><br><span class="line">    100% &#123;</span><br><span class="line">        transform: rotate(360deg); </span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="8"><li><p>input åŠŸèƒ½</p><ul><li><p>å¼¹å‡ºæ•°å­—é”®ç›˜</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æœ‰"#" "*"ç¬¦å·è¾“å…¥ </span></span><br><span class="line">&lt;input type=<span class="string">"tel"</span> /&gt;</span><br><span class="line"><span class="comment">// çº¯æ•°å­— </span></span><br><span class="line">&lt;input pattern=<span class="string">"\d*"</span> /&gt;</span><br></pre></td></tr></table></figure></li><li><p>è°ƒç”¨ç³»ç»Ÿçš„æŸäº›åŠŸèƒ½</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// å¤šé€‰ </span><br><span class="line">&lt;input type="file" multiple /&gt;</span><br><span class="line">//  é€‰æ‹©è§†é¢‘æˆ–è€…æ‹æ‘„è§†é¢‘ </span><br><span class="line">&lt;input type="file" accept="video/*" /&gt;</span><br><span class="line">// é€‰æ‹©ç…§ç‰‡æˆ–è€…æ‹æ‘„ç…§ç‰‡</span><br><span class="line">&lt;input type="file" accept="image/*" /&gt;</span><br><span class="line">// é™„åŠ </span><br><span class="line">// å‘é€é‚®ä»¶</span><br><span class="line">&lt;a href="mailto:839626987@qq.com"&gt;å‘é‚®ä»¶ç»™ï¼š13116700755@163.com&lt;/a&gt;</span><br><span class="line">// å‘é€çŸ­ä¿¡ </span><br><span class="line">&lt;a href="sms:10086"&gt;å‘çŸ­ä¿¡ç»™: 10086&lt;/a&gt;</span><br><span class="line">// æ‹¨å·</span><br><span class="line">&lt;a href="tel:10086"&gt;æ‰“ç”µè¯ç»™: 10086&lt;/a&gt;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>flexå¸ƒå±€æœ€åä¸€è¡Œåˆ—è¡¨å·¦å¯¹é½çš„æ–¹æ³•</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">.container &#123;</span><br><span class="line">    display: flex;</span><br><span class="line">    justify-content: space-between;</span><br><span class="line">    flex-wrap: wrap;</span><br><span class="line">    .list &#123;</span><br><span class="line">        background-color: skyblue;</span><br><span class="line">        margin: <span class="number">10</span>px;</span><br><span class="line">    &#125;</span><br><span class="line">    &amp;::after &#123;</span><br><span class="line">        content: <span class="string">''</span>;</span><br><span class="line">        flex: auto;    <span class="comment">/* æˆ–è€…flex: 1 */</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h2 id="JS"><a href="#JS" class="headerlink" title="JS"></a>JS</h2><p>1.åˆ¤æ–­ val æ˜¯å¦å­˜åœ¨</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> item <span class="keyword">in</span> data)&#123;</span><br><span class="line">    <span class="keyword">if</span>(!data[item])&#123;</span><br><span class="line">        data[item] = <span class="string">'--'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2.ä¸Šä¼ å›¾ç‰‡å›å¡«</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reads = <span class="keyword">new</span> FileReader();</span><br><span class="line">reads.readAsDataURL(files);</span><br><span class="line">reads.onload = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'ID'</span>).src = <span class="keyword">this</span>.result;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>3.è·å–urlå‚æ•°</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getParams</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"(^|&amp;)"</span> + name + <span class="string">"=([^&amp;]*)(&amp;|$)"</span>);</span><br><span class="line">    <span class="keyword">let</span> r = <span class="built_in">window</span>.location.search.substr(<span class="number">1</span>).match(reg);</span><br><span class="line">    <span class="keyword">if</span> (r != <span class="literal">null</span>) <span class="keyword">return</span> <span class="built_in">unescape</span>(r[<span class="number">2</span>]); <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>4.æ›´æ”¹urlå‚æ•°</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">replaceParamVal</span>(<span class="params">paramName,replaceWith</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> oUrl = <span class="built_in">window</span>.location.href.toString();</span><br><span class="line">    <span class="keyword">var</span> re = evil(<span class="string">'/('</span>+ paramName+<span class="string">'=)([^&amp;]*)/gi'</span>);</span><br><span class="line">    <span class="keyword">var</span> nUrl = oUrl.replace(re,paramName+<span class="string">'='</span>+replaceWith);</span><br><span class="line">    <span class="keyword">this</span>.location = nUrl;</span><br><span class="line">    <span class="built_in">window</span>.location.href=nUrl</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">evil</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> Fn = <span class="built_in">Function</span>; <span class="comment">//ä¸€ä¸ªå˜é‡æŒ‡å‘Functionï¼Œé˜²æ­¢æœ‰äº›å‰ç«¯ç¼–è¯‘å·¥å…·æŠ¥é”™</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Fn(<span class="string">'return '</span> + fn)();</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>5.ios window.history.back() è‡´ä½¿ localStorageä¸åŒæ­¥</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onpageshow = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (event.persisted) &#123;</span><br><span class="line">        <span class="built_in">window</span>.location.reload();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>6.åˆ¤æ–­å¯¹è±¡æ˜¯å¦å­˜åœ¨</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> page = &#123;</span><br><span class="line">    user:<span class="string">'111'</span>,</span><br><span class="line">    cityInfo:&#123;</span><br><span class="line">        city:<span class="string">'hz'</span>,</span><br><span class="line">        code:<span class="string">'111'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> name = ( (page || &#123;&#125;).cityInfo || &#123;&#125; ).city || <span class="string">'111'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(name)</span><br></pre></td></tr></table></figure><p>7.textatea é«˜åº¦è‡ªé€‚åº”</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">//jq:</span><br><span class="line">el.on('input', function () &#123;</span><br><span class="line">    const height =  $(this).scrollTop() + $(this).prop("scrollHeight") + "px";</span><br><span class="line">    $(this).height(height)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">//react :</span><br><span class="line">const el = this.refs.remark;</span><br><span class="line">el.style.height = 'auto';  </span><br><span class="line">if(el.scrollHeight &gt;=el.offsetHeight)&#123;   #å¦‚æœé«˜åº¦ä¸å¤Ÿï¼Œå†é‡æ–°è®¾ç½®</span><br><span class="line">    el.style.height = el.scrollHeight + 'px'</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>8.æŸ¥æ‰¾é‡å¤å­—ç¬¦</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> red= <span class="string">'hjqjbsaxhhhh'</span>; </span><br><span class="line"><span class="keyword">let</span> obj = &#123;&#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i&lt;red.length; i++) &#123; </span><br><span class="line">    obj[red[i]] = ++obj[red[i]] || <span class="number">1</span> ;</span><br><span class="line">    <span class="built_in">console</span>.log(red[i]) </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>9.å®‰å“é”®ç›˜ç½®é¡¶æŒ‰é’®(å®‰å“ä¼šå‡ºç°é”®ç›˜å‡ºæ¥,æŒ‰é’®åœ¨ä¸‹é¢æ²¡ä¸Šæ¥çš„æƒ…å†µ)</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>  <span class="title">handleSetBtnPosition</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> win_h = $(<span class="built_in">window</span>).height();</span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">'resize'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> u = navigator.userAgent;</span><br><span class="line">        <span class="keyword">if</span> (u.indexOf(<span class="string">'Android'</span>) &gt; -<span class="number">1</span> || u.indexOf(<span class="string">'Linux'</span>) &gt; -<span class="number">1</span>) &#123;         </span><br><span class="line">            <span class="keyword">if</span>($(<span class="built_in">window</span>).height() &lt; win_h)&#123;</span><br><span class="line">                $(<span class="string">"#submit_btn"</span>).hide();</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                $(<span class="string">"#submit_btn"</span>).show();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="10"><li>è‡ªåŠ¨æ·»åŠ ç©ºæ ¼</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"13116700755"</span>.replace(<span class="regexp">/(?&lt;=^\d&#123;3&#125;(\d&#123;4&#125;)*)(?!$)/g</span>, <span class="string">' '</span>) ---&gt; <span class="string">"131 1670 0755"</span></span><br></pre></td></tr></table></figure><ol start="11"><li><p>è·å–keyå’Œvalï¼Œç»„æˆæ–°å¯¹è±¡</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> cities = [</span><br><span class="line">    &#123; name: <span class="string">'Paris'</span>, visited: <span class="string">'no'</span> &#125;,</span><br><span class="line">    &#123; name: <span class="string">'Lyon'</span>, visited: <span class="string">'no'</span> &#125;,</span><br><span class="line">    &#123; name: <span class="string">'Marseille'</span>, visited: <span class="string">'yes'</span> &#125;,</span><br><span class="line">    &#123; name: <span class="string">'Rome'</span>, visited: <span class="string">'yes'</span> &#125;,</span><br><span class="line">    &#123; name: <span class="string">'Milan'</span>, visited: <span class="string">'no'</span> &#125;,</span><br><span class="line">    &#123; name: <span class="string">'Palermo'</span>, visited: <span class="string">'yes'</span> &#125;,</span><br><span class="line">    &#123; name: <span class="string">'Genoa'</span>, visited: <span class="string">'yes'</span> &#125;,</span><br><span class="line">    &#123; name: <span class="string">'Berlin'</span>, visited: <span class="string">'no'</span> &#125;,</span><br><span class="line">    &#123; name: <span class="string">'Hamburg'</span>, visited: <span class="string">'yes'</span> &#125;,</span><br><span class="line">    &#123; name: <span class="string">'New York'</span>, visited: <span class="string">'yes'</span> &#125;</span><br><span class="line">];  </span><br><span class="line"><span class="keyword">const</span> result = cities.reduce((prv, item) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        ...prv,</span><br><span class="line">        [item.name]: item.visited</span><br><span class="line">    &#125;</span><br><span class="line">&#125;, &#123;&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(result);</span><br><span class="line"><span class="comment">/**</span><br><span class="line">    æ‰“å°ç»“æœï¼š</span><br><span class="line">    &#123;</span><br><span class="line">        Paris: "no",</span><br><span class="line">        Lyon: "no",</span><br><span class="line">        Marseille: "yes",</span><br><span class="line">        Rome: "yes",</span><br><span class="line">        Milan: "no",</span><br><span class="line">        Palermo: "yes",</span><br><span class="line">        Genoa: "yes",</span><br><span class="line">        Berlin: "no",</span><br><span class="line">        Hamburg: "yes",</span><br><span class="line">        New York: "yes"</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">**/</span></span><br></pre></td></tr></table></figure></li><li><p>æ¯«ç§’å€’è®¡æ—¶</p></li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> formatTime = (time) =&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> ms = (time % <span class="number">6000</span>) % <span class="number">10</span>;</span><br><span class="line">    </span><br><span class="line">    time = <span class="built_in">parseInt</span>(time / <span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line">    <span class="keyword">let</span> sec = time % <span class="number">60</span>;</span><br><span class="line">    <span class="keyword">let</span> hour = <span class="built_in">parseInt</span>(time / <span class="number">3600</span>, <span class="number">10</span>);</span><br><span class="line">    <span class="keyword">let</span> min = <span class="built_in">parseInt</span>((time - (hour * <span class="number">3600</span>)) / <span class="number">60</span>, <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">    hour =  hour &lt; <span class="number">10</span> ? (<span class="string">'0'</span> + hour) : hour;</span><br><span class="line">    min =  min &lt; <span class="number">10</span> ? (<span class="string">'0'</span> + min) : min;</span><br><span class="line">    sec = sec &lt; <span class="number">10</span> ? (<span class="string">'0'</span> + sec) : sec;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> hour + <span class="string">':'</span> + min + <span class="string">':'</span> + sec + <span class="string">'.'</span> + ms;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line">    let time = 100 * 10 ; // s</span><br><span class="line">    let timer = null;</span><br><span class="line">    timer = setInterval(() =&gt; &#123;</span><br><span class="line">        time = --time</span><br><span class="line">        if(time &gt; 0)&#123;</span><br><span class="line">            const date = formatTime(time)</span><br><span class="line">            $('.time').html(date)</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            clearInterval(timer)</span><br><span class="line">            $('.time').html('00')</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,100)</span><br><span class="line">**/</span></span><br></pre></td></tr></table></figure><ol start="13"><li>åˆ©ç”¨æ•°ç»„è·å–å½“å‰æ—¶é—´</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">const</span> showTime = () =&gt; &#123;</span><br><span class="line">      <span class="keyword">let</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line"><span class="keyword">let</span> h = date.getHours();</span><br><span class="line"><span class="keyword">let</span> m = date.getMinutes();</span><br><span class="line">      <span class="keyword">let</span> s = date.getSeconds();</span><br><span class="line">      <span class="keyword">let</span> arrTime = [ </span><br><span class="line">h &lt; <span class="number">10</span> ? <span class="number">0</span> : <span class="built_in">parseInt</span>( h/<span class="number">10</span> ), </span><br><span class="line">h % <span class="number">10</span>,</span><br><span class="line">m &lt; <span class="number">10</span> ? <span class="number">0</span> : <span class="built_in">parseInt</span>( m/<span class="number">10</span> ), </span><br><span class="line">m % <span class="number">10</span>,</span><br><span class="line">s &lt; <span class="number">10</span> ? <span class="number">0</span> : <span class="built_in">parseInt</span>( s/<span class="number">10</span> ), </span><br><span class="line">s % <span class="number">10</span>,</span><br><span class="line">      ];</span><br><span class="line">      <span class="keyword">return</span> arrTime; <span class="comment">// è¿”å›çš„æ˜¯æ—¶é—´æ•°ç»„ï¼Œä¾‹[ 1,2,0,0,0,0 ] å°±æ˜¯12:00:00</span></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> css </tag>
            
            <tag> js </tag>
            
            <tag> å°æŠ€å·§ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>äºŒã€vsCodeç»ˆç«¯æ‰“å¼€é—®é¢˜</title>
      <link href="/2019/12/09/2.vsCode%E7%BB%88%E7%AB%AF%E6%89%93%E5%BC%80%E9%97%AE%E9%A2%98/"/>
      <url>/2019/12/09/2.vsCode%E7%BB%88%E7%AB%AF%E6%89%93%E5%BC%80%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>ä¹‹å‰æ‰“å¼€vscodeæ—¶ï¼ŒæŠ¥ ç»ˆç«¯è¿›ç¨‹å‘½ä»¤â€/bin/bash -lâ€æ— æ³•å¯åŠ¨ (é€€å‡ºä»£ç : 1)ï¼›</p><p><img src="/images/one.png" alt></p><a id="more"></a><p>å…¶ä»–æŠ¥é”™ä¹Ÿå¯ä»¥å‚è€ƒä¸€ä¸‹ï¼š</p><h2 id="æœ‰ä»¥ä¸‹å‡ ä¸ªè§£å†³æ€è·¯"><a href="#æœ‰ä»¥ä¸‹å‡ ä¸ªè§£å†³æ€è·¯" class="headerlink" title="æœ‰ä»¥ä¸‹å‡ ä¸ªè§£å†³æ€è·¯"></a>æœ‰ä»¥ä¸‹å‡ ä¸ªè§£å†³æ€è·¯</h2><p>1.é‡è£…vscodeï¼›ï¼ˆæˆ‘æ˜¯è¿™ä¸ªæ–¹æ³•è§£å†³çš„ï¼‰</p><p>2.å› ä¸º VSCode å·¥ä½œåŒºçš„æ–‡ä»¶å¤¹æœ‰å˜æ›´ï¼ˆåˆ é™¤ã€ç§»åŠ¨ç­‰ï¼‰ï¼Œå¯¼è‡´ VSCode æ‰“å¼€ç»ˆç«¯æ—¶ï¼Œæ‰¾ä¸åˆ°æ­¤æ–‡ä»¶å¤¹è€ŒæŠ¥é”™ï¼›</p><p>3.é…ç½®ä¸‹ git è·¯å¾„ä¸å¯¹ï¼Œé‡æ–°é…ç½®ä¸€ä¸‹gitï¼›åœ¨è®¾ç½®é‡Œä¿®æ”¹ â€œterminal.integrated.shell.windowsâ€: â€œgitè·¯å¾„base.exeâ€ï¼›</p><p>4.ç”¨ç®¡ç†å‘˜çš„æƒé™æ¥æ‰§è¡Œvscodeï¼Œè¦ä¸ç„¶å®ƒæ²¡æœ‰æƒé™ä½¿ç”¨cmd;å³å‡»å¿«æ·é”®ç‚¹å‡»å±æ€§ç„¶åé€‰æ‹©ä»¥ç®¡ç†å‘˜çš„èº«ä»½è¿è¡Œ</p><ol start="5"><li><a href="https://github.com/Microsoft/vscode/issues/17450" target="_blank" rel="external">githubè§£å†³æ€è·¯</a></li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> vscode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸€ã€React å¤šé¡µé¢æ‰“åŒ…</title>
      <link href="/2019/12/06/1.react%20%E5%A4%9A%E9%A1%B5%E9%9D%A2%E6%89%93%E5%8C%85/"/>
      <url>/2019/12/06/1.react%20%E5%A4%9A%E9%A1%B5%E9%9D%A2%E6%89%93%E5%8C%85/</url>
      
        <content type="html"><![CDATA[<h2 id="ç¼˜ç”±"><a href="#ç¼˜ç”±" class="headerlink" title="ç¼˜ç”±"></a>ç¼˜ç”±</h2><p>ä¹‹å‰æˆ‘ä»¬ç”¨çš„æ˜¯reactå•é¡µé¢æ‰“åŒ…ï¼Œæ–¹ä¾¿æ˜¯æ–¹ä¾¿ï¼Œå¼€åŒ…å³ç”¨ã€‚ä½†æ˜¯å› ä¸ºæˆ‘ä»¬åšçš„æ˜¯æ´»åŠ¨é¡µé¢ï¼Œä¸€èˆ¬æ¯æ¬¡éƒ½åªæœ‰ä¸€ä¸ªé¡µé¢ï¼Œä¸ä»…è¦å»ºå¤§é‡çš„è·¯ç”±ï¼Œè€Œä¸”èµ„æºå†—æ‚ï¼Œå³ä½¿å·²ç»åšäº†èµ„æºåˆ†å‰²ã€‚è¿˜æœ‰åšå¤šé¡µé¢æœ€é‡è¦çš„åŸå› æ˜¯ï¼šå•é¡µé¢æ‰“åŒ…ï¼Œä¼šå½±å“æ‰€æœ‰çš„é¡µé¢ï¼Œå¦‚æœä¸€ä¸ªé¡µé¢æŠ¥é”™ï¼Œé‚£ä¹ˆå…¶ä»–çš„é¡µé¢ä¹Ÿæ— æ³•è®¿é—®ã€‚ä¸‹é¢å¼€å§‹é…ç½®:</p><h3 id="ä¸€-webpackåŠreactç‰ˆæœ¬"><a href="#ä¸€-webpackåŠreactç‰ˆæœ¬" class="headerlink" title="ä¸€.webpackåŠreactç‰ˆæœ¬"></a>ä¸€.webpackåŠreactç‰ˆæœ¬</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"webpack"</span>: <span class="string">"^4.19.1"</span>,</span><br><span class="line"><span class="string">"react"</span>: <span class="string">"^16.8.3"</span>,</span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="äºŒ-æ–‡ä»¶å¤¹åŸºæœ¬æ„é€ "><a href="#äºŒ-æ–‡ä»¶å¤¹åŸºæœ¬æ„é€ " class="headerlink" title="äºŒ.æ–‡ä»¶å¤¹åŸºæœ¬æ„é€ "></a>äºŒ.æ–‡ä»¶å¤¹åŸºæœ¬æ„é€ </h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">config </span><br><span class="line">    - path.js</span><br><span class="line">    - webpack.config.js</span><br><span class="line">public </span><br><span class="line">    - index.html</span><br><span class="line">src    </span><br><span class="line">    - page </span><br><span class="line">        - home </span><br><span class="line">            - component.js</span><br><span class="line">            - index.js </span><br><span class="line">            - index.less</span><br><span class="line">index.js <span class="comment">//å¿…ä¸å¯å°‘ï¼Œå¯ä»¥ä¸ºç©º</span></span><br></pre></td></tr></table></figure><!-- More info: [Generating](https://hexo.io/docs/generating.html) --><h3 id="1-pageä¸‹çš„index-js"><a href="#1-pageä¸‹çš„index-js" class="headerlink" title="1.pageä¸‹çš„index.js"></a>1.pageä¸‹çš„index.js</h3><p>homeæ˜¯ä¸€ä¸ªå•ç‹¬çš„é¡µé¢ï¼ŒåŒ…æ‹¬ </p><p>component.js:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Home</span> <span class="keyword">extends</span> <span class="title">Component</span></span>&#123;</span><br><span class="line">    constructor(props)&#123;</span><br><span class="line">        <span class="keyword">super</span>(props)</span><br><span class="line">        <span class="keyword">this</span>.state = &#123;</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    componentDidMount()&#123;&#125;</span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">return</span>(</span><br><span class="line">            <span class="xml"><span class="tag">&lt;<span class="title">div</span>&gt;</span></span><br><span class="line">                # ...</span><br><span class="line">            <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">        )</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Home;</span><br></pre></td></tr></table></figure><p>index.js:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'babel-polyfill'</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span>;</span><br><span class="line"><span class="keyword">import</span> Home <span class="keyword">from</span> <span class="string">'./component'</span>;</span><br><span class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="title">Home</span> /&gt;</span>, document.getElementById('root'));</span></span><br></pre></td></tr></table></figure><p>index.lessæ˜¯é¡µé¢ç›¸å…³çš„æ ·å¼</p><h3 id="2-configä¸‹çš„path-js"><a href="#2-configä¸‹çš„path-js" class="headerlink" title="2.configä¸‹çš„path.js"></a>2.configä¸‹çš„path.js</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å–page/*/ä¸‹çš„æ‰€æœ‰index</span></span><br><span class="line"><span class="keyword">const</span> globby = <span class="built_in">require</span>(<span class="string">'globby'</span>);</span><br><span class="line"><span class="keyword">const</span> entriesPath = globby.sync([resolveApp(<span class="string">'src/page'</span>) + <span class="string">'/*/index.js'</span>]);</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    ...</span><br><span class="line">    entriesPath</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸‹é¢è¿™é‡Œæ˜¯å…³é”®ï¼Œä¸œè¥¿æœ‰ç‚¹å¤šï¼Œé…é”™äº†å°±æ²¡æ•ˆæœäº†ï¼šâ¬‡ï¸</p><h3 id="3-configä¸‹çš„webpack-config-js"><a href="#3-configä¸‹çš„webpack-config-js" class="headerlink" title="3.configä¸‹çš„webpack.config.js"></a>3.configä¸‹çš„webpack.config.js</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">// è·å–æŒ‡å®šè·¯å¾„ä¸‹çš„å…¥å£æ–‡ä»¶</span><br><span class="line">function getEntries()&#123;</span><br><span class="line">    const entries = &#123;&#125;;</span><br><span class="line">    const files = paths.entriesPath;</span><br><span class="line">    files.forEach(filePath =&gt; &#123;</span><br><span class="line">        let tmp = filePath.split('/');</span><br><span class="line">        let name = tmp[tmp.length - 2];</span><br><span class="line">        entries[name] = [</span><br><span class="line">            require.resolve('react-dev-utils/webpackHotDevClient'),</span><br><span class="line">            filePath,</span><br><span class="line">        ];</span><br><span class="line">    &#125;);</span><br><span class="line">    return entries;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// å…¥å£æ–‡ä»¶å¯¹è±¡</span><br><span class="line">const entries = getEntries();</span><br><span class="line"></span><br><span class="line">// æœ‰å¤šå°‘ä¸ªé¡µé¢å°±new å¤šå°‘ä¸ªHtmlWebpackPlugin</span><br><span class="line">const htmlPlugin = Object.keys(entries).map(item =&gt; &#123;</span><br><span class="line">    return new HtmlWebpackPlugin(&#123;</span><br><span class="line">        inject: true,</span><br><span class="line">        template: paths.appHtml, # pulblic/index.html å…¬å…±htmlæ¨¡æ¿</span><br><span class="line">        filename:  item + '/' + item + '.html', # è¿™é‡Œæ˜¯å…³é”®,è®¿é—®å…¥å£ç”±è¿™é‡Œå†³å®š http://localhost:3000/home/home.html</span><br><span class="line">        chunks: [item]</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//æ›´æ¢å…¥å£</span><br><span class="line">entry: &#123;</span><br><span class="line">    # devtool: isEnvProduction</span><br><span class="line">    # ? shouldUseSourceMap</span><br><span class="line">    #     ? 'source-map'</span><br><span class="line">    #     : false</span><br><span class="line">    # : isEnvDevelopment &amp;&amp; 'eval-source-map',</span><br><span class="line">    entries</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// å‡ºå£ä¹Ÿé¡ºä¾¿æ›´æ”¹ä¸€ä¸‹</span><br><span class="line">output:&#123;</span><br><span class="line">    #æŠŠå¯¹åº”èµ„æºæ”¾åˆ°å¯¹åº”é¡µé¢ä¸‹é¢,è¿™é‡Œ[name] å°±æ˜¯home</span><br><span class="line">    #isEnvDevelopment å¯¹åº”çš„å†…å®¹ä¸€å®šè¦é…ï¼Œä¸ç„¶æœ¬åœ°å¼€å‘åªèƒ½æ‰¾åˆ°ä¸€ä¸ªé¡µé¢</span><br><span class="line">    #version æ˜¯æ—¶é—´æˆ³ const version = +new Date();</span><br><span class="line">    filename: isEnvProduction</span><br><span class="line">    ?    '[name]/static/js/[name].[chunkhash:8].'+version+'.js'</span><br><span class="line">    : isEnvDevelopment &amp;&amp; '[name]/static/js/bundle.js',</span><br><span class="line"></span><br><span class="line">    chunkFilename: isEnvProduction</span><br><span class="line">    ?    '[name]/static/js/[name].[chunkhash:8].'+version+'.chunk.js'</span><br><span class="line">    : isEnvDevelopment &amp;&amp; '[name]/static/js/[name].chunk.'+version+'.js',</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//ä¸Šé¢æ˜¯jsï¼Œcssä¹Ÿæ”¹ä¸€ä¸‹ï¼Œå…¨å±€æœç´¢ MiniCssExtractPlugin</span><br><span class="line">new MiniCssExtractPlugin(&#123;</span><br><span class="line">    // Options similar to the same options in webpackOptions.output</span><br><span class="line">    // both options are optional</span><br><span class="line">    filename:   '[name]/static/css/[name].[contenthash:8].'+version+'.css',</span><br><span class="line">    chunkFilename:  '[name]/static/css/[name].[contenthash:8].chunk.'+version+'.css',</span><br><span class="line">&#125;),</span><br><span class="line"></span><br><span class="line">// å›¾ç‰‡èµ„æº å…¨å±€æœç´¢ .png ,å›¾ç‰‡æ˜¯ç‹¬ç«‹çš„</span><br><span class="line">&#123;</span><br><span class="line">    test: [/\.bmp$/, /\.gif$/, /\.jpe?g$/, /\.png$/],</span><br><span class="line">    loader: require.resolve('url-loader')  ,</span><br><span class="line">    options: &#123;</span><br><span class="line">    limit: 10000,</span><br><span class="line">    name: 'static/media/[name].[hash:8].'+version+'.[ext]',</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h3 id="4-æ‰“åŒ…æ•ˆæœ"><a href="#4-æ‰“åŒ…æ•ˆæœ" class="headerlink" title="4.æ‰“åŒ…æ•ˆæœ"></a>4.æ‰“åŒ…æ•ˆæœ</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">dist</span><br><span class="line">   - 1  // æ‰“åŒ…å‡ºçš„å…¬å…±çš„jsæ–‡ä»¶</span><br><span class="line">   - 2  // æ‰“åŒ…å‡ºçš„å…¬å…±çš„jsæ–‡ä»¶</span><br><span class="line">   - assets #æœ¬åœ°é™æ€èµ„æº</span><br><span class="line">   - static #æ‰“åŒ…çš„é™æ€å›¾ç‰‡èµ„æº</span><br><span class="line">       - media</span><br><span class="line">           - xxxx.png</span><br><span class="line">   - home</span><br><span class="line">       - home.html</span><br><span class="line">       - static</span><br><span class="line">           - css</span><br><span class="line">             - xxx.css</span><br><span class="line">           - js</span><br><span class="line">             - xxx.js</span><br><span class="line">    xxx</span><br></pre></td></tr></table></figure><p>å¦‚æœå¤šä¸ªé¡µé¢çš„è¯ï¼Œå…¶ä»–é¡µé¢æ•ˆæœå’Œhomeæ–‡ä»¶ä¸€æ ·ã€‚</p><h3 id="4-æœ€åä¸€ç‚¹"><a href="#4-æœ€åä¸€ç‚¹" class="headerlink" title="4.æœ€åä¸€ç‚¹"></a>4.æœ€åä¸€ç‚¹</h3><p>æ‰“å®ŒåŒ…ï¼Œå¯èƒ½ä¼šå‡ºç°èµ„æºè®¿é—®ä¸åˆ°ï¼Œåœ¨ package.json é…ç½®ä¸€ä¸‹homepage</p><p>(1).æˆ‘çš„æ˜¯ä¸‹é¢ï¼Œæ ¹æ®é¡¹ç›®è·¯å¾„æ¥å†™ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"homepage"</span>: <span class="string">"../"</span>,</span><br></pre></td></tr></table></figure><p>é¡ºä¾¿æä¸€ä¸‹ï¼Œæœ¬åœ°è·¨åŸŸï¼ŒåŒæ ·åœ¨ package.json é…ç½®ä¸€ä¸‹ proxyå°±å¯ä»¥äº†ï¼š</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"proxy"</span>: <span class="string">"åŸŸå"</span>,</span><br></pre></td></tr></table></figure><p>æ‰“å®ŒåŒ…ä¹‹åï¼Œæ”¾åˆ°æœåŠ¡å™¨ä¸Šï¼Œè·³è½¬è®¿é—®è·¯å¾„ä¹Ÿè¦é…ç½®çš„</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="comment">//æ¯”å¦‚æœ¬åœ° </span></span><br><span class="line">http:<span class="comment">//localhost:3000/home/home.html;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//çº¿ä¸Š:</span></span><br><span class="line">https:www.baidu.com/dist/demo/home/home.html</span><br><span class="line"></span><br><span class="line"><span class="comment">//é‚£ä¹ˆå½“ä½ è·³è½¬é“¾æ¥çš„æ—¶å€™ï¼Œå°±è¦è¿™æ ·ï¼š</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//è·³è½¬</span></span><br><span class="line"><span class="keyword">const</span> param = <span class="built_in">window</span>.location.href.includes(<span class="string">'baidu'</span>) ? <span class="string">'/dist/demo'</span> : <span class="string">''</span>;</span><br><span class="line"><span class="built_in">window</span>.location.href = param + <span class="string">'/home/home.html'</span>;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> js </tag>
            
            <tag> react </tag>
            
            <tag> webpack </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
