---
title: 十七、四种常见的设计模式
date: 2020-2-10
tags:
  - 设计模式
---

 ## 设计模式

 <!-- more -->

### 1.工厂模式

- 简单的工厂模式可以理解为解决多个相似的问题;
```javascript
    function CreatePerson(name,age,sex) {
        let obj = new Object();
        obj.name = name;
        obj.age = age;
        obj.sex = sex;
        obj.sayName = function(){
            return this.name;
        }
        return obj;
    }
    let p1 = new CreatePerson("longen",'28','男');
    let p2 = new CreatePerson("tugenhua",'27','女');
    console.log(p1.name); // longen
    console.log(p1.age);  // 28
    console.log(p1.sex);  // 男
    console.log(p1.sayName()); // longen

    console.log(p2.name);  // tugenhua
    console.log(p2.age);   // 27
    console.log(p2.sex);   // 女
    console.log(p2.sayName()); // tugenhua 
```
### 2.单例模式

- 只能被实例化(构造函数给实例添加属性与方法)一次;
```javascript
    // 单体模式
    let Singleton = function(name){
        this.name = name;
    };
    Singleton.prototype.getName = function(){
        return this.name;
    }
    // 获取实例对象
    let getInstance = (function() {
        let instance = null;
        return function(name) {
            if(!instance) {//相当于一个一次性阀门,只能实例化一次
                instance = new Singleton(name);
            }
            return instance;
        }
    })();
    // 测试单体模式的实例,所以a===b
    let a = getInstance("aa");
    let b = getInstance("bb");
```
### 3.沙箱模式

- 只能被实例化(构造函数给实例添加属性与方法)一次;
```javascript
   let sandboxModel=(function(){
        function sayName(){};
        function sayAge(){};
        return{
            sayName:sayName,
            sayAge:sayAge
        }
    })()
```
### 4.发布者订阅模式

- 例如如我们关注了某一个公众号,然后他对应的有新的消息就会给你推送;
```javascript

    const EventEmit = function (){
        this.event = {}; // 定义发布者
        this.event['list'] = [];
        this.listen = function(fn) {
            this.event['list'].push(fn); // 订阅消息添加到缓存列表
        }
        this.trigger = function (){
            this.event['list'].forEach(eventListener => {
                eventListener(...arguments);
            });
        }
    }

    const emit = new EventEmit();

    emit.listen(function(color, size) {
        console.log("颜色是：" + color);
        console.log("尺码是：" + size);
    })

    emit.trigger("红色", 40);
   
```
