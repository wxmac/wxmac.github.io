{"meta":{"title":"wxmacçš„å‰ç«¯ç¬”è®°","subtitle":"è®°å½•è‡ªå·±çš„ä»£ç ç‚¹æ»´ -- ä¹å±‚ä¹‹å°ï¼Œèµ·äºç´¯åœŸ","description":"","author":"wxmac","url":"https://wxmac.github.io","root":"/"},"pages":[{"title":"404 Not Found","date":"2019-12-19T02:14:29.205Z","updated":"2019-12-19T02:14:29.204Z","comments":true,"path":"404.html","permalink":"https://wxmac.github.io/404.html","excerpt":"","text":"404 Not Found **å¾ˆæŠ±æ­‰ï¼Œæ‚¨è®¿é—®çš„é¡µé¢ä¸å­˜åœ¨** å¯èƒ½æ˜¯è¾“å…¥åœ°å€æœ‰è¯¯æˆ–è¯¥åœ°å€å·²è¢«åˆ é™¤"},{"title":"æ‰€æœ‰æ ‡ç­¾","date":"2019-12-19T02:08:57.392Z","updated":"2019-12-19T02:08:57.392Z","comments":true,"path":"tags/index.html","permalink":"https://wxmac.github.io/tags/index.html","excerpt":"","text":""},{"title":"","date":"2020-01-07T03:35:06.484Z","updated":"2020-01-07T03:35:06.484Z","comments":true,"path":"js/love.js","permalink":"https://wxmac.github.io/js/love.js","excerpt":"","text":"!function(e,t,a){function n(){c(\".heart{width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);}.heart:after,.heart:before{content: '';width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 500%;-moz-border-radius: 50%;position: fixed;}.heart:after{top: -5px;}.heart:before{left: -5px;}\"),o(),r()}function r(){for(var e=0;e"},{"title":"","date":"2019-12-24T09:33:53.764Z","updated":"2019-12-24T09:33:53.762Z","comments":true,"path":"js/jquery.js","permalink":"https://wxmac.github.io/js/jquery.js","excerpt":"","text":"/*! jQuery v3.3.1 | (c) JS Foundation and other contributors | jquery.org/license */ !function(e,t){\"use strict\";\"object\"==typeof module&&\"object\"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error(\"jQuery requires a window with a document\");return t(e)}:t(e)}(\"undefined\"!=typeof window?window:this,function(e,t){\"use strict\";var n=[],r=e.document,i=Object.getPrototypeOf,o=n.slice,a=n.concat,s=n.push,u=n.indexOf,l={},c=l.toString,f=l.hasOwnProperty,p=f.toString,d=p.call(Object),h={},g=function e(t){return\"function\"==typeof t&&\"number\"!=typeof t.nodeType},y=function e(t){return null!=t&&t===t.window},v={type:!0,src:!0,noModule:!0};function m(e,t,n){var i,o=(t=t||r).createElement(\"script\");if(o.text=e,n)for(i in v)n[i]&&(o[i]=n[i]);t.head.appendChild(o).parentNode.removeChild(o)}function x(e){return null==e?e+\"\":\"object\"==typeof e||\"function\"==typeof e?l[c.call(e)]||\"object\":typeof e}var b=\"3.3.1\",w=function(e,t){return new w.fn.init(e,t)},T=/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g;w.fn=w.prototype={jquery:\"3.3.1\",constructor:w,length:0,toArray:function(){return o.call(this)},get:function(e){return null==e?o.call(this):e=0&&n10|55296,1023&r|56320)},te=/([\\0-\\x1f\\x7f]|^-?\\d)|^-$|[^\\0-\\x1f\\x7f-\\uFFFF\\w-]/g,ne=function(e,t){return t?\"\\0\"===e?\"\\ufffd\":e.slice(0,-1)+\"\\\\\"+e.charCodeAt(e.length-1).toString(16)+\" \":\"\\\\\"+e},re=function(){p()},ie=me(function(e){return!0===e.disabled&&(\"form\"in e||\"label\"in e)},{dir:\"parentNode\",next:\"legend\"});try{L.apply(A=H.call(w.childNodes),w.childNodes),A[w.childNodes.length].nodeType}catch(e){L={apply:A.length?function(e,t){q.apply(e,H.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function oe(e,t,r,i){var o,s,l,c,f,h,v,m=t&&t.ownerDocument,T=t?t.nodeType:9;if(r=r||[],\"string\"!=typeof e||!e||1!==T&&9!==T&&11!==T)return r;if(!i&&((t?t.ownerDocument||t:w)!==d&&p(t),t=t||d,g)){if(11!==T&&(f=J.exec(e)))if(o=f[1]){if(9===T){if(!(l=t.getElementById(o)))return r;if(l.id===o)return r.push(l),r}else if(m&&(l=m.getElementById(o))&&x(t,l)&&l.id===o)return r.push(l),r}else{if(f[2])return L.apply(r,t.getElementsByTagName(e)),r;if((o=f[3])&&n.getElementsByClassName&&t.getElementsByClassName)return L.apply(r,t.getElementsByClassName(o)),r}if(n.qsa&&!S[e+\" \"]&&(!y||!y.test(e))){if(1!==T)m=t,v=e;else if(\"object\"!==t.nodeName.toLowerCase()){(c=t.getAttribute(\"id\"))?c=c.replace(te,ne):t.setAttribute(\"id\",c=b),s=(h=a(e)).length;while(s--)h[s]=\"#\"+c+\" \"+ve(h[s]);v=h.join(\",\"),m=K.test(e)&&ge(t.parentNode)||t}if(v)try{return L.apply(r,m.querySelectorAll(v)),r}catch(e){}finally{c===b&&t.removeAttribute(\"id\")}}}return u(e.replace(B,\"$1\"),t,r,i)}function ae(){var e=[];function t(n,i){return e.push(n+\" \")>r.cacheLength&&delete t[e.shift()],t[n+\" \"]=i}return t}function se(e){return e[b]=!0,e}function ue(e){var t=d.createElement(\"fieldset\");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function le(e,t){var n=e.split(\"|\"),i=n.length;while(i--)r.attrHandle[n[i]]=t}function ce(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function fe(e){return function(t){return\"input\"===t.nodeName.toLowerCase()&&t.type===e}}function pe(e){return function(t){var n=t.nodeName.toLowerCase();return(\"input\"===n||\"button\"===n)&&t.type===e}}function de(e){return function(t){return\"form\"in t?t.parentNode&&!1===t.disabled?\"label\"in t?\"label\"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ie(t)===e:t.disabled===e:\"label\"in t&&t.disabled===e}}function he(e){return se(function(t){return t=+t,se(function(n,r){var i,o=e([],n.length,t),a=o.length;while(a--)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function ge(e){return e&&\"undefined\"!=typeof e.getElementsByTagName&&e}n=oe.support={},o=oe.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&\"HTML\"!==t.nodeName},p=oe.setDocument=function(e){var t,i,a=e?e.ownerDocument||e:w;return a!==d&&9===a.nodeType&&a.documentElement?(d=a,h=d.documentElement,g=!o(d),w!==d&&(i=d.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener(\"unload\",re,!1):i.attachEvent&&i.attachEvent(\"onunload\",re)),n.attributes=ue(function(e){return e.className=\"i\",!e.getAttribute(\"className\")}),n.getElementsByTagName=ue(function(e){return e.appendChild(d.createComment(\"\")),!e.getElementsByTagName(\"*\").length}),n.getElementsByClassName=Q.test(d.getElementsByClassName),n.getById=ue(function(e){return h.appendChild(e).id=b,!d.getElementsByName||!d.getElementsByName(b).length}),n.getById?(r.filter.ID=function(e){var t=e.replace(Z,ee);return function(e){return e.getAttribute(\"id\")===t}},r.find.ID=function(e,t){if(\"undefined\"!=typeof t.getElementById&&g){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(Z,ee);return function(e){var n=\"undefined\"!=typeof e.getAttributeNode&&e.getAttributeNode(\"id\");return n&&n.value===t}},r.find.ID=function(e,t){if(\"undefined\"!=typeof t.getElementById&&g){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode(\"id\"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode(\"id\"))&&n.value===e)return[o]}return[]}}),r.find.TAG=n.getElementsByTagName?function(e,t){return\"undefined\"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if(\"*\"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},r.find.CLASS=n.getElementsByClassName&&function(e,t){if(\"undefined\"!=typeof t.getElementsByClassName&&g)return t.getElementsByClassName(e)},v=[],y=[],(n.qsa=Q.test(d.querySelectorAll))&&(ue(function(e){h.appendChild(e).innerHTML=\"\",e.querySelectorAll(\"[msallowcapture^='']\").length&&y.push(\"[*^$]=\"+M+\"*(?:''|\\\"\\\")\"),e.querySelectorAll(\"[selected]\").length||y.push(\"\\\\[\"+M+\"*(?:value|\"+P+\")\"),e.querySelectorAll(\"[id~=\"+b+\"-]\").length||y.push(\"~=\"),e.querySelectorAll(\":checked\").length||y.push(\":checked\"),e.querySelectorAll(\"a#\"+b+\"+*\").length||y.push(\".#.+[+~]\")}),ue(function(e){e.innerHTML=\"\";var t=d.createElement(\"input\");t.setAttribute(\"type\",\"hidden\"),e.appendChild(t).setAttribute(\"name\",\"D\"),e.querySelectorAll(\"[name=d]\").length&&y.push(\"name\"+M+\"*[*^$|!~]?=\"),2!==e.querySelectorAll(\":enabled\").length&&y.push(\":enabled\",\":disabled\"),h.appendChild(e).disabled=!0,2!==e.querySelectorAll(\":disabled\").length&&y.push(\":enabled\",\":disabled\"),e.querySelectorAll(\"*,:x\"),y.push(\",.*:\")})),(n.matchesSelector=Q.test(m=h.matches||h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&ue(function(e){n.disconnectedMatch=m.call(e,\"*\"),m.call(e,\"[s!='']:x\"),v.push(\"!=\",W)}),y=y.length&&new RegExp(y.join(\"|\")),v=v.length&&new RegExp(v.join(\"|\")),t=Q.test(h.compareDocumentPosition),x=t||Q.test(h.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},D=t?function(e,t){if(e===t)return f=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===d||e.ownerDocument===w&&x(w,e)?-1:t===d||t.ownerDocument===w&&x(w,t)?1:c?O(c,e)-O(c,t):0:4&r?-1:1)}:function(e,t){if(e===t)return f=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e===d?-1:t===d?1:i?-1:o?1:c?O(c,e)-O(c,t):0;if(i===o)return ce(e,t);n=e;while(n=n.parentNode)a.unshift(n);n=t;while(n=n.parentNode)s.unshift(n);while(a[r]===s[r])r++;return r?ce(a[r],s[r]):a[r]===w?-1:s[r]===w?1:0},d):d},oe.matches=function(e,t){return oe(e,null,null,t)},oe.matchesSelector=function(e,t){if((e.ownerDocument||e)!==d&&p(e),t=t.replace(z,\"='$1']\"),n.matchesSelector&&g&&!S[t+\" \"]&&(!v||!v.test(t))&&(!y||!y.test(t)))try{var r=m.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return oe(t,d,null,[e]).length>0},oe.contains=function(e,t){return(e.ownerDocument||e)!==d&&p(e),x(e,t)},oe.attr=function(e,t){(e.ownerDocument||e)!==d&&p(e);var i=r.attrHandle[t.toLowerCase()],o=i&&N.call(r.attrHandle,t.toLowerCase())?i(e,t,!g):void 0;return void 0!==o?o:n.attributes||!g?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},oe.escape=function(e){return(e+\"\").replace(te,ne)},oe.error=function(e){throw new Error(\"Syntax error, unrecognized expression: \"+e)},oe.uniqueSort=function(e){var t,r=[],i=0,o=0;if(f=!n.detectDuplicates,c=!n.sortStable&&e.slice(0),e.sort(D),f){while(t=e[o++])t===e[o]&&(i=r.push(o));while(i--)e.splice(r[i],1)}return c=null,e},i=oe.getText=function(e){var t,n=\"\",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if(\"string\"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===o||4===o)return e.nodeValue}else while(t=e[r++])n+=i(t);return n},(r=oe.selectors={cacheLength:50,createPseudo:se,match:V,attrHandle:{},find:{},relative:{\">\":{dir:\"parentNode\",first:!0},\" \":{dir:\"parentNode\"},\"+\":{dir:\"previousSibling\",first:!0},\"~\":{dir:\"previousSibling\"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Z,ee),e[3]=(e[3]||e[4]||e[5]||\"\").replace(Z,ee),\"~=\"===e[2]&&(e[3]=\" \"+e[3]+\" \"),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),\"nth\"===e[1].slice(0,3)?(e[3]||oe.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(\"even\"===e[3]||\"odd\"===e[3])),e[5]=+(e[7]+e[8]||\"odd\"===e[3])):e[3]&&oe.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return V.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||\"\":n&&X.test(n)&&(t=a(n,!0))&&(t=n.indexOf(\")\",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Z,ee).toLowerCase();return\"*\"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=E[e+\" \"];return t||(t=new RegExp(\"(^|\"+M+\")\"+e+\"(\"+M+\"|$)\"))&&E(e,function(e){return t.test(\"string\"==typeof e.className&&e.className||\"undefined\"!=typeof e.getAttribute&&e.getAttribute(\"class\")||\"\")})},ATTR:function(e,t,n){return function(r){var i=oe.attr(r,e);return null==i?\"!=\"===t:!t||(i+=\"\",\"=\"===t?i===n:\"!=\"===t?i!==n:\"^=\"===t?n&&0===i.indexOf(n):\"*=\"===t?n&&i.indexOf(n)>-1:\"$=\"===t?n&&i.slice(-n.length)===n:\"~=\"===t?(\" \"+i.replace($,\" \")+\" \").indexOf(n)>-1:\"|=\"===t&&(i===n||i.slice(0,n.length+1)===n+\"-\"))}},CHILD:function(e,t,n,r,i){var o=\"nth\"!==e.slice(0,3),a=\"last\"!==e.slice(-4),s=\"of-type\"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,f,p,d,h,g=o!==a?\"nextSibling\":\"previousSibling\",y=t.parentNode,v=s&&t.nodeName.toLowerCase(),m=!u&&!s,x=!1;if(y){if(o){while(g){p=t;while(p=p[g])if(s?p.nodeName.toLowerCase()===v:1===p.nodeType)return!1;h=g=\"only\"===e&&!h&&\"nextSibling\"}return!0}if(h=[a?y.firstChild:y.lastChild],a&&m){x=(d=(l=(c=(f=(p=y)[b]||(p[b]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]||[])[0]===T&&l[1])&&l[2],p=d&&y.childNodes[d];while(p=++d&&p&&p[g]||(x=d=0)||h.pop())if(1===p.nodeType&&++x&&p===t){c[e]=[T,d,x];break}}else if(m&&(x=d=(l=(c=(f=(p=t)[b]||(p[b]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]||[])[0]===T&&l[1]),!1===x)while(p=++d&&p&&p[g]||(x=d=0)||h.pop())if((s?p.nodeName.toLowerCase()===v:1===p.nodeType)&&++x&&(m&&((c=(f=p[b]||(p[b]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]=[T,x]),p===t))break;return(x-=i)===r||x%r==0&&x/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||oe.error(\"unsupported pseudo: \"+e);return i[b]?i(t):i.length>1?(n=[e,e,\"\",t],r.setFilters.hasOwnProperty(e.toLowerCase())?se(function(e,n){var r,o=i(e,t),a=o.length;while(a--)e[r=O(e,o[a])]=!(n[r]=o[a])}):function(e){return i(e,0,n)}):i}},pseudos:{not:se(function(e){var t=[],n=[],r=s(e.replace(B,\"$1\"));return r[b]?se(function(e,t,n,i){var o,a=r(e,null,i,[]),s=e.length;while(s--)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}}),has:se(function(e){return function(t){return oe(e,t).length>0}}),contains:se(function(e){return e=e.replace(Z,ee),function(t){return(t.textContent||t.innerText||i(t)).indexOf(e)>-1}}),lang:se(function(e){return U.test(e||\"\")||oe.error(\"unsupported lang: \"+e),e=e.replace(Z,ee).toLowerCase(),function(t){var n;do{if(n=g?t.lang:t.getAttribute(\"xml:lang\")||t.getAttribute(\"lang\"))return(n=n.toLowerCase())===e||0===n.indexOf(e+\"-\")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:de(!1),disabled:de(!0),checked:function(e){var t=e.nodeName.toLowerCase();return\"input\"===t&&!!e.checked||\"option\"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType"},{"title":"æ‰€æœ‰åˆ†ç±»","date":"2019-12-19T02:12:02.734Z","updated":"2019-12-19T02:12:02.734Z","comments":true,"path":"categories/index.html","permalink":"https://wxmac.github.io/categories/index.html","excerpt":"","text":""}],"posts":[{"title":"äºŒåã€ç–‘éš¾é—®é¢˜å½’çº³","slug":"20.ç–‘éš¾é—®é¢˜å½’çº³","date":"2020-02-29T16:00:00.000Z","updated":"2020-03-11T01:05:59.991Z","comments":true,"path":"2020/03/01/20.ç–‘éš¾é—®é¢˜å½’çº³/","link":"","permalink":"https://wxmac.github.io/2020/03/01/20.ç–‘éš¾é—®é¢˜å½’çº³/","excerpt":"ç–‘éš¾é—®é¢˜å½’çº³ â€“ æ›´æ–°ä¸­","text":"ç–‘éš¾é—®é¢˜å½’çº³ â€“ æ›´æ–°ä¸­ ä¸€.åŒiframeé—®é¢˜ æœ€è¿‘é‡åˆ°ä¸€ä¸ªéœ€æ±‚ï¼Œç‚¹å‡»titleï¼Œåˆ‡æ¢é¡µé¢ï¼Œä½†æ˜¯ç¬¬ä¸€ä¸ªtitleæ˜¯å·²æœ‰é¡µé¢ï¼Œç¬¬äºŒä¸ªæ˜¯æ–°å†™çš„ï¼Œäºæ˜¯æƒ³åˆ°äº†iframeã€‚å†™äº†ä¸¤ä¸ªiframeï¼Œå¯¹åº”ä¸‹é¢çš„çš„å†™æ³•ï¼Œç‚¹å‡»titleï¼Œæ˜¾ç¤ºå¯¹åº”çš„é¡µé¢ï¼Œä¸€åˆ‡éƒ½å¾ˆå®Œç¾ã€‚ 12345678&lt;div className=&#123; `$&#123;welfaretitleIndex == 0 ? styleCss.welafreMain : ''&#125;` &#125;&gt; &lt;iframe className=&#123; styleCss.welfare_iframe &#125; title=\"1\" src=&#123; urlOne &#125; frameBorder=\"0\"&gt; &lt;/iframe&gt;&lt;/div&gt;&lt;div className=&#123; `$&#123; styleCss.blobkWelafreMain &#125; $&#123;welfaretitleIndex == 1 ? styleCss.welafreMain : ''&#125;` &#125;&gt; &lt;iframe className=&#123; styleCss.welfare_iframe &#125; title=\"2\" src=&#123; urlTwo &#125; frameBorder=\"0\"&gt; &lt;/iframe&gt;&lt;/div&gt; ä½†æ˜¯åœ¨iosçœŸæœºä¸­ï¼Œç¬¬ä¸€ä¸ªå·²æœ‰é¡µé¢æ²¡é—®é¢˜ï¼Œå½“åˆ‡æ¢åˆ°ç¬¬äºŒä¸ªé¡µé¢çš„æ—¶å€™ï¼Œåªå‰©titleäº†ï¼Œé¡µé¢æ­»æ´»æ˜¾ç¤ºä¸å‡ºæ¥ï¼Œå•ç‹¬æ‰“å¼€ç¬¬äºŒä¸ªé¡µé¢ä¹Ÿæ˜¯æ²¡é—®é¢˜çš„ã€‚æ‰¾ä¸åˆ°åŸå› ï¼Œåªèƒ½ä¿®æ”¹æˆç‚¹å‡»titleåˆ‡æ¢iframeçš„urlé“¾æ¥ï¼Œå°±æ²¡é—®é¢˜äº†ã€‚ 1234&lt;div className=&#123; `$&#123; styleCss.blobkWelafreMain &#125; $&#123;welfaretitleIndex == 1 ? styleCss.welafreMain : ''&#125;` &#125;&gt; &lt;iframe ref=\"ifm\" className=&#123; styleCss.welfare_iframe &#125; title=\"1\" src=&#123; this.url &#125; frameBorder=\"0\"&gt; &lt;/iframe&gt; &lt;/div&gt; äºŒ.reactç™½å±é—®é¢˜ æ–°é¡¹ç›®æ˜¯æˆ‘ç”¨reacté‡æ„çš„ï¼Œåˆšå¼€å§‹å¾ˆå¥½ï¼Œæ²¡å‡ºç°é—®é¢˜ã€‚åæ¥è¿è¥é›†ä¸­åé¦ˆï¼Œvivoã€oppoæ‰‹æœºåœ¨appä¸­æ‰“å¼€æ´»åŠ¨é¡µé¢å‡ºç°ç™½å±ï¼Œä½†æ˜¯å¾ˆéš¾å¤ç°ã€‚åªèƒ½å»é—®åº¦å¨˜äº†ã€‚ è§£å†³æ–¹æ³•ä¸€ï¼š ç»™æ‰“åŒ…çš„èµ„æºåŠ æ—¶é—´æˆ³ã€‚è¿™ä¸ªæ˜¯æœ€å¸¸ç”¨çš„æ–¹æ³•ï¼Œæ²¡ç”Ÿæ•ˆã€‚ è§£å†³æ–¹æ³•äºŒï¼š åœ¨index.jsä¸­å¼•å…¥â€™babel-polyfillâ€™ã€‚ä¾ç„¶æ²¡ç”Ÿæ•ˆã€‚ è§£å†³æ–¹æ³•ä¸‰ï¼š åœ¨index.jsä¸­å¼•å…¥â€™core-js/stableâ€™ã€‚åœ¨å‰ä¸¤ç§æ²¡å»å¤„çš„æƒ…å†µä¸‹ï¼Œç›®å‰è¿è¥è¿˜æ²¡åé¦ˆç™½å±é—®é¢˜ï¼Œä¸çŸ¥é“æ˜¯ç”¨æˆ·å°‘äº†ï¼Œè¿˜æ˜¯è§£å†³äº†ã€‚ 12import 'babel-polyfill';import 'core-js/stable'; // è§£å†³reactå…¼å®¹é—®é¢˜ã€‚ ä¸‰.å¾®ä¿¡äºŒæ¬¡åˆ†äº«é—®é¢˜ å¾®ä¿¡åˆ†äº«çš„æ—¶å€™ï¼Œç¬¬ä¸€æ¬¡åˆ†äº«æ˜¯å¥½çš„ã€‚ä½†æ˜¯é€šè¿‡åˆ«äººåˆ†äº«çš„é“¾æ¥å†è¿›è¡Œåˆ†äº«ï¼Œä¼šå‡ºç°åˆ†äº«å¤±æ•ˆçš„æƒ…å†µã€‚ç»è¿‡æ’æŸ¥ï¼Œå‘ç°æ˜¯åˆ†äº«çš„æ—¶å€™ï¼Œå¾®ä¿¡è‡ªåŠ¨ç»™é“¾æ¥åŠ ä¸Šäº† &amp;isappinstalled=0&amp;&amp;from=groupmessage å‚æ•°ï¼Œå¯¼è‡´åˆ†äº«å¤±è´¥ï¼Œä¸ºå•¥å¤±è´¥å’±ä¹Ÿä¸çŸ¥é“ã€‚ äºæ˜¯é‡‡ç”¨ä»¥ä¸‹è§£å†³æ–¹æ³•ï¼šå¦‚æœé“¾æ¥å¸¦è¿™ä¸¤ä¸ªå‚æ•°ï¼ŒencodeURIComponentä¸€ä¸‹å°±å¥½äº†ã€‚123456let params = '';if(window.location.href.indexOf('from') != -1 || window.location.href.indexOf('isappinstalled') != -1)&#123; params = encodeURIComponent(window.location.href);&#125; else &#123; params = window.location.href;&#125; å››.ios è§†é¢‘æ— æ³•è‡ªåŠ¨æ’­æ”¾é—®é¢˜ è¿™ä¸ªä¹‹å‰æ²¡æœ‰é‡åˆ°è¿‡ï¼Œåœ¨è°·æ­Œæ¨¡æ‹Ÿå™¨é‡Œæ˜¯å¥½çš„ï¼Œä½†æ˜¯åœ¨ioså¾®ä¿¡é‡Œé¢ï¼Œè§†é¢‘æ— æ³•è‡ªåŠ¨æ’­æ”¾ï¼Œéœ€è¦åšä¸€ä¸‹åˆ¤æ–­ï¼Œåœ¨wx.readyè°ƒç”¨å°±å¥½äº†ã€‚123456789101112131415161718const u = navigator.userAgent;const isiOS = !!u.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/);if(isiOS)&#123; const video = this.refs.videoEl; // configå¿…é¡»å­˜åœ¨ wx.config(&#123; // é…ç½®ä¿¡æ¯, å³ä½¿ä¸æ­£ç¡®ä¹Ÿèƒ½ä½¿ç”¨ wx.ready debug: false, appId: '', timestamp: 1, nonceStr: '', signature: '', jsApiList: [] &#125;); wx.ready(function() &#123; video.play(); &#125;)&#125;","categories":[],"tags":[{"name":"å½’çº³é—®é¢˜","slug":"å½’çº³é—®é¢˜","permalink":"https://wxmac.github.io/tags/å½’çº³é—®é¢˜/"}]},{"title":"åä¹ã€çˆ¶å­é¡µé¢é€šä¿¡","slug":"19.çˆ¶å­é¡µé¢é€šä¿¡","date":"2020-02-19T16:00:00.000Z","updated":"2020-02-26T07:59:45.269Z","comments":true,"path":"2020/02/20/19.çˆ¶å­é¡µé¢é€šä¿¡/","link":"","permalink":"https://wxmac.github.io/2020/02/20/19.çˆ¶å­é¡µé¢é€šä¿¡/","excerpt":"çˆ¶å­é¡µé¢é€šä¿¡","text":"çˆ¶å­é¡µé¢é€šä¿¡ åšäº†ä¸€ä¸ªéœ€æ±‚ï¼Œå¥—äº†ä¸€ä¸ªiframeï¼Œä½†æ˜¯iframeé‡Œé¢çš„å¼¹çª—é®ç½©è¦†ç›–ä¸æˆ´çˆ¶é¡µé¢ï¼Œå¯¼è‡´æ˜¾ç¤ºé®ç½©çš„æ—¶å€™ï¼Œé¡µé¢ä»ç„¶å¯ä»¥æ»šåŠ¨ï¼Œè¯•äº†å‡ ä¸ªæ–¹æ³•ï¼Œè¿˜æ˜¯ postMessage é è°±ï¼Œå¯ä»¥å®ç°å³æ—¶é€šä¿¡ã€‚ å­é¡µé¢ 12345678910111213141516171819 // æ‹“å±•é—¨åº—handleShowOpenStore()&#123; this.setState(&#123; showOpenStore: true &#125;) window.location.href = '#container'; stopScroll(); window.parent.postMessage('stopScroll', '*');&#125;/** * æ³¨æ„äº‹é¡¹ï¼š 1.éœ€è¦ç¦æ­¢æ»šåŠ¨çš„åœ°æ–¹ window.parent.postMessage('stopScroll', '*'); 2.æ¢å¤æ»šåŠ¨ window.parent.postMessage('autoScroll', '*');**/ çˆ¶é¡µé¢ 12345678 // é˜²æ­¢æ»šåŠ¨window.addEventListener('message', (e) =&gt; &#123; if(e.data &amp;&amp; e.data === 'autoScroll')&#123; autoScroll() &#125; else if(e.data &amp;&amp; e.data === 'stopScroll')&#123; stopScroll() &#125;&#125;); åè®° 123/** ä½†æ˜¯ä¸ªäººæ„Ÿè§‰è¿™ä¸ªæ–¹æ³•ä¸æ˜¯å¾ˆå¥½ï¼Œæ— å¥ˆä¹‹ä¸¾ï¼Œåç»­å¯ä»¥æ‰¾æ–°æ–¹æ³•ã€‚**/","categories":[],"tags":[{"name":"postMessage","slug":"postMessage","permalink":"https://wxmac.github.io/tags/postMessage/"},{"name":"çˆ¶å­é¡µé¢é€šä¿¡","slug":"çˆ¶å­é¡µé¢é€šä¿¡","permalink":"https://wxmac.github.io/tags/çˆ¶å­é¡µé¢é€šä¿¡/"}]},{"title":"åä¸ƒã€å››ç§å¸¸è§çš„è®¾è®¡æ¨¡å¼","slug":"17.å››ç§å¸¸è§çš„è®¾è®¡æ¨¡å¼","date":"2020-02-09T16:00:00.000Z","updated":"2020-01-16T06:08:22.195Z","comments":true,"path":"2020/02/10/17.å››ç§å¸¸è§çš„è®¾è®¡æ¨¡å¼/","link":"","permalink":"https://wxmac.github.io/2020/02/10/17.å››ç§å¸¸è§çš„è®¾è®¡æ¨¡å¼/","excerpt":"è®¾è®¡æ¨¡å¼","text":"è®¾è®¡æ¨¡å¼ 1.å·¥å‚æ¨¡å¼ ç®€å•çš„å·¥å‚æ¨¡å¼å¯ä»¥ç†è§£ä¸ºè§£å†³å¤šä¸ªç›¸ä¼¼çš„é—®é¢˜;123456789101112131415161718192021function CreatePerson(name,age,sex) &#123; let obj = new Object(); obj.name = name; obj.age = age; obj.sex = sex; obj.sayName = function()&#123; return this.name; &#125; return obj;&#125;let p1 = new CreatePerson(\"longen\",'28','ç”·');let p2 = new CreatePerson(\"tugenhua\",'27','å¥³');console.log(p1.name); // longenconsole.log(p1.age); // 28console.log(p1.sex); // ç”·console.log(p1.sayName()); // longenconsole.log(p2.name); // tugenhuaconsole.log(p2.age); // 27console.log(p2.sex); // å¥³console.log(p2.sayName()); // tugenhua 2.å•ä¾‹æ¨¡å¼ åªèƒ½è¢«å®ä¾‹åŒ–(æ„é€ å‡½æ•°ç»™å®ä¾‹æ·»åŠ å±æ€§ä¸æ–¹æ³•)ä¸€æ¬¡;1234567891011121314151617181920// å•ä½“æ¨¡å¼let Singleton = function(name)&#123; this.name = name;&#125;;Singleton.prototype.getName = function()&#123; return this.name;&#125;// è·å–å®ä¾‹å¯¹è±¡let getInstance = (function() &#123; let instance = null; return function(name) &#123; if(!instance) &#123;//ç›¸å½“äºä¸€ä¸ªä¸€æ¬¡æ€§é˜€é—¨,åªèƒ½å®ä¾‹åŒ–ä¸€æ¬¡ instance = new Singleton(name); &#125; return instance; &#125;&#125;)();// æµ‹è¯•å•ä½“æ¨¡å¼çš„å®ä¾‹,æ‰€ä»¥a===blet a = getInstance(\"aa\");let b = getInstance(\"bb\"); 3.æ²™ç®±æ¨¡å¼ åªèƒ½è¢«å®ä¾‹åŒ–(æ„é€ å‡½æ•°ç»™å®ä¾‹æ·»åŠ å±æ€§ä¸æ–¹æ³•)ä¸€æ¬¡;12345678let sandboxModel=(function()&#123; function sayName()&#123;&#125;; function sayAge()&#123;&#125;; return&#123; sayName:sayName, sayAge:sayAge &#125; &#125;)() 4.å‘å¸ƒè€…è®¢é˜…æ¨¡å¼ ä¾‹å¦‚å¦‚æˆ‘ä»¬å…³æ³¨äº†æŸä¸€ä¸ªå…¬ä¼—å·,ç„¶åä»–å¯¹åº”çš„æœ‰æ–°çš„æ¶ˆæ¯å°±ä¼šç»™ä½ æ¨é€;123456789101112131415161718192021222324252627//å‘å¸ƒè€…ä¸è®¢é˜…æ¨¡å¼let shoeObj = &#123;&#125;; // å®šä¹‰å‘å¸ƒè€…shoeObj.list = []; // ç¼“å­˜åˆ—è¡¨ å­˜æ”¾è®¢é˜…è€…å›è°ƒå‡½æ•°// å¢åŠ è®¢é˜…è€…shoeObj.listen = function(fn) &#123; shoeObj.list.push(fn); // è®¢é˜…æ¶ˆæ¯æ·»åŠ åˆ°ç¼“å­˜åˆ—è¡¨&#125;// å‘å¸ƒæ¶ˆæ¯shoeObj.trigger = function() &#123; for (var i = 0, fn; fn = this.list[i++];) &#123; fn.apply(this, arguments);//ç¬¬ä¸€ä¸ªå‚æ•°åªæ˜¯æ”¹å˜fnçš„this, &#125;&#125; // å°çº¢è®¢é˜…å¦‚ä¸‹æ¶ˆæ¯shoeObj.listen(function(color, size) &#123; console.log(\"é¢œè‰²æ˜¯ï¼š\" + color); console.log(\"å°ºç æ˜¯ï¼š\" + size);&#125;);setInterval(() =&gt; &#123; shoeObj.trigger(\"çº¢è‰²\", 40);&#125;,10000);// å¯ç”¨ç”¨å‘å¸ƒè®¢é˜…æ¨¡å¼æ¥è®¾è®¡ æ¶ˆæ¯å¼¹çª—ã€‚","categories":[],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://wxmac.github.io/tags/è®¾è®¡æ¨¡å¼/"}]},{"title":"åå…«ã€æ‰‹å†™Promise","slug":"18.æ‰‹å†™Promise","date":"2020-02-09T16:00:00.000Z","updated":"2020-01-17T06:20:45.646Z","comments":true,"path":"2020/02/10/18.æ‰‹å†™Promise/","link":"","permalink":"https://wxmac.github.io/2020/02/10/18.æ‰‹å†™Promise/","excerpt":"æ‰‹å†™Promise","text":"æ‰‹å†™Promise æš‚æœªå®ç°é“¾å¼è°ƒç”¨ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758function Promise(callback)&#123; const _this = this; this.status = 'pending'; this.value = null; this.reason = null; this.onSuccess = []; this.onFail = []; function resolve(value)&#123; if(_this.status === 'pending')&#123; _this.onSuccess.forEach((fn) =&gt; &#123; return fn(value) &#125;) _this.status = 'resolve'; &#125; &#125;; function reject(reason)&#123; if(_this.status === 'pending')&#123; _this.onFail.forEach((fn) =&gt; &#123; return fn(reason) &#125;) _this.status = 'reject'; &#125; &#125; callback(resolve,reject )&#125;;Promise.prototype.then = function ( onresolve, onreject )&#123; if(this.status === 'resolve')&#123; if( typeof onresolve === 'function' )&#123; onresolve(this.value) &#125; &#125; if(this.status === 'reject')&#123; if( typeof onreject === 'function' )&#123; onreject(this.reason) &#125; &#125; if(this.status === 'pending')&#123; if( typeof onresolve === 'function' )&#123; this.onSuccess.push(onresolve) &#125; if( typeof onreject === 'function' )&#123; this.onFail.push(onreject) &#125; &#125;&#125;;var t = new Promise(function(resolve, reject) &#123; setTimeout(() =&gt; &#123; resolve(2); &#125;, 500);&#125;);t.then(data =&gt; &#123; console.log(data);&#125;); å‚è€ƒé“¾æ¥","categories":[],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://wxmac.github.io/tags/è®¾è®¡æ¨¡å¼/"}]},{"title":"åå…­ã€è‡ªå·±å®ç°mapã€indexOfã€concatï¼Œæ¥è‡ªjqueryæºç ","slug":"16.å®ç°mapã€indexOfã€concat","date":"2020-01-31T16:00:00.000Z","updated":"2020-01-13T01:50:35.019Z","comments":true,"path":"2020/02/01/16.å®ç°mapã€indexOfã€concat/","link":"","permalink":"https://wxmac.github.io/2020/02/01/16.å®ç°mapã€indexOfã€concat/","excerpt":"çœ‹äº†jqæºç ï¼Œå—ç›Šè‰¯å¤šã€‚","text":"çœ‹äº†jqæºç ï¼Œå—ç›Šè‰¯å¤šã€‚ 1.map123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051const map = ( elems, callback, arg ) =&gt; &#123; let length, value, ret = []; if ( Array.isArray(elems) ) &#123; // æ•°ç»„ length = elems.length; for ( let i = 0 ; i &lt; length; i++ ) &#123; value = callback( elems[ i ], i, arg ); if ( value != null ) &#123; ret.push( value ); &#125; &#125; &#125; else &#123; for ( let i in elems ) &#123; value = callback( elems[ i ], i, arg ); if ( value != null ) &#123; ret.push( value ); &#125; &#125; &#125; return ret;&#125;// 1.æ•°ç»„ /** const arr1 = ['a','b','c','d','e','f']; map(arr1, (item,i) =&gt; &#123; console.log(item, i) &#125;) è¾“å‡ºï¼š a 0 b 1 c 2 d 3 e 4 f 5* **/ // 2.å¯¹è±¡ /** const obj = &#123; 'a':1111, 'b':2222 &#125;; map(obj, (item,i) =&gt; &#123; console.log(item, i) &#125;) // è¾“å‡º a \"111\" b \"222\" * **/ 2.indexOf1234567891011121314151617181920const indexOf = ( list, elem ) =&gt; &#123; let len = list.length; for ( let i = 0 ; i &lt; len; i++ ) &#123; if ( list[i] === elem ) &#123; return i; &#125; &#125; return -1;&#125;;/*** * let arr = [1,2,3,4,5,6]; * console.log( indexOf(arr,2) ) * // è¿”å›ä¸‹æ ‡ 1 * * * let obj = 'abcdefg'; * console.log( indexOf(obj,c) ) * // è¿”å›ä¸‹æ ‡ 2*/ 3.concat12345678910111213141516const merge = ( first, second ) =&gt; &#123; let len = second.length, i = first.length; for (let j = 0 ; j &lt; len; j++ ) &#123; first[ i++ ] = second[ j ]; &#125; first.length = i; return first;&#125;;/** * let arr1 = [1,2,3,4,5,6]; * let arr2 = ['a','b','c','d','e','f']; * console.log( merge(arr1,arr2) ) * è¾“å‡ºï¼š [1, 2, 3, 4, 5, 6, \"a\", \"b\", \"c\", \"d\", \"e\", \"f\"] * **/","categories":[],"tags":[{"name":"map","slug":"map","permalink":"https://wxmac.github.io/tags/map/"}]},{"title":"åäº”ã€åˆ©ç”¨lesså®ç°ä¸€ä¸ªé›ªèŠ±â„ï¸","slug":"15.åˆ©ç”¨lesså®ç°ä¸€ä¸ªé›ªèŠ±â„ï¸","date":"2020-01-29T16:00:00.000Z","updated":"2020-01-06T06:37:17.737Z","comments":true,"path":"2020/01/30/15.åˆ©ç”¨lesså®ç°ä¸€ä¸ªé›ªèŠ±â„ï¸/","link":"","permalink":"https://wxmac.github.io/2020/01/30/15.åˆ©ç”¨lesså®ç°ä¸€ä¸ªé›ªèŠ±â„ï¸/","excerpt":"åˆ©ç”¨lesså®ç°ä¸€ä¸ªé›ªèŠ± çœ‹äº†ä¸€ç¯‡æ–‡ç« ï¼Œé‡Œé¢ç”¨lesså®ç°äº†ä¸€ä¸ªé›ªèŠ±ï¼Œé‡Œé¢lessçš„ç”¨æ³•è®©æˆ‘çœ¼å‰ä¸€äº®ï¼Œè¯¥çœ‹çœ‹lessçš„å…¶ä»–ç”¨æ³•äº†ã€‚","text":"åˆ©ç”¨lesså®ç°ä¸€ä¸ªé›ªèŠ± çœ‹äº†ä¸€ç¯‡æ–‡ç« ï¼Œé‡Œé¢ç”¨lesså®ç°äº†ä¸€ä¸ªé›ªèŠ±ï¼Œé‡Œé¢lessçš„ç”¨æ³•è®©æˆ‘çœ¼å‰ä¸€äº®ï¼Œè¯¥çœ‹çœ‹lessçš„å…¶ä»–ç”¨æ³•äº†ã€‚ html - å®ç°é›ªèŠ±ï¼Œhtmlç»“æ„æ˜¯å¾ˆé‡è¦çš„ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344&lt;figure className=&#123; styleCss.snowflake &#125;&gt; &lt;div&gt; &lt;span&gt;&lt;/span&gt; &lt;span&gt;&lt;/span&gt; &lt;span&gt;&lt;/span&gt; &lt;span&gt;&lt;/span&gt; &lt;span&gt;&lt;/span&gt; &lt;/div&gt; &lt;div&gt; &lt;span&gt;&lt;/span&gt; &lt;span&gt;&lt;/span&gt; &lt;span&gt;&lt;/span&gt; &lt;span&gt;&lt;/span&gt; &lt;span&gt;&lt;/span&gt; &lt;/div&gt; &lt;div&gt; &lt;span&gt;&lt;/span&gt; &lt;span&gt;&lt;/span&gt; &lt;span&gt;&lt;/span&gt; &lt;span&gt;&lt;/span&gt; &lt;span&gt;&lt;/span&gt; &lt;/div&gt; &lt;div&gt; &lt;span&gt;&lt;/span&gt; &lt;span&gt;&lt;/span&gt; &lt;span&gt;&lt;/span&gt; &lt;span&gt;&lt;/span&gt; &lt;span&gt;&lt;/span&gt; &lt;/div&gt; &lt;div&gt; &lt;span&gt;&lt;/span&gt; &lt;span&gt;&lt;/span&gt; &lt;span&gt;&lt;/span&gt; &lt;span&gt;&lt;/span&gt; &lt;span&gt;&lt;/span&gt; &lt;/div&gt; &lt;div&gt; &lt;span&gt;&lt;/span&gt; &lt;span&gt;&lt;/span&gt; &lt;span&gt;&lt;/span&gt; &lt;span&gt;&lt;/span&gt; &lt;span&gt;&lt;/span&gt; &lt;/div&gt;&lt;/figure&gt; less - å®ç°é›ªèŠ±çš„æ ¸å¿ƒä»£ç  12345678910111213141516171819202122232425262728293031323334353637383940414243.snowflake&#123; font-size: 100px; color: snow; width: 4em; height: 4em; outline: 1px dashed yellow; position: relative; display: flex; justify-content: center; div &#123; width: 0.1em; height: 2em; background-color: currentColor; border-radius: 0.05em; position: absolute; transform-origin: bottom; transform: rotate(calc(var(--n) * 60deg)); display: flex; flex-direction: column; align-items: center; span:nth-child(1),span:nth-child(2),span:nth-child(3),span:nth-child(4) &#123; width: calc(var(--slide-width)); height: calc(var(--slide-width)); border: 0.1em solid; border-width: 0.1em; border-style: none solid solid none; border-radius: 0.05em; transform: rotate(45deg); &#125; span:nth-child(1)&#123;--slide-width:0.2rem;&#125; span:nth-child(2)&#123;--slide-width:0.5rem;&#125; span:nth-child(3)&#123;--slide-width:0.4rem;&#125; span:nth-child(4)&#123;--slide-width:0.3rem;&#125; &#125; div:nth-child(1) &#123;--n: 1;&#125; div:nth-child(2) &#123;--n: 2;&#125; div:nth-child(3) &#123;--n: 3;&#125; div:nth-child(4) &#123;--n: 4;&#125; div:nth-child(5) &#123;--n: 5;&#125; div:nth-child(6) &#123;--n: 6;&#125;&#125;","categories":[],"tags":[{"name":"less","slug":"less","permalink":"https://wxmac.github.io/tags/less/"},{"name":"é›ªèŠ±","slug":"é›ªèŠ±","permalink":"https://wxmac.github.io/tags/é›ªèŠ±/"}]},{"title":"åå››ã€eventloopäº‹ä»¶å¾ªç¯","slug":"14.eventloopäº‹ä»¶å¾ªç¯","date":"2020-01-24T16:00:00.000Z","updated":"2020-02-26T08:51:02.311Z","comments":true,"path":"2020/01/25/14.eventloopäº‹ä»¶å¾ªç¯/","link":"","permalink":"https://wxmac.github.io/2020/01/25/14.eventloopäº‹ä»¶å¾ªç¯/","excerpt":"","text":"eventloopäº‹ä»¶å¾ªç¯ jsæ˜¯å•çº¿ç¨‹æ‰§è¡Œçš„ï¼Œeventloopäº‹ä»¶å¾ªç¯å°±æ˜¯è§£å†³javaScriptå•çº¿ç¨‹è¿è¡Œé˜»å¡çš„ä¸€ç§æœºåˆ¶ã€‚ ä¸€ã€å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡ åœ¨ js ä¸­ï¼Œä»»åŠ¡åˆ†ä¸ºå®ä»»åŠ¡(macrotask)å’Œå¾®ä»»åŠ¡(microtask)ï¼Œè¿™ä¸¤ä¸ªä»»åŠ¡åˆ†åˆ«ç»´æŠ¤ä¸€ä¸ªé˜Ÿåˆ—ï¼Œå‡é‡‡ç”¨å…ˆè¿›å…ˆå‡º(ç±»ä¼¼æ”¾ç›˜å­)çš„ç­–ç•¥è¿›è¡Œæ‰§è¡Œï¼ŒåŒæ­¥æ‰§è¡Œçš„ä»»åŠ¡éƒ½åœ¨å®ä»»åŠ¡ä¸Šæ‰§è¡Œã€‚ 1. å®ä»»åŠ¡ä¸»è¦æœ‰ï¼šscript(æ•´ä½“ä»£ç )ã€setTimeoutã€setIntervalã€I/Oã€UI äº¤äº’äº‹ä»¶ã€postMessageã€MessageChannelã€setImmediate(Node.js ç¯å¢ƒ)ã€‚ 2. å¾®ä»»åŠ¡ä¸»è¦æœ‰ï¼šPromise.thenã€ MutationObserverã€ process.nextTick(Node.js ç¯å¢ƒ)ã€‚ å®ä»»åŠ¡æ˜¯ç”±å¤šä¸ªå¾®ä»»åŠ¡ç»„æˆçš„ï¼Œå…ˆæ‰§è¡Œå¾®ä»»åŠ¡ï¼Œåæ‰§è¡Œå®ä»»åŠ¡ã€‚ äºŒã€è¿è¡Œæœºåˆ¶ åœ¨äº‹ä»¶å¾ªç¯ä¸­ï¼Œæ¯è¿›è¡Œä¸€æ¬¡å¾ªç¯æ“ä½œç§°ä¸º tickï¼Œæ¯ä¸€æ¬¡ tick çš„ä»»åŠ¡å¤„ç†æ¨¡å‹æ˜¯æ¯”è¾ƒå¤æ‚çš„ï¼Œä½†å…³é”®æ­¥éª¤å¦‚ä¸‹ï¼š 1. æ‰§è¡Œä¸€ä¸ªå®ä»»åŠ¡ï¼ˆæ ˆä¸­æ²¡æœ‰å°±ä»äº‹ä»¶é˜Ÿåˆ—ä¸­è·å–ï¼‰ 2. æ‰§è¡Œè¿‡ç¨‹ä¸­å¦‚æœé‡åˆ°å¾®ä»»åŠ¡ï¼Œå°±å°†å®ƒæ·»åŠ åˆ°å¾®ä»»åŠ¡çš„ä»»åŠ¡é˜Ÿåˆ—ä¸­ 3. å®ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åï¼Œç«‹å³æ‰§è¡Œå½“å‰å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„æ‰€æœ‰å¾®ä»»åŠ¡ï¼ˆä¾æ¬¡æ‰§è¡Œï¼‰ 4. å½“å‰å®ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ£€æŸ¥æ¸²æŸ“ï¼Œç„¶åGUIçº¿ç¨‹æ¥ç®¡æ¸²æŸ“ 5. æ¸²æŸ“å®Œæ¯•åï¼ŒJSçº¿ç¨‹ç»§ç»­æ¥ç®¡ï¼Œå¼€å§‹ä¸‹ä¸€ä¸ªå®ä»»åŠ¡ï¼ˆä»äº‹ä»¶é˜Ÿåˆ—ä¸­è·å–ï¼‰ä¸‰ã€ğŸŒ°1.å°è¯•è¾“å‡ºä»¥ä¸‹ä»£ç  12345678910111213141516171819console.log(1);setTimeout(function() &#123; console.log(2);&#125;, 0);new Promise(function(resolve) &#123; console.log(3); resolve(Date.now());&#125;).then(function() &#123; console.log(4);&#125;);console.log(5);setTimeout(function() &#123; new Promise(function(resolve) &#123; console.log(6); resolve(Date.now()); &#125;).then(function() &#123; console.log(7); &#125;);&#125;, 0); é‚£ä¹ˆä»¥ä¸Šä»£ç çš„æ‰§è¡Œè¿‡ç¨‹æ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿ - 1 3 5 4 2 6 7 1. ä»£ç ä»ä¸Šå¾€ä¸‹æ‰§è¡Œï¼Œé¦–å…ˆè¾“å‡º 1ï¼Œ 2. é‡åˆ°setTimeoutï¼Œæ¨å…¥å®ä»»åŠ¡ï¼Œå¾…åé¢æ‰§è¡Œï¼Œ 3. é‡åˆ°Promiseï¼Œé¦–å…ˆæ‰“å° 3ï¼ŒæŠŠthenåé¢çš„æ¨å…¥å¾®ä»»åŠ¡ï¼Œ 4. ç›´æ¥æ‰“å° 5ï¼Œ 6. é‡åˆ°setTimeoutï¼Œæ¨å…¥å®ä»»åŠ¡ï¼Œå¾…åé¢æ‰§è¡Œï¼Œ 7. å¾®ä»»åŠ¡æŒ‰é¡ºåºæ‰§è¡Œï¼Œæ‰“å° 4ï¼Œ 8. å®ä»»åŠ¡æŒ‰é¡ºåºæ‰§è¡Œï¼Œæ‰“å° 2ï¼Œä»»åŠ¡é˜Ÿåˆ—ä¸­æ²¡æœ‰å¾®ä»»åŠ¡ï¼Œä¸‹ä¸€æ­¥ï¼Œ 9. æ‰§è¡Œå®ä»»åŠ¡ï¼Œæ‰“å° 6ï¼ŒæŠŠthenåé¢çš„æ¨å…¥å¾®ä»»åŠ¡ï¼Œ 10. æ‰§è¡Œå¾®ä»»åŠ¡ï¼Œæ‰“å° 7ï¼Œå®Œæˆã€‚2.å°è¯•è¾“å‡ºä»¥ä¸‹ä»£ç  123456789101112131415161718192021222324252627async function async1() &#123; console.log('async1 start'); await async2(); console.log('async1 end');&#125;async function async2() &#123; console.log('async2');&#125;console.log('script start');setTimeout(function() &#123; console.log('setTimeout');&#125;, 0)async1();new Promise(function(resolve) &#123; console.log('promise1'); resolve();&#125;).then(function() &#123; console.log('promise2');&#125;);console.log('script end');/** await async2()ç­‰ä»·äº async2().then(() =&gt; &#123; console.log('async1 end'); &#125;)**/ 12345678910/* script start async1 start async2 promise1 script end async1 end promise2 setTimeout*/ è§£æ 1.é¦–å…ˆå®šä¹‰äº†ä¸¤ä¸ªasyncï¼Œæ²¡è°ƒç”¨ï¼Œç›´æ¥ä¸‹ä¸€æ­¥ï¼Œ 2.æ‰§è¡Œ script startï¼Œ 3.é‡åˆ°setTimeoutï¼Œ æ¨å…¥å®ä»»åŠ¡ï¼Œ 3.æ‰§è¡Œ async1å‡½æ•°,åœ¨awaitä¹‹å‰çš„ä»£ç æ˜¯ç«‹å³æ‰§è¡Œçš„ï¼Œæ‰€ä»¥ä¼šç«‹å³è¾“å‡º async1 start,é‡åˆ°äº†awaitæ—¶ï¼Œä¼šå°†awaitåé¢çš„è¡¨è¾¾å¼æ‰§è¡Œä¸€éï¼Œæ‰€ä»¥å°±ç´§æ¥ç€è¾“å‡ºasync2,æ‰“å°async2ï¼Œ 4.å¾€ä¸‹èµ°ï¼Œé‡åˆ°Promiseï¼Œæ‰“å°promise1ï¼Œ thenæ¨å…¥å¾®ä»»åŠ¡ï¼Œ 5.å¾€ä¸‹èµ°ï¼Œæ‰“å°script endï¼Œ 6.ç»§ç»­æŒ‰é¡ºåºæ‰§è¡Œä¹‹å‰ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„å¾®ä»»åŠ¡ï¼Œå…ˆæ‰“å°async1 endï¼Œ å†æ‰“å° promise2ï¼Œ 7.æ‰§è¡Œå®ä»»åŠ¡ï¼Œæ‰“å°setTimeoutã€‚","categories":[],"tags":[{"name":"eventloop","slug":"eventloop","permalink":"https://wxmac.github.io/tags/eventloop/"},{"name":"äº‹ä»¶å¾ªç¯","slug":"äº‹ä»¶å¾ªç¯","permalink":"https://wxmac.github.io/tags/äº‹ä»¶å¾ªç¯/"}]},{"title":"åä¸‰ã€æ•°ç»„å’Œå­—ç¬¦ä¸²ç›¸å…³æ–¹æ³•","slug":"13.æ•°ç»„å’Œå­—ç¬¦ä¸²ç›¸å…³æ–¹æ³•","date":"2020-01-19T16:00:00.000Z","updated":"2020-01-02T01:48:57.442Z","comments":true,"path":"2020/01/20/13.æ•°ç»„å’Œå­—ç¬¦ä¸²ç›¸å…³æ–¹æ³•/","link":"","permalink":"https://wxmac.github.io/2020/01/20/13.æ•°ç»„å’Œå­—ç¬¦ä¸²ç›¸å…³æ–¹æ³•/","excerpt":"ä¸€ï¼šæ•°ç»„æ–¹æ³•","text":"ä¸€ï¼šæ•°ç»„æ–¹æ³• 1.splice() â€“ æ‹¼æ¥æ•°ç»„ 1234567891011121314151617181920212223242526272829// ä½¿ç”¨1ï¼š åˆ é™¤å…ƒç´ const arr = [1,2,3];arr.splice(0,1); // [1]/** ç¬¬ä¸€ä¸ªå‚æ•°ï¼ˆ0ï¼‰å®šä¹‰äº†åˆ é™¤å…ƒç´ çš„ä½ç½®ï¼ˆä¸‹æ ‡ï¼‰; ç¬¬äºŒä¸ªå‚æ•°ï¼ˆ1ï¼‰å®šä¹‰åº”åˆ é™¤å¤šå°‘å…ƒç´ ; è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªåŒ…å«å·²åˆ é™¤é¡¹çš„æ•°ç»„,æ”¹å˜åŸæ•°ç»„ [2,3]**/// ä½¿ç”¨2ï¼š å‘æŒ‡å®šä½ç½®æ·»åŠ å…ƒç´ const arr = [1,2,3];arr.splice(2,0,5,6); // []/** ç¬¬ä¸€ä¸ªå‚æ•°ï¼ˆ2ï¼‰å®šä¹‰äº†åº”æ·»åŠ æ–°å…ƒç´ çš„ä½ç½®ï¼ˆä¸‹æ ‡ï¼‰; ç¬¬äºŒä¸ªå‚æ•°ï¼ˆ0ï¼‰å®šä¹‰åº”åˆ é™¤å¤šå°‘å…ƒç´ ; å…¶ä½™å‚æ•°ï¼ˆ'5','6'ï¼‰å®šä¹‰è¦æ·»åŠ çš„æ–°å…ƒç´ . è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªåŒ…å«å·²åˆ é™¤é¡¹çš„æ•°ç»„,æ”¹å˜åŸæ•°ç»„ [1, 2, 5, 6, 3]**/// ä½¿ç”¨3ï¼š å‘æŒ‡å®šä½ç½®æ›¿æ¢å…ƒç´ const arr = [1,2,3];arr.splice(2,1,5,6); // [3]/** ç¬¬ä¸€ä¸ªå‚æ•°ï¼ˆ2ï¼‰å®šä¹‰äº†åº”æ·»åŠ æ–°å…ƒç´ çš„ä½ç½®ï¼ˆä¸‹æ ‡ï¼‰; ç¬¬äºŒä¸ªå‚æ•°ï¼ˆ1ï¼‰å®šä¹‰åº”åˆ é™¤å¤šå°‘å…ƒç´ ; å…¶ä½™å‚æ•°ï¼ˆ'5','6'ï¼‰å®šä¹‰è¦æ·»åŠ çš„æ–°å…ƒç´ . è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªåŒ…å«å·²åˆ é™¤é¡¹çš„æ•°ç»„,æ”¹å˜åŸæ•°ç»„ [1, 2, 5, 6]**/ 2.slice() â€“ è£å‰ªæ•°ç»„ 12345678910 // ä½¿ç”¨1ï¼š åªæœ‰ä¸€ä¸ªå‚æ•° -- ä»ä¸‹æ ‡ 1 å¼€å§‹åˆ‡å‡ºä¸€æ®µæ•°ç»„ï¼Œç»“æŸå‚æ•°è¢«çœç•¥ï¼Œåˆ™ slice() ä¼šåˆ‡å‡ºæ•°ç»„çš„å‰©ä½™éƒ¨åˆ† const arr = [1,2,3,4,5]; arr.slice(1); // [2,3,4,5]; // ä½¿ç”¨1ï¼š ä¸¤ä¸ªå‚æ•° -- ä»ä¸‹æ ‡ 1 åˆ° 3 åˆ‡å‡ºä¸€æ®µæ•°ç»„ï¼ˆä¸åŒ…æ‹¬ç»“æŸå‚æ•°ï¼‰ const arr = [1,2,3,4,5]; arr.slice(1,3); // [2,3]; // è¯¥æ–¹æ³•åˆ›å»ºæ–°æ•°ç»„,ä¸ä¼šæ”¹å˜åŸæ•°ç»„ 3.toString()ã€join() â€“ æŠŠæ•°ç»„è½¬æ¢ä¸ºå­—ç¬¦ä¸² 123const arr = [1,2,3];arr.toString(); // 1,2,3arr.join('-'); // 1-2-3 join() å¯ä»¥è§„å®šåˆ†éš”ç¬¦ - 4.pop() â€“ æ–¹æ³•ä»æ•°ç»„ä¸­åˆ é™¤æœ€åä¸€ä¸ªå…ƒç´  123456789101112131415161718192021 const arr = [1,2,3]; arr.pop(); // 3 // è¯¥æ–¹æ³•è¿”å›è¢«åˆ é™¤çš„å…ƒç´ , æ”¹å˜åŸæ•°ç»„ [1,2]/** ä½¿ç”¨æ ˆçš„æ€æƒ³æ‰å¹³åŒ–æ•°ç»„ï¼š const flat = (arr) =&gt; &#123; const stack = [...arr]; const res = []; while( stack.length )&#123; const next = stack.pop(); if(Array.isArray(next))&#123; stack.push(...next); &#125; else &#123; res.push(next) &#125; &#125; return res.reverse();&#125;*/ 5.push() â€“ å‘æ•°ç»„æœ«å°¾æ·»åŠ ä¸€ä¸ªæ–°çš„å…ƒç´  123const arr = [1,2,3];arr.push(4); // 4// è¯¥æ–¹æ³•è¿”å›æ–°æ•°ç»„çš„é•¿åº¦ length, æ”¹å˜åŸæ•°ç»„ [1,2,3,4] 6.shift() â€“ åˆ é™¤é¦–ä¸ªæ•°ç»„å…ƒç´  123const arr = [1,2,3];arr.shift(); // 1// è¯¥æ–¹æ³•è¿”å›è¢«åˆ é™¤çš„å…ƒç´ , æ”¹å˜åŸæ•°ç»„ [2,3] 7.unshift() â€“ å‘æ•°ç»„å¤´éƒ¨æ·»åŠ æ–°å…ƒç´  123const arr = [1,2,3];arr.unshift(9); // 4// è¯¥æ–¹æ³•è¿”å›æ–°æ•°ç»„çš„é•¿åº¦ length, æ”¹å˜åŸæ•°ç»„ [9,1,2,3] 8.concat() â€“ åˆå¹¶æ•°ç»„ 1234const arr = [1,2,3];const newArr = [4,5,6];arr.concat(newArr); // [1,2,3,4,5,6]// è¯¥æ–¹æ³•ä¸ä¼šæ›´æ”¹ç°æœ‰æ•°ç»„ï¼Œå®ƒæ€»æ˜¯è¿”å›ä¸€ä¸ªæ–°æ•°ç»„ [1,2,3,4,5,6] 9.sort() â€“ æ•°ç»„æ’åº 1234567891011121314151617181920212223242526const arr = [2,1,3];arr.sort(); // [1,2,3]arr.sort((a,b) =&gt; b - a) // [3,2,1]// è¯¥æ–¹æ³•ä¸ä¼šæ›´æ”¹ç°æœ‰æ•°ç»„ï¼Œå®ƒæ€»æ˜¯è¿”å›ä¸€ä¸ªæ–°æ•°ç»„ [1,2,3,4,5,6]/** // 1.æ’åº const compare = (property,desc) =&gt; &#123; return function (a, b) &#123; var value1 = a[property]; var value2 = b[property]; if(desc)&#123; // å‡åºæ’åˆ— return value1 - value2; &#125;else&#123; // é™åºæ’åˆ— return value2 - value1; &#125; &#125; &#125; 2. æŸ¥æ‰¾æœ€å¤§å€¼ Math.max.apply(null, arr); 3. æŸ¥æ‰¾æœ€å°å€¼ Math.min.apply(null, arr);*/ 9.reverse() â€“ åè½¬æ•°ç»„ 12const arr = [1,2,3];arr.reverse(arr); // [3,2,1] äºŒï¼šå­—ç¬¦ä¸²æ–¹æ³•1.indexOf() â€“ è¿”å›å­—ç¬¦ä¸²ä¸­æŒ‡å®šæ–‡æœ¬ é¦–æ¬¡ å‡ºç°çš„ç´¢å¼•ï¼ˆä½ç½®ï¼‰ 123const str = 'indexOf';str.indexOf('index'); // 0// å¦‚æœæœªæ‰¾åˆ°æ–‡æœ¬ï¼Œ è¿”å› -1 2.lastIndexOf() â€“ è¿”å›æŒ‡å®šæ–‡æœ¬åœ¨å­—ç¬¦ä¸²ä¸­ æœ€å ä¸€æ¬¡å‡ºç°çš„ç´¢å¼• 123const str = 'lastIndexOf';str.lastIndexOf('last'); // 0// å¦‚æœæœªæ‰¾åˆ°æ–‡æœ¬ï¼Œ è¿”å› -1 3.slice()ã€substring()ã€substr() â€“ è£å‰ªå­—ç¬¦ä¸² 1234//æœ‰ä¸‰ç§æå–éƒ¨åˆ†å­—ç¬¦ä¸²çš„æ–¹æ³•ï¼š - slice(start, end) - substring(start, end) - substr(start, length) slice() â€“ æå–å­—ç¬¦ä¸²çš„æŸä¸ªéƒ¨åˆ†å¹¶åœ¨æ–°å­—ç¬¦ä¸²ä¸­è¿”å›è¢«æå–çš„éƒ¨åˆ† 12345678const str = 'æå–å­—ç¬¦ä¸²';str.slice(2,3); // 'å­—'// å¦‚æœæŸä¸ªå‚æ•°ä¸ºè´Ÿï¼Œåˆ™ä»å­—ç¬¦ä¸²çš„ç»“å°¾å¼€å§‹è®¡æ•°ã€‚str.slice(-3,-2); // 'å­—'// å¦‚æœçœç•¥ç¬¬äºŒä¸ªå‚æ•°ï¼Œåˆ™è¯¥æ–¹æ³•å°†è£å‰ªå­—ç¬¦ä¸²çš„å‰©ä½™éƒ¨åˆ†ï¼šstr.slice(1); // 'å–å­—ç¬¦ä¸²' substring() â€“ ç±»ä¼¼äº slice(), ä½†æ˜¯æ— æ³•æ¥å—è´Ÿçš„ç´¢å¼• 12const str = 'æå–å­—ç¬¦ä¸²';str.substring(2,3); // 'å­—' substr() â€“ ç±»ä¼¼äº slice(), ä½†æ˜¯ç¬¬äºŒä¸ªå‚æ•°è§„å®šè¢«æå–éƒ¨åˆ†çš„é•¿åº¦ 1234567const str = 'æå–å­—ç¬¦ä¸²';str.substring(2,3); // 'å­—ç¬¦ä¸²'// å¦‚æœçœç•¥ç¬¬äºŒä¸ªå‚æ•°ï¼Œåˆ™è¯¥ substr() å°†è£å‰ªå­—ç¬¦ä¸²çš„å‰©ä½™éƒ¨åˆ†ã€‚ str.substring(2); // 'å–å­—ç¬¦ä¸²'//å¦‚æœé¦–ä¸ªå‚æ•°ä¸ºè´Ÿï¼Œåˆ™ä»å­—ç¬¦ä¸²çš„ç»“å°¾è®¡ç®—ä½ç½®ã€‚ç¬¬äºŒä¸ªå‚æ•°ä¸èƒ½ä¸ºè´Ÿï¼Œå› ä¸ºå®ƒå®šä¹‰çš„æ˜¯é•¿åº¦ã€‚ 4.replace() â€“ ç”¨å¦ä¸€ä¸ªå€¼æ›¿æ¢åœ¨å­—ç¬¦ä¸²ä¸­æŒ‡å®šçš„å€¼ 123const str = 'hello world';str.replace(/l/ig,'æ›¿æ¢'); // \"heæ›¿æ¢æ›¿æ¢o woræ›¿æ¢d\" // è¿”å›çš„æ˜¯æ–°å­—ç¬¦ä¸²ã€‚ 5.toUpperCase() â€“ æŠŠå­—ç¬¦ä¸²è½¬æ¢ä¸ºå¤§å†™ 12const str = 'hello world';str.toUpperCase(); // \"HELLO WORLD\" 6.toLowerCase() â€“ æŠŠå­—ç¬¦ä¸²è½¬æ¢ä¸ºå°å†™ 12const str = 'HELLO WORLD';str.toLowerCase(); // \"hello world\" 7.concat() â€“ è¿æ¥ä¸¤ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ä¸² 123const str = 'hello';const str2 = 'world';str.concat(str2); // \"helloworld\" 8.trim() â€“ åˆ é™¤å­—ç¬¦ä¸²ä¸¤ç«¯çš„ç©ºç™½ç¬¦ï¼š 12const str = ' hello world ';str.trim(); // \"hello world\" 9.split() â€“ å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°ç»„ 12const str = '1,2,3,4';str.split(','); // [\"1\", \"2\", \"3\", \"4\"]","categories":[],"tags":[{"name":"å­—ç¬¦ä¸²","slug":"å­—ç¬¦ä¸²","permalink":"https://wxmac.github.io/tags/å­—ç¬¦ä¸²/"},{"name":"å­—ç¬¦ä¸²æ–¹æ³•","slug":"å­—ç¬¦ä¸²æ–¹æ³•","permalink":"https://wxmac.github.io/tags/å­—ç¬¦ä¸²æ–¹æ³•/"},{"name":"æ•°ç»„","slug":"æ•°ç»„","permalink":"https://wxmac.github.io/tags/æ•°ç»„/"},{"name":"æ•°ç»„æ–¹æ³•","slug":"æ•°ç»„æ–¹æ³•","permalink":"https://wxmac.github.io/tags/æ•°ç»„æ–¹æ³•/"}]},{"title":"åäºŒã€æ•°ç»„å»é‡","slug":"12.æ•°ç»„å»é‡","date":"2020-01-14T16:00:00.000Z","updated":"2020-01-17T06:35:21.535Z","comments":true,"path":"2020/01/15/12.æ•°ç»„å»é‡/","link":"","permalink":"https://wxmac.github.io/2020/01/15/12.æ•°ç»„å»é‡/","excerpt":"æ•°ç»„å»é‡","text":"æ•°ç»„å»é‡ reduce + find 1234567891011121314const data = [1,2,3,4,5,1,2,6,7];const distinct = (arr) =&gt; &#123; return arr.reduce((total,curr, index) =&gt; &#123; // findè¿”å›æ•°ç»„ä¸­æ»¡è¶³æä¾›çš„æµ‹è¯•å‡½æ•°çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„å€¼ const exist = total.find((item) =&gt; item === curr ); if(!exist)&#123; total.push(curr) &#125; return total &#125;,[]) &#125;console.log(distinct(data)); // // [1, 2, 3, 4, 5, 6, 7]// åˆ©ç”¨findæŸ¥æ‰¾æ˜¯å¦å­˜åœ¨ç›¸åŒå…ƒç´ ï¼Œå¦‚æœä¸å­˜åœ¨å°±pushåˆ°æ•°ç»„é‡Œ 1.filter + indexOf 123456789const arr = [1,2,3,4,5,1,2];const distinct = (arr) =&gt; &#123; return arr.filter((item,index) =&gt; &#123; return arr.indexOf(item) === index &#125;)&#125;;console.log(distinct(arr));// [1, 2, 3, 4, 5]// åˆ©ç”¨indexOfæ£€æµ‹å…ƒç´ åœ¨æ•°ç»„ä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®æ˜¯å¦å’Œå…ƒç´ ç°åœ¨çš„ä½ç½®ç›¸ç­‰ï¼Œå¦‚æœä¸ç­‰åˆ™è¯´æ˜è¯¥å…ƒç´ æ˜¯é‡å¤å…ƒç´  åŒé‡forå¾ªç¯ 123456789101112131415const data = [1,2,3,4,5,1,2];const distinct = (arr) =&gt; &#123; for( let i = 0; i &lt; arr.length; i++ )&#123; for(let j = i + 1; j &lt; arr.length; j++)&#123; if(arr[i] === arr[j])&#123; arr.splice(j, 1); j--; &#125; &#125; &#125; return arr;&#125;; console.log(distinct(data)); // [1, 2, 3, 4, 5] // å…ˆå®šä¹‰ä¸€ä¸ªåŒ…å«åŸå§‹æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ çš„æ•°ç»„ï¼Œç„¶åéå†åŸå§‹æ•°ç»„ï¼Œå°†åŸå§‹æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ä¸æ–°æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ è¿›è¡Œæ¯”å¯¹ï¼Œå¦‚æœä¸é‡å¤åˆ™æ·»åŠ åˆ°æ–°æ•°ç»„ä¸­ï¼Œæœ€åè¿”å›æ–°æ•°ç»„ ES6 ä¸­çš„ Set å»é‡ 12345const data = [1,2,3,4,5,1,2];const distinct = (arr) =&gt; &#123; return [...new Set(arr)]&#125;;console.log(distinct(data)); // [1, 2, 3, 4, 5] ä¾‹å­ğŸŒ° 12345678910111213141516171819202122232425262728293031/** ï¼ˆæºç¨‹ï¼‰ç®—æ³•æ‰‹å†™é¢˜ å·²çŸ¥å¦‚ä¸‹æ•°ç»„ï¼š var arr = [ [1, 2, 2], [3, 4, 5, 5], [6, 7, 8, 9, [11, 12, [12, 13, [14] ] ] ], 10]; ç¼–å†™ä¸€ä¸ªç¨‹åºå°†æ•°ç»„æ‰å¹³åŒ–å¹¶å»é™¤å…¶ä¸­é‡å¤éƒ¨åˆ†æ•°æ®ï¼Œæœ€ç»ˆå¾—åˆ°ä¸€ä¸ªå‡åºä¸”ä¸é‡å¤çš„æ•°ç»„**/var arr = [ [1, 2, 2], [3, 4, 5, 5], [6, 7, 8, 9, [11, 12, [12, 13, [14] ] ] ], 10];const flat = (arr) =&gt; &#123; // æ‰å¹³åŒ–æ•°ç»„ return arr.reduce((total, curr) =&gt; &#123; return Array.isArray(curr) ? total.concat(flat(curr)) : total.concat(curr) &#125;,[])&#125;const newArr = flat(arr);const removeRepeat = (arr) =&gt; &#123; // æ•°ç»„å»é‡ return arr.filter((item,index) =&gt; &#123; return arr.indexOf(item) === index &#125;)&#125;const res = removeRepeat(newArr)console.log(res.sort((a,b) =&gt; a - b))// [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14]/** ç®€ä¾¿è§£æ³•ï¼š Array.from( new Set( arr.flat(Infinity)) ).sort(( a, b )=&gt;a - b)**/","categories":[],"tags":[{"name":"æ•°ç»„","slug":"æ•°ç»„","permalink":"https://wxmac.github.io/tags/æ•°ç»„/"},{"name":"æ•°ç»„å»é‡","slug":"æ•°ç»„å»é‡","permalink":"https://wxmac.github.io/tags/æ•°ç»„å»é‡/"}]},{"title":"åä¸€ã€ä¹å®«æ ¼æŠ½å¥–","slug":"11.ä¹å®«æ ¼æŠ½å¥–","date":"2020-01-09T16:00:00.000Z","updated":"2019-12-26T05:56:43.066Z","comments":true,"path":"2020/01/10/11.ä¹å®«æ ¼æŠ½å¥–/","link":"","permalink":"https://wxmac.github.io/2020/01/10/11.ä¹å®«æ ¼æŠ½å¥–/","excerpt":"ä¹å®«æ ¼æŠ½å¥–","text":"ä¹å®«æ ¼æŠ½å¥– 1.jså®ç° 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130class Lottery&#123; constructor(&#123; startBtnEl, giftAllEl, prizeIndex, delayTime, animateTime, clearActive, _luckyTimes, haveChange, successCallback = () =&gt; &#123;&#125; &#125;)&#123; Object.assign(this,&#123; startBtnEl, // å¼€å§‹æŒ‰é’® giftAllEl, // æ‰€æœ‰å¥–å“å…¬å…±class prizeIndex: prizeIndex || 'è°¢è°¢å‚ä¸', // æŠ½ä¸­å¥–å“ä¸‹æ ‡ _luckyTimes: _luckyTimes || 0, // æŠ½å¥–æ¬¡æ•° delayTime: delayTime || 3000, // å»¶æ—¶å¤šå°‘ç§’å¾—åˆ°ç»“æœ animateTime: animateTime || 200, // åŠ¨ç”»æ—¶é—´ clearActive: clearActive || true, // æ¸…é™¤çŠ¶æ€ haveChange: haveChange || false, // æ˜¯å¦è¿˜æœ‰æŠ½å¥–æœºä¼š successCallback // æŠ½ä¸­å¥–å“å›è°ƒ &#125;) this.$prizeItemsEl = null, // å¥–å“ this.lotteryPrizeIndex = 0, // ä¹å®«æ ¼å¯¹åº”ä¸‹æ ‡ this.timer = null, // å®šæ—¶å™¨ this.init() &#125; init()&#123; this.$lotteryStartEl = document.querySelector(this.startBtnEl) this.$prizeItemsEl = document.querySelectorAll(this.giftAllEl) // ğŸ…å¥–å“ this.initStartEvent() &#125; initStartEvent()&#123; let haveChange = this.haveChange; const el = this.$lotteryStartEl el.onclick = () =&gt; &#123; if (!el.classList.contains('disabled') ) &#123; this.setStartBtnStatus(true) if (haveChange) &#123; // æœ‰æŠ½å¥–æœºä¼šï¼Œå¾—åˆ°æŠ½å¥–ç»“æœ this.getTargetPrize() this.handleStartAnimate() &#125; else &#123; // æ²¡æœ‰æŠ½å¥–æœºä¼šäº† console.log('æ²¡æœ‰æŠ½å¥–æœºä¼šäº†') &#125; &#125; &#125; &#125; // å¼€å§‹æŠ½å¥–åŠ¨ç”» handleStartAnimate()&#123; this.lotteryPrizeIndex = 0 this.timer = setInterval(() =&gt; &#123; this.lotteryPrizeIndex = this.lotteryPrizeIndex === 8 ? 1 : this.lotteryPrizeIndex + 1; this.addPrizeMask(); // è¿™é‡Œå¾ˆå·§å¦™ï¼Œlottery-prize_item_index å’Œhtmlä¸€è‡´ document.querySelector(`.lottery-prize_item_$&#123;this.lotteryPrizeIndex&#125;`).classList.remove('mask') &#125;, this.animateTime) return this.timer &#125; // æ·»åŠ æ‰€æœ‰å¥–å“çš„é®ç½©çŠ¶æ€ addPrizeMask()&#123; for (let i = 0, l = this.$prizeItemsEl.length; i &lt; l; i++) &#123; this.$prizeItemsEl[i].classList.add('mask') &#125; &#125; // æ¸…é™¤æ‰€æœ‰å¥–å“çš„é®ç½©çŠ¶æ€ clearPrizeActive () &#123; for (let i = 0, l = this.$prizeItemsEl.length; i &lt; l; i++) &#123; this.$prizeItemsEl[i].classList.remove('mask') &#125; &#125; // æŠ½å¥–ç»“æœ getTargetPrize()&#123; // æ¨¡æ‹Ÿéšæœºå¾—åˆ°ä¸€ä¸ªç»“æœ let prizeIndex = this.prizeIndex; if(prizeIndex == 'è°¢è°¢å‚ä¸')&#123; return &#125; if(prizeIndex == 0 || prizeIndex == 9)&#123; prizeIndex = 1 &#125; // å»¶æ—¶å‡ ç§’å¾—åˆ°ç»“æœ setTimeout(() =&gt; &#123; typeof this.successCallback === 'function' &amp;&amp; this.successCallback(prizeIndex) this.stopPrizeAnimate(prizeIndex) &#125;, this.delayTime) &#125; // å…³é—­æŠ½å¥–åŠ¨ç”» stopPrizeAnimate(index)&#123; if (index) &#123; let stopTimer = null stopTimer = setInterval(() =&gt; &#123; if (index === this.lotteryPrizeIndex ) &#123; clearInterval(stopTimer) clearInterval(this.timer) this.setStartBtnStatus() if (this.clearActive) &#123; //this.clearPrizeActive() &#125; &#125; &#125;, 100) &#125; else &#123; this.setStartBtnStatus() clearInterval(this.timer) this.clearPrizeActive() &#125; &#125; // æŒ‰é’®çŠ¶æ€ setStartBtnStatus (status) &#123; if (status) &#123; this.$lotteryStartEl.classList.add('disabled') &#125; else if (this._luckyTimes) &#123; this.$lotteryStartEl.classList.remove('disabled') &#125; &#125;&#125;new Lottery(&#123; startBtnEl: '.J_lottery-start', giftAllEl: '.lottery-prize_item', prizeIndex:2 , haveChange: true, _luckyTimes: 2, successCallback(prizeIndex)&#123; console.log('prizeIndex---&gt;',prizeIndex) &#125;&#125;) 2.htmlç»“æ„ 123456789101112131415161718192021222324252627&lt;div class=\"lottery-prize_items\"&gt; &lt;div class=\"lottery-prize_item lottery-prize_item_1\"&gt; &lt;img src=\"./ä¸‹è½½.jpeg\" alt=\"\"&gt; &lt;/div&gt; &lt;div class=\"lottery-prize_item lottery-prize_item_2\"&gt; &lt;img src=\"./ä¸‹è½½.jpeg\" alt=\"\"&gt; &lt;/div&gt; &lt;div class=\"lottery-prize_item lottery-prize_item_3\"&gt; &lt;img src=\"./ä¸‹è½½.jpeg\" alt=\"\"&gt; &lt;/div&gt; &lt;div class=\"lottery-prize_item lottery-prize_item_8\"&gt; &lt;img src=\"./ä¸‹è½½.jpeg\" alt=\"\"&gt; &lt;/div&gt; &lt;div class=\"lottery-start J_lottery-start \"&gt;GO! &lt;/div&gt; &lt;div class=\"lottery-prize_item lottery-prize_item_4\"&gt; &lt;img src=\"./ä¸‹è½½.jpeg\" alt=\"\"&gt; &lt;/div&gt; &lt;div class=\"lottery-prize_item lottery-prize_item_7\"&gt; &lt;img src=\"./ä¸‹è½½.jpeg\" alt=\"\"&gt; &lt;/div&gt; &lt;div class=\"lottery-prize_item lottery-prize_item_6\"&gt; &lt;img src=\"./ä¸‹è½½.jpeg\" alt=\"\"&gt; &lt;/div&gt; &lt;div class=\"lottery-prize_item lottery-prize_item_5\"&gt; &lt;img src=\"./ä¸‹è½½.jpeg\" alt=\"\"&gt; &lt;/div&gt;&lt;/div&gt; 3.css 1234567891011121314151617181920212223242526272829303132333435363738394041424344*&#123;margin: 0; padding: 0;&#125; .lottery-prize_items&#123; width: 430px; height:400px; display: flex; flex-wrap: wrap; justify-content: space-between; align-content: space-between; padding: 20px; background-color: #446CD3; border-radius: 5px; &#125; .lottery-prize_items .lottery-prize_item, .lottery-prize_items .lottery-start&#123; width: 120px; height: 120px; background: #D2DAFF; background: #fff; border-radius: 5px; position: relative; display: flex; align-items: center; justify-content: center; user-select: none; overflow: hidden; &#125; .lottery-prize_items .mask:after&#123; display: block; content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 120px; background: rgba(94, 139, 255, 0.4); border-radius: 5px; &#125; .lottery-prize_items .disabled&#123; background: #C4C6CA; color: #fff; &#125; .lottery-prize_items .lottery-prize_item img&#123; width: 120px; height: 120px; &#125;","categories":[],"tags":[{"name":"lottery","slug":"lottery","permalink":"https://wxmac.github.io/tags/lottery/"},{"name":"æŠ½å¥–","slug":"æŠ½å¥–","permalink":"https://wxmac.github.io/tags/æŠ½å¥–/"}]},{"title":"åã€èŠ‚æ—¥å¤´åƒå°æŒ‚ä»¶","slug":"10.èŠ‚æ—¥å¤´åƒå°æŒ‚ä»¶","date":"2020-01-04T16:00:00.000Z","updated":"2019-12-26T05:18:57.621Z","comments":true,"path":"2020/01/05/10.èŠ‚æ—¥å¤´åƒå°æŒ‚ä»¶/","link":"","permalink":"https://wxmac.github.io/2020/01/05/10.èŠ‚æ—¥å¤´åƒå°æŒ‚ä»¶/","excerpt":"å®ç°æ€è·¯ï¼šå‚è€ƒå¤§ä½¬é“¾æ¥ ä¸Šä¼ çš„å¤´åƒå’Œå°æŒ‚ä»¶è¦åŒ¹é…åˆ°ä¸€èµ·ï¼Œåˆ©ç”¨canvasç”Ÿæˆå›¾ç‰‡ï¼Œå¹¶ä¸‹è½½ã€‚","text":"å®ç°æ€è·¯ï¼šå‚è€ƒå¤§ä½¬é“¾æ¥ ä¸Šä¼ çš„å¤´åƒå’Œå°æŒ‚ä»¶è¦åŒ¹é…åˆ°ä¸€èµ·ï¼Œåˆ©ç”¨canvasç”Ÿæˆå›¾ç‰‡ï¼Œå¹¶ä¸‹è½½ã€‚ å®ç°ä»£ç  é¦–å…ˆæŠŠhtmlå†™å¥½ï¼Œå†åŠ ä¸Šä¸€é¡¿CSSæ“ä½œï¼Œæ ·å¼å¦‚ä¸‹12345678910111213// htmlconst &#123; targetUrl, loading &#125; = this.state;&lt;div className=&#123; `$&#123;styleCss.avatarBox&#125; ` &#125;&gt;&lt;div className=&#123; `$&#123;styleCss.avatar_main&#125; $&#123;loading ? styleCss.loader : ''&#125;` &#125;&gt; &lt;img onClick=&#123; () =&gt; this.handleArrowChange('LEFT') &#125; className=&#123; styleCss.arrowLeft &#125; src=&#123; require('@/assets/img/avatar/arrowLeft.svg') &#125; alt=\"\"/&gt; &lt;img onClick=&#123; () =&gt; this.handleArrowChange('RIGHT') &#125; className=&#123; styleCss.arrowRight &#125; src=&#123; require('@/assets/img/avatar/arrowRight.svg') &#125; alt=\"\"/&gt;&lt;/div&gt;&lt;input type=\"file\" accept=\"image/*\" onChange=&#123; (e) =&gt; this.handleUploadImgInit(e) &#125;/&gt;&lt;img src=&#123; targetUrl &#125; alt=\"\" className=&#123; styleCss.avatar_target &#125;/&gt;&lt;/div&gt;&lt;canvas className=&#123; styleCss.canvas &#125; ref=\"canvas\" /&gt; æ ¸å¿ƒä»£ç  1ã€å®šä¹‰ç›¸å…³å˜é‡ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950const CANVANS_SIZE = 256;// å°æŒ‚ä»¶æ•°ç»„,styleä½ç½®å’Œå¤§å°ä¿¡æ¯éœ€è¦è‡ªå·±è¯•éªŒä¸€ä¸‹const imgSourceList = [&#123; source: require('@/assets/img/avatar/1.png'), style: &#123; width: 108, height: 88, top: `$&#123;CANVANS_SIZE - 88&#125;`, left: `$&#123;CANVANS_SIZE - 108&#125;` &#125;&#125;, &#123; source: require('@/assets/img/avatar/2.png'), style: &#123; width: 128, height: 128, top: `$&#123;CANVANS_SIZE - 108&#125;`, left: `$&#123;CANVANS_SIZE - 118&#125;` &#125;&#125;, &#123; source: require('@/assets/img/avatar/3.png'), style: &#123; width: 96, height: 108, top: `$&#123;CANVANS_SIZE - 128&#125;`, left: `$&#123;CANVANS_SIZE - 86&#125;` &#125;&#125;, &#123; source: require('@/assets/img/avatar/4.png'), style: &#123; width: CANVANS_SIZE, height: 226, top: -38, left: 0 &#125;&#125;, &#123; source: require('@/assets/img/avatar/5.png'), style: &#123; width: 100, height: 126, top: 0, left: CANVANS_SIZE / 3 &#125;&#125;];this.state=&#123; decorationCurrent: imgSourceList[0], // å°æŒ‚ä»¶1 decorationList: imgSourceList, // å°æŒ‚ä»¶æ•°ç»„ currentIndex:0, // å½“å‰æŒ‚ä»¶ä¸‹æ ‡ loading:false // æ˜¯å¦æ˜¾ç¤ºåŠ è½½&#125; 2ã€åˆå§‹åŒ–canvas 1234567891011121314151617 componentDidMount()&#123; const &#123; decorationCurrent &#125; = this.state; // åˆå§‹åŒ–æŒ‚è½½å°æŒ‚ä»¶ this.handleMakeImage(null, decorationCurrent).then(targetUrl =&gt; &#123; this.setState(&#123; targetUrl &#125;); &#125;);// æŒ‚è½½canvas this.initCanvas(); &#125; initCanvas() &#123; const &#123; canvas &#125; = this.refs; canvas.width = CANVANS_SIZE; canvas.height = CANVANS_SIZE; &#125; 3ã€ä¸Šä¼ å›¾ç‰‡ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859 async handleUploadImgInit(e)&#123; const _this = this; const target = e.target; const &#123; canvas &#125; = this.refs; const &#123; decorationCurrent &#125; = this.state; const context = canvas.getContext('2d'); const files = e.target.files[0]; // ä¸Šä¼ çš„å›¾ç‰‡ const base64Url = await this.handleBase64Img(files); const imgObj = await this.createImage(base64Url);// è°ƒæ•´ç”¨æˆ·å›¾ç‰‡å°ºå¯¸// æ— è®ºå®½å¤§äºé«˜è¿˜æ˜¯å®½å°äºé«˜ï¼Œéƒ½ä¼šè¿›è¡Œç­‰æ¯”ç¼©æ”¾ const type = imgObj.width - imgObj.height; if (type &gt; 0) &#123; // å®½ &gt; é«˜ const w = imgObj.width * CANVANS_SIZE / imgObj.height; context.drawImage(imgObj, 0, 0, w, CANVANS_SIZE); &#125; else if (type &lt; 0) &#123; // å®½ &lt; é«˜ const h = imgObj.height * CANVANS_SIZE / imgObj.width; context.drawImage(imgObj, 0, 0, CANVANS_SIZE, h); &#125; else &#123; context.drawImage(imgObj, 0, 0, CANVANS_SIZE, CANVANS_SIZE);&#125;// canvasè½¬å›¾ç‰‡ const imgUrl = canvas.toDataURL('image/png'); this.setState(&#123; imgUrl:imgUrl &#125;,() =&gt; &#123; target.value = ''; // å¯ä»¥é‡å¤ä¸Šä¼ åŒä¸€å¼ å›¾ç‰‡ &#125;) this.handleMakeImage(imgUrl, decorationCurrent).then(targetUrl =&gt; &#123; this.setState(&#123; targetUrl &#125;); &#125;); &#125; // ä¸Šä¼ å›¾ç‰‡base64è½¬åŒ– handleBase64Img(files)&#123; return new Promise((resolve,reject) =&gt; &#123; let reads = new FileReader(); reads.readAsDataURL(files); reads.onload = function(e) &#123; resolve(this.result); &#125;; &#125;) &#125; // åˆ›å»ºå›¾ç‰‡ createImage(imgUrl) &#123; return new Promise((resolve, rejest) =&gt; &#123; const imgObj = new Image(); imgObj.src = imgUrl; imgObj.onload = (e) =&gt; &#123; resolve(imgObj); &#125;; &#125;); &#125; 4ã€æŠŠå¤´åƒå’ŒæŒ‚ä»¶ç»„åˆåœ¨ä¸€èµ·ï¼Œç”Ÿæˆå›¾ç‰‡é“¾æ¥ï¼ˆå…³é”®ï¼‰ 123456789101112131415161718192021222324252627/** * @param &#123; string &#125; imgUrl -- å¤„ç†çš„ç”¨æˆ·å›¾ç‰‡url * @param &#123; object &#125; decorationCurrent -- å°æŒ‚ä»¶ * */ async handleMakeImage(imgUrl, decorationCurrent)&#123; if (!(imgUrl || decorationCurrent)) &#123; return ''; &#125; const &#123; source, style &#125; = decorationCurrent; const &#123; width, height, top, left &#125; = style; const &#123; canvas &#125; = this.refs; this.clearCanvas(canvas); const context = canvas.getContext('2d'); if (imgUrl) &#123; const bgImg = await this.createImage(imgUrl); context.drawImage(bgImg, 0, 0, bgImg.width, bgImg.height); &#125; if (decorationCurrent &amp;&amp; source) &#123; const imgObj = await this.createImage(source); context.drawImage(imgObj, left, top, width, height); &#125; const targetUrl = canvas.toDataURL('image/png'); return targetUrl;&#125;clearCanvas(targetCanvans) &#123; let ctx = targetCanvans.getContext('2d'); ctx.clearRect(0, 0, targetCanvans.width, targetCanvans.height);&#125; 5ã€å·¦å³åˆ‡æ¢å°æŒ‚ä»¶ 12345678910111213141516171819202122232425handleArrowChange(type)&#123; const &#123; decorationList &#125; = this.state; const length = decorationList.length - 1; let index = 0; this.setState((prvState) =&gt;&#123; if(type === 'LEFT')&#123; // å·¦ index = --prvState.currentIndex &lt; 0 ? length : prvState.currentIndex; &#125; else &#123; // å³ index = ++prvState.currentIndex &gt; length ? 0 : prvState.currentIndex; &#125; return &#123; loading:true, currentIndex:index, decorationCurrent: imgSourceList[index], &#125; &#125;, () =&gt; &#123; const &#123; imgUrl, decorationCurrent&#125; = this.state; this.handleMakeImage(imgUrl, decorationCurrent).then(targetUrl =&gt; &#123; this.setState(&#123; targetUrl, loading:false, &#125;); &#125;); &#125;) &#125;","categories":[],"tags":[{"name":"canvas","slug":"canvas","permalink":"https://wxmac.github.io/tags/canvas/"},{"name":"å°æŒ‚ä»¶","slug":"å°æŒ‚ä»¶","permalink":"https://wxmac.github.io/tags/å°æŒ‚ä»¶/"}]},{"title":"ä¹ã€å°†å…·æœ‰ç›¸åŒå±æ€§çš„å¯¹è±¡åˆå¹¶åˆ°ä¸€ä¸ªæ•°ç»„ä¸­","slug":"9.å±æ€§åˆå¹¶","date":"2019-12-31T16:00:00.000Z","updated":"2020-03-05T03:07:29.053Z","comments":true,"path":"2020/01/01/9.å±æ€§åˆå¹¶/","link":"","permalink":"https://wxmac.github.io/2020/01/01/9.å±æ€§åˆå¹¶/","excerpt":"å°†å…·æœ‰ç›¸åŒå±æ€§çš„å¯¹è±¡åˆå¹¶åˆ°ä¸€ä¸ªæ•°ç»„ä¸­","text":"å°†å…·æœ‰ç›¸åŒå±æ€§çš„å¯¹è±¡åˆå¹¶åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ æ–°å¹´æ–°æ°”è±¡ï¼Œæ–°çš„ä¸€å¹´ï¼Œç»§ç»­åŠ æ²¹ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162let data = [ &#123; 'group_name':'A', 'type': 'apple' &#125;, &#123; 'group_name':'A', 'type': 'almond' &#125;, &#123; 'group_name':'B', 'type': 'banana' &#125;, &#123; 'group_name':'B', 'type': 'bennet' &#125;];//ä»£ç å®ç°// &#123; group_name, type &#125; = currValueconst res = data.reduce( (prv, currValue ) =&gt; &#123; const exist = prv.find(item =&gt; item.type == currValue.group_name); if (exist) &#123; exist[\"data\"].push( currValue ); &#125; else &#123; prv.push(&#123; type: currValue.group_name, data: [ currValue ]&#125;) &#125; return prv;&#125;, []);console.log(res)// æ‰“å°ç»“æœå¦‚ä¸‹ï¼š[ &#123; 'type':A, data:[ &#123; 'group_name':'A', 'type': 'apple' &#125;, &#123; 'group_name':'A', 'type': 'almond' &#125;, ] &#125;, &#123; 'type':B, data:[ &#123; 'group_name':'B', 'type': 'banana' &#125;, &#123; 'group_name':'B', 'type': 'bennet' &#125; ] &#125;]","categories":[],"tags":[{"name":"reduce","slug":"reduce","permalink":"https://wxmac.github.io/tags/reduce/"},{"name":"æ•°ç»„","slug":"æ•°ç»„","permalink":"https://wxmac.github.io/tags/æ•°ç»„/"}]},{"title":"å…«ã€æ‰å¹³åŒ–æ•°ç»„","slug":"8.æ‰å¹³åŒ–æ•°ç»„","date":"2019-12-29T16:00:00.000Z","updated":"2020-02-26T08:45:10.151Z","comments":true,"path":"2019/12/30/8.æ‰å¹³åŒ–æ•°ç»„/","link":"","permalink":"https://wxmac.github.io/2019/12/30/8.æ‰å¹³åŒ–æ•°ç»„/","excerpt":"ä¸€ï¼šArray.prototype.flat()","text":"ä¸€ï¼šArray.prototype.flat() 12345678910111213141516171819202122const arr = [1,2,3,[4,5,6,[7,8]],9,10];// ä¸ä¼ å‚æ•°æ—¶ï¼Œé»˜è®¤â€œæ‹‰å¹³â€ä¸€å±‚arr.flat();// // [1, 2, 3, 4, 5, 6, [7,8], 9, 10]// ä¼ å…¥ä¸€ä¸ªæ•´æ•°å‚æ•°ï¼Œæ•´æ•°å³â€œæ‹‰å¹³â€çš„å±‚æ•°arr.flat(2);// // [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]// Infinity å…³é”®å­—ä½œä¸ºå‚æ•°æ—¶ï¼Œæ— è®ºå¤šå°‘å±‚åµŒå¥—ï¼Œéƒ½ä¼šè½¬ä¸ºä¸€ç»´æ•°ç»„// Infinity(æ— ç©·å¤§)åœ¨ JS ä¸­æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ•°å­—ï¼Œå®ƒçš„ç‰¹æ€§æ˜¯ï¼šå®ƒæ¯”ä»»ä½•æœ‰é™çš„æ•°å­—éƒ½å¤§ã€‚arr.flat(Infinity); // [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]// ä¼ å…¥ &lt;=0 çš„æ•´æ•°å°†è¿”å›åŸæ•°ç»„ï¼Œä¸â€œæ‹‰å¹³â€arr.flat(0);arr.flat(-10); // [1,2,3,[4,5,6,[7,8]],9,10]//å¦‚æœåŸæ•°ç»„æœ‰ç©ºä½ï¼Œflat()æ–¹æ³•ä¼šè¿‡æ»¤ç©ºä½[1,2,3,,].flat()// [1, 2, 3] äºŒï¼šå…¶ä»–æ–¹æ³•å®ç°1.reduce12345const flat = (arr) =&gt; &#123; return arr.reduce((prv,cur) =&gt; &#123; return Array.isArray(cur) ? prv.concat(flat(cur)) : prv.concat(cur) &#125;,[])&#125; 2.ä½¿ç”¨æ ˆçš„æ€æƒ³å®ç° flat å‡½æ•°12345678910111213const flat = (arr) =&gt; &#123; const stack = [...arr]; const res = []; while( stack.length )&#123; const next = stack.pop(); if(Array.isArray(next))&#123; stack.push(...next); &#125; else &#123; res.push(next) &#125; &#125; return res.reverse();&#125; 3.é€šè¿‡ä¼ å…¥æ•´æ•°å‚æ•°æ§åˆ¶â€œæ‹‰å¹³â€å±‚æ•° 123456789const flat = (arr, num = 1) =&gt; &#123; return num &gt; 0 ? arr.reduce( (pre, cur) =&gt; pre.concat(Array.isArray(cur) ? flat(cur, num - 1) : cur),[]) : arr.slice()&#125;#const arr = [1,2,3,[1,2,3,4, [2,3,4]]];#flat(arr,Infinity) MDNå‚è€ƒé“¾æ¥ å…¶ä»–å‚è€ƒ","categories":[],"tags":[{"name":"flat","slug":"flat","permalink":"https://wxmac.github.io/tags/flat/"},{"name":"æ‰å¹³åŒ–æ•°ç»„","slug":"æ‰å¹³åŒ–æ•°ç»„","permalink":"https://wxmac.github.io/tags/æ‰å¹³åŒ–æ•°ç»„/"}]},{"title":"ä¸ƒã€ä¸åˆ·æ–°ä¿®æ”¹urlé“¾æ¥","slug":"7.ä¸åˆ·æ–°ä¿®æ”¹urlé“¾æ¥","date":"2019-12-24T16:00:00.000Z","updated":"2020-02-26T08:44:44.253Z","comments":true,"path":"2019/12/25/7.ä¸åˆ·æ–°ä¿®æ”¹urlé“¾æ¥/","link":"","permalink":"https://wxmac.github.io/2019/12/25/7.ä¸åˆ·æ–°ä¿®æ”¹urlé“¾æ¥/","excerpt":"æœ‰ä¸€ä¸ªè¿™æ ·çš„éœ€æ±‚ï¼Œç‚¹å‡»åˆ†é¡µï¼Œä¸åˆ·æ–°é¡µé¢ã€‚ 123//æˆ‘ä»¬çš„pageå‚æ•°æ˜¯è®°å½•åœ¨urlé‡Œçš„ï¼š https://xxx.html?page=1//å¦‚æœé‡‡å–ç¡¬æ‹¼æ¥çš„æ–¹å¼ï¼Œæ— ç–‘ä¼šåˆ·æ–°é¡µé¢window.location.href = window.location.pathname + `?page=$&#123;page&#125;`","text":"æœ‰ä¸€ä¸ªè¿™æ ·çš„éœ€æ±‚ï¼Œç‚¹å‡»åˆ†é¡µï¼Œä¸åˆ·æ–°é¡µé¢ã€‚ 123//æˆ‘ä»¬çš„pageå‚æ•°æ˜¯è®°å½•åœ¨urlé‡Œçš„ï¼š https://xxx.html?page=1//å¦‚æœé‡‡å–ç¡¬æ‹¼æ¥çš„æ–¹å¼ï¼Œæ— ç–‘ä¼šåˆ·æ–°é¡µé¢window.location.href = window.location.pathname + `?page=$&#123;page&#125;` 1.pushState() æ–¹æ³•MDNé“¾æ¥ ä¸€ä¸ªçŠ¶æ€å¯¹è±¡, ä¸€ä¸ªæ ‡é¢˜ (ç›®å‰è¢«å¿½ç•¥), å’Œ (å¯é€‰çš„) ä¸€ä¸ªURL. è®©æˆ‘ä»¬æ¥è§£é‡Šä¸‹è¿™ä¸‰ä¸ªå‚æ•°è¯¦ç»†å†…å®¹ï¼šï¼š çŠ¶æ€å¯¹è±¡ â€” çŠ¶æ€å¯¹è±¡stateæ˜¯ä¸€ä¸ªJavaScriptå¯¹è±¡ï¼Œé€šè¿‡pushState () åˆ›å»ºæ–°çš„å†å²è®°å½•æ¡ç›®ã€‚æ— è®ºä»€ä¹ˆæ—¶å€™ç”¨æˆ·å¯¼èˆªåˆ°æ–°çš„çŠ¶æ€ï¼Œpopstateäº‹ä»¶å°±ä¼šè¢«è§¦å‘ï¼Œä¸”è¯¥äº‹ä»¶çš„stateå±æ€§åŒ…å«è¯¥å†å²è®°å½•æ¡ç›®çŠ¶æ€å¯¹è±¡çš„å‰¯æœ¬ æ ‡é¢˜ â€” Firefox ç›®å‰å¿½ç•¥è¿™ä¸ªå‚æ•°ï¼Œä½†æœªæ¥å¯èƒ½ä¼šç”¨åˆ°ã€‚åœ¨æ­¤å¤„ä¼ ä¸€ä¸ªç©ºå­—ç¬¦ä¸²åº”è¯¥å¯ä»¥å®‰å…¨çš„é˜²èŒƒæœªæ¥è¿™ä¸ªæ–¹æ³•çš„æ›´æ”¹ã€‚æˆ–è€…ï¼Œä½ å¯ä»¥ä¸ºè·³è½¬çš„stateä¼ é€’ä¸€ä¸ªçŸ­æ ‡é¢˜ URL â€” è¯¥å‚æ•°å®šä¹‰äº†æ–°çš„å†å²URLè®°å½•ã€‚æ³¨æ„ï¼Œè°ƒç”¨ pushState() åæµè§ˆå™¨å¹¶ä¸ä¼šç«‹å³åŠ è½½è¿™ä¸ªURLï¼Œä½†å¯èƒ½ä¼šåœ¨ç¨åæŸäº›æƒ…å†µä¸‹åŠ è½½è¿™ä¸ªURLï¼Œæ¯”å¦‚åœ¨ç”¨æˆ·é‡æ–°æ‰“å¼€æµè§ˆå™¨æ—¶ã€‚æ–°URLä¸å¿…é¡»ä¸ºç»å¯¹è·¯å¾„ã€‚å¦‚æœæ–°URLæ˜¯ç›¸å¯¹è·¯å¾„ï¼Œé‚£ä¹ˆå®ƒå°†è¢«ä½œä¸ºç›¸å¯¹äºå½“å‰URLå¤„ç†ã€‚æ–°URLå¿…é¡»ä¸å½“å‰URLåŒæºï¼Œå¦åˆ™ pushState() ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚è¯¥å‚æ•°æ˜¯å¯é€‰çš„ï¼Œç¼ºçœä¸ºå½“å‰URL 2.pushStateä½¿ç”¨123const pageSize = 2;const url = `$&#123;window.location.pathname&#125;?page=$&#123;pageSize&#125;`window.history.pushState(&#123;url: url&#125;, '', url); ä»¥ä¸Šå°±èƒ½å®ç°é¡µé¢æ— åˆ·æ–°ä¿®æ”¹urlé“¾æ¥ã€‚ 3.è·å–å’Œä¿®æ”¹urlçš„å‡½æ•°ï¼š é¡ºä¾¿æ”¾ä¸Šè·å–å’Œä¿®æ”¹urlçš„å‡½æ•°ï¼šâ†“ è·å–urlå‚æ•°12345function getParams (name) &#123; let reg = new RegExp(\"(^|&amp;)\" + name + \"=([^&amp;]*)(&amp;|$)\"); let r = window.location.search.substr(1).match(reg); if (r != null) return unescape(r[2]); return null;&#125; æ›´æ”¹urlå‚æ•°123456789101112function replaceParamVal(paramName,replaceWith) &#123; var oUrl = window.location.href.toString(); var re = evil('/('+ paramName+'=)([^&amp;]*)/gi'); var nUrl = oUrl.replace(re,paramName+'='+replaceWith); this.location = nUrl; window.location.href=nUrl&#125;function evil(fn) &#123; let Fn = Function; //ä¸€ä¸ªå˜é‡æŒ‡å‘Functionï¼Œé˜²æ­¢æœ‰äº›å‰ç«¯ç¼–è¯‘å·¥å…·æŠ¥é”™ return new Fn('return ' + fn)();&#125;","categories":[],"tags":[{"name":"pushState","slug":"pushState","permalink":"https://wxmac.github.io/tags/pushState/"},{"name":"url","slug":"url","permalink":"https://wxmac.github.io/tags/url/"}]},{"title":"å…­ã€å‡½æ•°èŠ‚æµå’Œé˜²æŠ–","slug":"6.å‡½æ•°èŠ‚æµå’Œé˜²æŠ–","date":"2019-12-22T16:00:00.000Z","updated":"2020-02-26T08:43:29.378Z","comments":true,"path":"2019/12/23/6.å‡½æ•°èŠ‚æµå’Œé˜²æŠ–/","link":"","permalink":"https://wxmac.github.io/2019/12/23/6.å‡½æ•°èŠ‚æµå’Œé˜²æŠ–/","excerpt":"1.èŠ‚æµ æ ¸å¿ƒæ€æƒ³: å¦‚æœåœ¨å®šæ—¶å™¨çš„æ—¶é—´èŒƒå›´å†…å†æ¬¡è§¦å‘ï¼Œåˆ™ä¸äºˆç†ç¬ï¼Œç­‰å½“å‰å®šæ—¶å™¨å®Œæˆï¼Œæ‰èƒ½å¯åŠ¨ä¸‹ä¸€ä¸ªå®šæ—¶å™¨ä»»åŠ¡ã€‚","text":"1.èŠ‚æµ æ ¸å¿ƒæ€æƒ³: å¦‚æœåœ¨å®šæ—¶å™¨çš„æ—¶é—´èŒƒå›´å†…å†æ¬¡è§¦å‘ï¼Œåˆ™ä¸äºˆç†ç¬ï¼Œç­‰å½“å‰å®šæ—¶å™¨å®Œæˆï¼Œæ‰èƒ½å¯åŠ¨ä¸‹ä¸€ä¸ªå®šæ—¶å™¨ä»»åŠ¡ã€‚ 123456789101112const throttle = (fn, delay) =&gt; &#123; let flag = true; return (...args) =&gt; &#123; let context = this; if (!flag) return; flag = false; setTimeout(() =&gt; &#123; fn.apply(context, args); flag = true; &#125;, delay); &#125;;&#125;; 2.é˜²æŠ– æ ¸å¿ƒæ€æƒ³: æ¯æ¬¡äº‹ä»¶è§¦å‘éƒ½åˆ é™¤åŸæ¥çš„å®šæ—¶å™¨ï¼Œå»ºç«‹æ–°çš„å®šæ—¶å™¨ï¼Œåå¤è§¦å‘å‡½æ•°ï¼Œé‚£ä¹ˆä»æœ€åä¸€æ¬¡è§¦å‘å¼€å§‹è®¡æ—¶ã€‚ 123456789101112const debounce = (fn, delay) =&gt; &#123; let timer = null; return (...args) =&gt; &#123; let context = this; if(timer)&#123; clearTimeout(timer) &#125;; timer = setTimeout(function() &#123; fn.apply(context, args); &#125;, delay); &#125;&#125; 3.åˆå¹¶ ç°åœ¨æˆ‘ä»¬å¯ä»¥æŠŠé˜²æŠ–å’ŒèŠ‚æµæ”¾åˆ°ä¸€èµ·ï¼Œæœ‰æ—¶å€™è§¦å‘çš„å¤ªé¢‘ç¹ä¼šå¯¼è‡´ä¸€æ¬¡å“åº”éƒ½æ²¡æœ‰ï¼Œæˆ‘ä»¬å¸Œæœ›åˆ°äº†å›ºå®šçš„æ—¶é—´å¿…é¡»ç»™ç”¨æˆ·ä¸€ä¸ªå“åº”ã€‚ 12345678910111213const throttle = (fn, delay) =&gt; &#123; let flag = true, timer = null; return function (...args) &#123; let context = this; if( !flag )&#123; return &#125;; clearTimeout(timer); flag = false; timer = setTimeout(function() &#123; flag = true; fn.apply(context, args); &#125;, delay); &#125;&#125; 4.å®è·µ â€“ å›¾ç‰‡æ‡’åŠ è½½clientHeight ã€scrollTop ã€ offsetTop æ€è·¯ï¼š ç»™imgä¸€ä¸ªé»˜è®¤å›¾ç‰‡ï¼Œä»¥åŠdata-srcå±æ€§ï¼Œå½“é¡µé¢æ»šåŠ¨åˆ°å¯¹åº”imgå…ƒç´ çš„æ—¶å€™ï¼ŒæŠŠdata-srcèµ‹å€¼ç»™srcã€‚12345678910111213141516171819202122232425//ç»™imgä¸€ä¸ªé»˜è®¤å›¾ç‰‡&lt;img src=\"default.png\" data-src=\"xxx/img.png\" /&gt;//é€šè¿‡ç›‘å¬ scroll äº‹ä»¶æ¥åˆ¤æ–­å›¾ç‰‡æ˜¯å¦åˆ°è¾¾è§†å£:let img = document.getElementsByTagName(\"img\");let num = img.length;let count = 0; //è®¡æ•°å™¨ï¼Œä»ç¬¬ä¸€å¼ å›¾ç‰‡å¼€å§‹è®¡lazyload(); //é¦–æ¬¡åŠ è½½window.addEventListener('scroll', throttle(lazyload, 200)); //èŠ‚æµfunction lazyload() &#123; let viewHeight = document.documentElement.clientHeight;// è§†å£é«˜åº¦ let scrollTop = document.documentElement.scrollTop || document.body.scrollTop;//æ»šåŠ¨æ¡æ»šåŠ¨çš„é«˜åº¦ for(let i = count; i &lt; num; i++) &#123; //å…ƒç´ ç°åœ¨å·²ç»å‡ºç°åœ¨è§†å£ä¸­ if( img[i].offsetTop &lt; scrollHeight + viewHeight ) &#123; if(img[i].getAttribute('src') !== 'default.png') continue; //å¦‚æœsrcä¸æ˜¯default.png'ï¼Œè·³è¿‡å¾ªç¯ï¼Œç»§ç»­å¾€ä¸‹å¾ªç¯ img[i].src = img[i].getAttribute(\"data-src\"); count ++; &#125; &#125;&#125;//scrollTop + clientHeight === scrollHeight å³è§¦å‘ä¸‹æ‹‰åŠ è½½çš„æ¡ä»¶","categories":[],"tags":[{"name":"å‡½æ•°","slug":"å‡½æ•°","permalink":"https://wxmac.github.io/tags/å‡½æ•°/"},{"name":"èŠ‚æµ/é˜²æŠ–","slug":"èŠ‚æµ-é˜²æŠ–","permalink":"https://wxmac.github.io/tags/èŠ‚æµ-é˜²æŠ–/"}]},{"title":"äº”ã€js æ·±æ‹·è´ä¸æµ…æ‹·è´","slug":"5.js æ·±æ‹·è´ä¸æµ…æ‹·è´","date":"2019-12-17T16:00:00.000Z","updated":"2020-02-26T08:43:12.573Z","comments":true,"path":"2019/12/18/5.js æ·±æ‹·è´ä¸æµ…æ‹·è´/","link":"","permalink":"https://wxmac.github.io/2019/12/18/5.js æ·±æ‹·è´ä¸æµ…æ‹·è´/","excerpt":"1.åŸºæœ¬æ•°æ®ç±»å‹å’Œå¼•ç”¨æ•°æ®ç±»å‹ æ•°æ®åˆ†ä¸ºåŸºæœ¬æ•°æ®ç±»å‹å’Œå¼•ç”¨æ•°æ®ç±»å‹ åŸºæœ¬æ•°æ®ç±»å‹: 1Stringã€Numberã€Booleanã€Nullã€Undefinedã€Symbolã€BigInt(?) å¼•ç”¨æ•°æ®ç±»å‹: 1Arrayã€Object","text":"1.åŸºæœ¬æ•°æ®ç±»å‹å’Œå¼•ç”¨æ•°æ®ç±»å‹ æ•°æ®åˆ†ä¸ºåŸºæœ¬æ•°æ®ç±»å‹å’Œå¼•ç”¨æ•°æ®ç±»å‹ åŸºæœ¬æ•°æ®ç±»å‹: 1Stringã€Numberã€Booleanã€Nullã€Undefinedã€Symbolã€BigInt(?) å¼•ç”¨æ•°æ®ç±»å‹: 1Arrayã€Object 2.æ¦‚å¿µ æµ…æ‹·è´ï¼š 1ä»…ä»…å¤åˆ¶å¯¹è±¡çš„å¼•ç”¨ï¼Œè€Œä¸æ˜¯å¯¹è±¡æœ¬èº« æ·±æ‹·è´ï¼š 1æŠŠå¤åˆ¶çš„å¯¹è±¡æ‰€å¼•ç”¨çš„å…¨éƒ¨å¯¹è±¡éƒ½å¤åˆ¶ä¸€é ç®€å•æ¥è¯´ï¼Œæµ…æ‹·è´å°±æ˜¯è¿™ä¸ªäººçš„å½±å­ï¼Œæ·±æ‹·è´å°±æ˜¯å¤åˆ¶äº†è¿™ä¸ªäººã€‚ 3.æ–¹æ³•æµ…æ‹·è´ 123456789const shallowClone = (obj) =&gt; &#123; const result = []; for (let i in obj) &#123; if (obj.hasOwnProperty(i)) &#123; result[i] = obj[i]; &#125; &#125; return result;&#125; Objectçš„ hasOwnProperty()æ–¹æ³•è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œåˆ¤æ–­å¯¹è±¡æ˜¯å¦åŒ…å«ç‰¹å®šçš„è‡ªèº«ï¼ˆéç»§æ‰¿ï¼‰å±æ€§,hasOwnProperty()æ–¹æ³•æ¥å¿½ç•¥ç»§æ‰¿å±æ€§.ã€‚ object.assign() æŠŠä»»æ„å¤šä¸ªçš„æºå¯¹è±¡è‡ªèº«çš„å¯æšä¸¾å±æ€§æ‹·è´ç»™ç›®æ ‡å¯¹è±¡ï¼Œç„¶åè¿”å›ç›®æ ‡å¯¹è±¡ Array.prototype.concat() æ•°ç»„çš„ä¸€ä¸ªå†…ç½®æ–¹æ³•ï¼Œç”¨æˆ·åˆå¹¶ä¸¤ä¸ªæˆ–è€…å¤šä¸ªæ•°ç»„ï¼Œä¸ä¼šæ”¹å˜ç°æœ‰æ•°ç»„ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªæ–°æ•°ç»„ Array.prototype.slice() æ•°ç»„çš„ä¸€ä¸ªå†…ç½®æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œä¸ä¼šæ”¹å˜åŸæ•°ç»„ objå±•å¼€è¿ç®—ç¬¦ [â€¦]ä»¥ä¸Šå‡ ç§æ–¹å¼ä¹Ÿå¯ä»¥æ·±æ‹·è´ 1234567891011121314const deepClone = (obj) =&gt; &#123; let result = Array.isArray(obj) ? [] : &#123;&#125;; for( let i in obj )&#123; if( obj.hasOwnProperty(i) )&#123; if( typeof obj[i] === 'object' &amp;&amp; obj[i] !== null)&#123; result[i] = deepClone(obj[i]) //é€’å½’å¤åˆ¶ &#125; else &#123; result[i] = obj[i] &#125; &#125; &#125; return result;&#125;//Objectçš„hasOwnProperty()æ–¹æ³•è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œåˆ¤æ–­å¯¹è±¡æ˜¯å¦åŒ…å«ç‰¹å®šçš„è‡ªèº«ï¼ˆéç»§æ‰¿ï¼‰å±æ€§ã€‚hasOwnProperty()æ–¹æ³•æ¥å¿½ç•¥ç»§æ‰¿å±æ€§ JSON.stringfy()å’ŒJSON.parse()ä¼šå¿½ç•¥undefinedã€functionã€symbolï¼Œå¯¼è‡´å±æ€§ä¸¢å¤±ã€‚","categories":[],"tags":[{"name":"js","slug":"js","permalink":"https://wxmac.github.io/tags/js/"},{"name":"å°æŠ€å·§","slug":"å°æŠ€å·§","permalink":"https://wxmac.github.io/tags/å°æŠ€å·§/"},{"name":"æ‹·è´","slug":"æ‹·è´","permalink":"https://wxmac.github.io/tags/æ‹·è´/"}]},{"title":"å››ã€react & html2canvas ç”Ÿæˆå›¾ç‰‡ä¸‹è½½å®è·µ","slug":"4.react & html2canvaså®è·µ","date":"2019-12-15T16:00:00.000Z","updated":"2020-02-26T08:42:11.273Z","comments":true,"path":"2019/12/16/4.react & html2canvaså®è·µ/","link":"","permalink":"https://wxmac.github.io/2019/12/16/4.react & html2canvaså®è·µ/","excerpt":"html2canvasçš„é€‰æ‹© ç°åœ¨ä¸€èˆ¬ç”Ÿæˆå›¾ç‰‡æœ‰å‰ç«¯å¤„ç†å’Œåç«¯å¤„ç†ä¸¤ç§æ–¹å¼ï¼Œåç«¯ç”Ÿæˆçš„æ–¹æ¡ˆä¸éœ€è¦å‰ç«¯å‡ºåŠ›ï¼Œåªéœ€è¦æ‹¿è·¯å¾„æ¸²æŸ“ï¼Œä½†æ˜¯ä¼šå‡ºç°æ•°æ®å»¶æ—¶ï¼Œæ¨¡æ¿æ›´æ¢å›°éš¾ç­‰é—®é¢˜ï¼Œå‡ºäºçµæ´»æ€§å’Œå‡å°‘åç«¯å·¥ä½œé‡è€ƒè™‘ï¼Œæˆ‘ä»¬é‡‡å– html2canvas ç»˜åˆ¶é¡µé¢ã€‚ html2canvas npmhtml2canvas ä»‹ç»","text":"html2canvasçš„é€‰æ‹© ç°åœ¨ä¸€èˆ¬ç”Ÿæˆå›¾ç‰‡æœ‰å‰ç«¯å¤„ç†å’Œåç«¯å¤„ç†ä¸¤ç§æ–¹å¼ï¼Œåç«¯ç”Ÿæˆçš„æ–¹æ¡ˆä¸éœ€è¦å‰ç«¯å‡ºåŠ›ï¼Œåªéœ€è¦æ‹¿è·¯å¾„æ¸²æŸ“ï¼Œä½†æ˜¯ä¼šå‡ºç°æ•°æ®å»¶æ—¶ï¼Œæ¨¡æ¿æ›´æ¢å›°éš¾ç­‰é—®é¢˜ï¼Œå‡ºäºçµæ´»æ€§å’Œå‡å°‘åç«¯å·¥ä½œé‡è€ƒè™‘ï¼Œæˆ‘ä»¬é‡‡å– html2canvas ç»˜åˆ¶é¡µé¢ã€‚ html2canvas npmhtml2canvas ä»‹ç» 1.åœ¨reactä¸­çš„ä½¿ç”¨123456789101112131415//å®‰è£…npm install --save html2canvasoryarn add html2canvas//å¼•å…¥import html2canvas from 'html2canvas';//ä½¿ç”¨html2canvas(document.body).then(function(canvas) &#123; document.body.appendChild(canvas);&#125;);//å¦‚æœæƒ³ç”Ÿæˆä¸€éƒ¨åˆ†é¡µé¢çš„è¯ï¼Œhtml2canvaså¯ä»¥æ¢æˆ this.refs.demo//&lt;div ref=\"demo\"&gt;&lt;/div&gt; ä¸Šé¢å°±ä¼šæŠŠé¡µé¢ç®€å•çš„ç»˜åˆ¶å‡ºæ¥ã€‚ 2.canvas ä¸‹è½½12345678910html2canvas(this.refs.demo).then(function(canvas) &#123; const imgUrl = canvas.toDataURL(\"image/png\"); // è·å–å›¾ç‰‡çš„url const elA = document.createElement(\"a\"); elA.download = +new Date() + \".png\"; elA.href = imgUrl ; elA.click(); elA.remove();&#125;);//å¾®ä¿¡ä¸­ä¸èƒ½ä¸‹è½½å›¾ç‰‡ï¼Œå¯ä»¥å±•ç¤ºå›¾ç‰‡å¹¶æç¤ºç”¨æˆ·é•¿æŒ‰ä¿å­˜å›¾ç‰‡ 3.å‚è€ƒ å‚è€ƒ1 4.canvasæ·»åŠ å›¾ç‰‡12345678910111213141516171819202122const SIZE = 300;/** @type &#123;HTMLCanvasElement&#125; */ const canvas = this.refs.canvas;const ctx = canvas.getContext('2d');const img = new Image()img.crossOrigin = \"anonymous\";img.src = 'å›¾ç‰‡è·¯å¾„';img.onload = () =&gt; &#123; const w = img.width; const h = img.height; const type = w - h if(type &gt; 0)&#123; const width = w * ( SIZE / h ) ctx.drawImage(img, 0, 0, width , SIZE) &#125; else if(type &lt; 0) &#123; const hieght = h * ( SIZE / w ) ctx.drawImage(img, 0, 0, SIZE , hieght) &#125; else &#123; ctx.drawImage(img, 0, 0, SIZE , SIZE) &#125;&#125;","categories":[],"tags":[{"name":"html2canvas","slug":"html2canvas","permalink":"https://wxmac.github.io/tags/html2canvas/"},{"name":"js","slug":"js","permalink":"https://wxmac.github.io/tags/js/"},{"name":"react","slug":"react","permalink":"https://wxmac.github.io/tags/react/"}]},{"title":"ä¸‰ - ä¸€ã€ä¸€äº›è‡ªå·±åœ¨ä½¿ç”¨cssã€jsæŠ€å·§","slug":"3-1.ä¸€äº›è‡ªå·±åœ¨jsæŠ€å·§","date":"2019-12-11T16:00:00.000Z","updated":"2020-03-12T09:51:02.160Z","comments":true,"path":"2019/12/12/3-1.ä¸€äº›è‡ªå·±åœ¨jsæŠ€å·§/","link":"","permalink":"https://wxmac.github.io/2019/12/12/3-1.ä¸€äº›è‡ªå·±åœ¨jsæŠ€å·§/","excerpt":"","text":"ä¸€ã€JS â€“ æ›´æ–°ä¸­åˆ¤æ–­ val æ˜¯å¦å­˜åœ¨123456789101112131415161718192021222324 1. for(let item in data)&#123; if(!data[item])&#123; data[item] = '--'; &#125; &#125; // æ˜¯å¦æ˜¯ç©ºå¯¹è±¡ï¼Œ&#123;&#125;è¿”å›true 2. const isEmptyObject = function( obj ) &#123;var name;for ( name in obj ) &#123; return false;&#125;return true; &#125;; 3. const page = &#123; user:'111', cityInfo:&#123; city:'hz', code:'111' &#125; &#125;; const name = ( (page || &#123;&#125;).cityInfo || &#123;&#125; ).city || '111'; console.log(name) æ»‘åŠ¨å›ºå®šè·ç¦»æ˜¾ç¤º123456789101112 var oNav = document.getElementById(\"Q-nav\");window.onscroll = function()&#123; var h = 168; var sTop = document.body.scrollTop || document.documentElement.scrollTop; if( sTop &gt; h )&#123; //å¸é¡¶ å›ºå®šå®šä½ å¹¶ä¸” top è®¾ç½®ä¸º 0 oNav.style.position = \"fixed\"; oNav.style.top = 0; &#125;else&#123; oNav.style.position = \"static\"; &#125;&#125; ä¸Šä¼ å›¾ç‰‡å›å¡«12345let reads = new FileReader();reads.readAsDataURL(files);reads.onload = function(e) &#123; document.getElementById('ID').src = this.result;&#125;; è·å–urlå‚æ•°12345function getParams (name) &#123; let reg = new RegExp(\"(^|&amp;)\" + name + \"=([^&amp;]*)(&amp;|$)\"); let r = window.location.search.substr(1).match(reg); if (r != null) return unescape(r[2]); return null;&#125; æ›´æ”¹urlå‚æ•°123456789101112function replaceParamVal(paramName,replaceWith) &#123; var oUrl = window.location.href.toString(); var re = evil('/('+ paramName+'=)([^&amp;]*)/gi'); var nUrl = oUrl.replace(re,paramName+'='+replaceWith); this.location = nUrl; window.location.href=nUrl&#125;function evil(fn) &#123; let Fn = Function; //ä¸€ä¸ªå˜é‡æŒ‡å‘Functionï¼Œé˜²æ­¢æœ‰äº›å‰ç«¯ç¼–è¯‘å·¥å…·æŠ¥é”™ return new Fn('return ' + fn)();&#125; ios window.history.back() è‡´ä½¿ localStorageä¸åŒæ­¥123456window.onpageshow = function(event) &#123; if (event.persisted || (window.performance &amp;&amp; window.performance.navigation.type == 2)) &#123; window.location.reload(); &#125;&#125; textatea é«˜åº¦è‡ªé€‚åº”123456789101112//jq:el.on('input', function () &#123; const height = $(this).scrollTop() + $(this).prop(\"scrollHeight\") + \"px\"; $(this).height(height)&#125;)//react :const el = this.refs.remark;el.style.height = 'auto'; if(el.scrollHeight &gt;= el.offsetHeight )&#123; //å¦‚æœé«˜åº¦ä¸å¤Ÿï¼Œå†é‡æ–°è®¾ç½® el.style.height = el.scrollHeight + 'px'&#125; æŸ¥æ‰¾é‡å¤å­—ç¬¦123456let red= 'hjqjbsaxhhhh'; let obj = &#123;&#125;;for (var i = 0; i&lt;red.length; i++) &#123; obj[red[i]] = ++obj[red[i]] || 1 ; console.log(red[i]) &#125; å®‰å“é”®ç›˜ç½®é¡¶æŒ‰é’®(å®‰å“ä¼šå‡ºç°é”®ç›˜å‡ºæ¥,æŒ‰é’®åœ¨ä¸‹é¢æ²¡ä¸Šæ¥çš„æƒ…å†µ)12345678910111213function handleSetBtnPosition()&#123; let win_h = $(window).height(); window.addEventListener('resize', function () &#123; var u = navigator.userAgent; if (u.indexOf('Android') &gt; -1 || u.indexOf('Linux') &gt; -1) &#123; if($(window).height() &lt; win_h)&#123; $(\"#submit_btn\").hide(); &#125;else&#123; $(\"#submit_btn\").show(); &#125; &#125; &#125;);&#125; æ‰‹æœºå·è‡ªåŠ¨æ·»åŠ ç©ºæ ¼1\"13116700755\".replace(/(?&lt;=^\\d&#123;3&#125;(\\d&#123;4&#125;)*)(?!$)/g, ' ') ---&gt; \"131 1670 0755\" è·å–keyå’Œvalï¼Œç»„æˆæ–°å¯¹è±¡123456789101112131415161718192021222324252627282930313233343536const cities = [ &#123; name: 'Paris', visited: 'no' &#125;, &#123; name: 'Lyon', visited: 'no' &#125;, &#123; name: 'Marseille', visited: 'yes' &#125;, &#123; name: 'Rome', visited: 'yes' &#125;, &#123; name: 'Milan', visited: 'no' &#125;, &#123; name: 'Palermo', visited: 'yes' &#125;, &#123; name: 'Genoa', visited: 'yes' &#125;, &#123; name: 'Berlin', visited: 'no' &#125;, &#123; name: 'Hamburg', visited: 'yes' &#125;, &#123; name: 'New York', visited: 'yes' &#125;]; const result = cities.reduce((prv, item) =&gt; &#123; return &#123; ...prv, [item.name]: item.visited &#125;&#125;, &#123;&#125;);console.log(result);/** æ‰“å°ç»“æœï¼š &#123; Paris: \"no\", Lyon: \"no\", Marseille: \"yes\", Rome: \"yes\", Milan: \"no\", Palermo: \"yes\", Genoa: \"yes\", Berlin: \"no\", Hamburg: \"yes\", New York: \"yes\" &#125;**/ reactå¤šä¸ªå€’è®¡æ—¶1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556// åˆå§‹åŒ–å€’è®¡æ—¶handleTimeInit(data)&#123; data.map((item,index) =&gt; &#123; let timer = ''; if(Number(item.lost_dttm_second) &gt; 0)&#123; this.handleResetTime(timer, Number(item.lost_dttm_second),index ) &#125; &#125;) &#125;handleResetTime(timer, delay, index)&#123; const _this = this; let time = Math.floor(delay); timer = setInterval( function () &#123; let _time = --time; _this.handleFormatTime(_time,index); if(time &lt;= 0)&#123; clearInterval(timer) &#125; &#125;,1000);&#125;handleFormatTime(time,index)&#123; var hour = parseInt(time / 3600, 10); var day = parseInt(hour/24); var min = parseInt((time - (hour * 3600)) / 60, 10); // var sec = time % 60; min = min &lt; 10 ? ('0' + min) : min; hour = hour &lt; 10 ? ('0' + hour) : hour; day = day &lt; 10 ? ('0' + day) : day; // sec = sec &lt; 10 ? ('0' + sec) : sec; // é‡æ–°è®¾ç½®æ—¶é—´ const &#123; couponList &#125; = this.state; couponList[index].day = day couponList[index].hour = parseInt(hour % 24); // ï¼ï¼ï¼ couponList[index].min = min this.setState(&#123; couponList: couponList &#125;)&#125;/*** * æ¯«ç§’å€’è®¡æ—¶å°æŠ€å·§ -- æ¯«ç§’å€¼è·Ÿåœ¨å€’è®¡æ—¶åé¢ * */ let newTime = 99;setInterval(() =&gt; &#123; const newTime2 = newTime--; if(newTime2 &lt;= 0)&#123; newTime = 99 &#125; this.setState(&#123; newTime: newTime2 &#125;)&#125;,10) åˆ©ç”¨æ•°ç»„è·å–å½“å‰æ—¶é—´123456789101112131415 const showTime = () =&gt; &#123; let date = new Date();let h = date.getHours();let m = date.getMinutes(); let s = date.getSeconds(); let arrTime = [ h &lt; 10 ? 0 : parseInt( h/10 ), h % 10, m &lt; 10 ? 0 : parseInt( m/10 ), m % 10, s &lt; 10 ? 0 : parseInt( s/10 ), s % 10, ]; return arrTime; // è¿”å›çš„æ˜¯æ—¶é—´æ•°ç»„ï¼Œä¾‹[ 1,2,0,0,0,0 ] å°±æ˜¯12:00:00 &#125; å¤„ç†å›¾ç‰‡å‡ºé”™ï¼Œæ›¿æ¢é»˜è®¤å›¾ç‰‡123456document.addEventListener(\"error\", function (e) &#123; let elem = e.target; if (elem.tagName.toLowerCase() === 'img') &#123; elem.src = 'https://res.youbeichefu.com/upload/head/default.png'; &#125;&#125;, true);","categories":[],"tags":[{"name":"js","slug":"js","permalink":"https://wxmac.github.io/tags/js/"},{"name":"å°æŠ€å·§","slug":"å°æŠ€å·§","permalink":"https://wxmac.github.io/tags/å°æŠ€å·§/"}]},{"title":"ä¸‰ã€ä¸€äº›è‡ªå·±åœ¨ä½¿ç”¨cssæŠ€å·§","slug":"3.ä¸€äº›è‡ªå·±åœ¨ä½¿ç”¨cssæŠ€å·§","date":"2019-12-11T16:00:00.000Z","updated":"2020-03-12T09:51:37.255Z","comments":true,"path":"2019/12/12/3.ä¸€äº›è‡ªå·±åœ¨ä½¿ç”¨cssæŠ€å·§/","link":"","permalink":"https://wxmac.github.io/2019/12/12/3.ä¸€äº›è‡ªå·±åœ¨ä½¿ç”¨cssæŠ€å·§/","excerpt":"ä¸€ã€CSS â€“ æ›´æ–°ä¸­","text":"ä¸€ã€CSS â€“ æ›´æ–°ä¸­ çœç•¥123456789101112131415//å•è¡Œçœç•¥width: 100px;white-space: nowrap;text-overflow: ellipsis;overflow: hidden;//å¤šè¡Œçœç•¥width: 100px;height:50px;line-height: 30px;overflow: hidden;text-overflow: ellipsis;display: -webkit-box;-webkit-line-clamp: 3; //å—å…ƒç´ æ˜¾ç¤ºçš„æ–‡æœ¬çš„è¡Œæ•°ã€‚-webkit-box-orient: vertical; ioså…³é—­è¾“å…¥æ¡†å†…éƒ¨é˜´å½±1-webkit-appearance: none; ç”¨æˆ·è®¾ç½®å­—å·æ”¾å¤§æˆ–è€…ç¼©å°å¯¼è‡´é¡µé¢å¸ƒå±€é”™è¯¯ â€“ è®¾ç½®å­—ä½“ç¦æ­¢ç¼©æ”¾123-webkit-text-size-adjust: 100% !important;text-size-adjust: 100% !important;-moz-text-size-adjust: 100% !important; ä¸‹ç®­å¤´ 12345width: 7px;height: 7px;border-bottom: 2px solid #bdbdbd;border-right: 2px solid #bdbdbd;transform: rotate(45deg); å®å¿ƒä¸‰è§’123456789 width: 0; height: 0;border-width: .1rem;border-style: solid;border-color:#ccc transparent transparent transparent;position: absolute;right: -.3rem;top: 60%;transform: translateY(-50%) æ›´æ¢è°·æ­Œæ»šåŠ¨æ¡æ ·å¼ï¼š12::-webkit-scrollbar-thumb&#123;&#125; //æ›´æ”¹è°·æ­Œæ»šåŠ¨æ¡æ ·å¼::-webkit-scrollbar&#123;&#125; //æ›´æ”¹è°·æ­Œæ»šåŠ¨æ¡èƒŒæ™¯æ ·å¼ æ”¹å˜placeholderçš„é¢œè‰²123::-moz-placeholder &#123; color: #CDCDCD; &#125;::-webkit-input-placeholder &#123; color:#CDCDCD; &#125;:-ms-input-placeholder &#123; color:#CDCDCD; &#125; é˜´å½±ï¼š12345678//å·¦box-shadow: -7px 0 5px -5px #333;//å³box-shadow: 7px 0 5px -5px #333;//ä¸Šbox-shadow: 0px -7px 5px -5px #333;//ä¸‹box-shadow: 0px 7px 5px -5px #333; å•è¡Œæ–‡å­—å±…ä¸­ï¼Œå¤šè¡Œæ–‡å­—å±…å·¦1234.text&#123; display: flex; justify-content: center;&#125; lesså®ç°loading1234567891011121314151617181920212223242526272829303132.loader &#123; position: relative; transition: background-color .3s; pointer-events: none; &amp;:after &#123; content: ''; position: absolute; width: 20px; height: 20px; animation: loadingCircle infinite .75s linear; border: 2px solid #888; border-top-color: transparent; border-radius: 50%; z-index: 10; top: 0; bottom: 0; left: 0; right: 0; margin: auto; &#125;&#125;.hideLoader&#123; display: none;&#125;@keyframes loadingCircle &#123; 0% &#123; transform: rotate(0); &#125; 100% &#123; transform: rotate(360deg); &#125; &#125; input åŠŸèƒ½ å¼¹å‡ºæ•°å­—é”®ç›˜ 1234// æœ‰\"#\" \"*\"ç¬¦å·è¾“å…¥ &lt;input type=\"tel\" /&gt;// çº¯æ•°å­— &lt;input pattern=\"\\d*\" /&gt; è°ƒç”¨ç³»ç»Ÿçš„æŸäº›åŠŸèƒ½ 12345678910111213// å¤šé€‰ &lt;input type=\"file\" multiple /&gt;// é€‰æ‹©è§†é¢‘æˆ–è€…æ‹æ‘„è§†é¢‘ &lt;input type=\"file\" accept=\"video/*\" /&gt;// é€‰æ‹©ç…§ç‰‡æˆ–è€…æ‹æ‘„ç…§ç‰‡&lt;input type=\"file\" accept=\"image/*\" /&gt;// é™„åŠ // å‘é€é‚®ä»¶&lt;a href=\"mailto:839626987@qq.com\"&gt;å‘é‚®ä»¶ç»™ï¼š13116700755@163.com&lt;/a&gt;// å‘é€çŸ­ä¿¡ &lt;a href=\"sms:10086\"&gt;å‘çŸ­ä¿¡ç»™: 10086&lt;/a&gt;// æ‹¨å·&lt;a href=\"tel:10086\"&gt;æ‰“ç”µè¯ç»™: 10086&lt;/a&gt; flexå¸ƒå±€æœ€åä¸€è¡Œåˆ—è¡¨å·¦å¯¹é½çš„æ–¹æ³•12345678910111213.container &#123; display: flex; justify-content: space-between; flex-wrap: wrap; .list &#123; background-color: skyblue; margin: 10px; &#125; &amp;::after &#123; content: ''; flex: auto; /* æˆ–è€…flex: 1 */ &#125;&#125; åœ†é”¥æ¸å˜1234width: 5em;height: 5em;border-radius: 50%;background: conic-gradient(red, 70%, #111 0); //åœ†é”¥æ¸å˜ éšœçœ¼æ³•ï¼š1234567891011&amp;:after&#123; content: ''; position: absolute; width: 90%; height: 90%; background: #111; border-radius: inherit; top: 50%; left: 50%; transform: translate(-50%,-50%);&#125; cssæ³¢æµªæ•ˆæœ12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758.waveBox&#123; .wave&#123; width: 100%; height:100%; background: skyblue; margin: 2rem auto; position: relative; overflow: hidden; &amp;:after, &amp;:before&#123; content: ''; position: absolute; width: 5rem; height: 5rem; left: 50%; background: #fff; animation-name: rotate; animation-iteration-count: infinite; animation-timing-function: linear; &#125; &amp;:after&#123; top: -4.5rem; border-radius: 45%; animation-duration: 10s; &#125; &amp;:before&#123; top: -4.4rem; border-radius: 47%; opacity: .5; animation-duration: 10s; &#125; &#125; @keyframes rotate &#123; 0% &#123; transform: translate(-50%, 0) rotateZ(0deg); &#125; 50% &#123; transform: translate(-50%, -5%) rotateZ(180deg); &#125; 100% &#123; transform: translate(-50%, 0%) rotateZ(360deg); &#125; &#125;&#125;/*const height = 4;const top = height &gt; 4 ? height - 4 : 0;const res = &#123; width: '2rem', height: `$&#123;height&#125;rem`, position: 'absolute', top: `-$&#123;top&#125;rem`,&#125;*/// html&lt;div style=&#123; res &#125; className=&#123;styleCss.waveBox&#125;&gt; &lt;div className=&#123;styleCss.wave&#125;&gt;&lt;/div&gt;&lt;/div&gt;","categories":[],"tags":[{"name":"css","slug":"css","permalink":"https://wxmac.github.io/tags/css/"},{"name":"å°æŠ€å·§","slug":"å°æŠ€å·§","permalink":"https://wxmac.github.io/tags/å°æŠ€å·§/"}]},{"title":"äºŒã€vsCodeç»ˆç«¯æ‰“å¼€é—®é¢˜","slug":"2.vsCodeç»ˆç«¯æ‰“å¼€é—®é¢˜","date":"2019-12-08T16:00:00.000Z","updated":"2020-02-26T08:41:35.749Z","comments":true,"path":"2019/12/09/2.vsCodeç»ˆç«¯æ‰“å¼€é—®é¢˜/","link":"","permalink":"https://wxmac.github.io/2019/12/09/2.vsCodeç»ˆç«¯æ‰“å¼€é—®é¢˜/","excerpt":"ä¹‹å‰æ‰“å¼€vscodeæ—¶ï¼ŒæŠ¥ ç»ˆç«¯è¿›ç¨‹å‘½ä»¤â€/bin/bash -lâ€æ— æ³•å¯åŠ¨ (é€€å‡ºä»£ç : 1)ï¼›","text":"ä¹‹å‰æ‰“å¼€vscodeæ—¶ï¼ŒæŠ¥ ç»ˆç«¯è¿›ç¨‹å‘½ä»¤â€/bin/bash -lâ€æ— æ³•å¯åŠ¨ (é€€å‡ºä»£ç : 1)ï¼› å…¶ä»–æŠ¥é”™ä¹Ÿå¯ä»¥å‚è€ƒä¸€ä¸‹ï¼š æœ‰ä»¥ä¸‹å‡ ä¸ªè§£å†³æ€è·¯ é‡è£…vscodeï¼›ï¼ˆæˆ‘æ˜¯è¿™ä¸ªæ–¹æ³•è§£å†³çš„ï¼‰ å› ä¸º VSCode å·¥ä½œåŒºçš„æ–‡ä»¶å¤¹æœ‰å˜æ›´ï¼ˆåˆ é™¤ã€ç§»åŠ¨ç­‰ï¼‰ï¼Œå¯¼è‡´ VSCode æ‰“å¼€ç»ˆç«¯æ—¶ï¼Œæ‰¾ä¸åˆ°æ­¤æ–‡ä»¶å¤¹è€ŒæŠ¥é”™ï¼› é…ç½®ä¸‹ git è·¯å¾„ä¸å¯¹ï¼Œé‡æ–°é…ç½®ä¸€ä¸‹gitï¼›åœ¨è®¾ç½®é‡Œä¿®æ”¹ â€œterminal.integrated.shell.windowsâ€: â€œgitè·¯å¾„base.exeâ€ï¼› ç”¨ç®¡ç†å‘˜çš„æƒé™æ¥æ‰§è¡Œvscodeï¼Œè¦ä¸ç„¶å®ƒæ²¡æœ‰æƒé™ä½¿ç”¨cmd;å³å‡»å¿«æ·é”®ç‚¹å‡»å±æ€§ç„¶åé€‰æ‹©ä»¥ç®¡ç†å‘˜çš„èº«ä»½è¿è¡Œ githubè§£å†³æ€è·¯","categories":[],"tags":[{"name":"vscode","slug":"vscode","permalink":"https://wxmac.github.io/tags/vscode/"}]},{"title":"ä¸€ã€React å¤šé¡µé¢æ‰“åŒ…","slug":"1.react å¤šé¡µé¢æ‰“åŒ…","date":"2019-12-05T16:00:00.000Z","updated":"2020-02-26T08:41:21.516Z","comments":true,"path":"2019/12/06/1.react å¤šé¡µé¢æ‰“åŒ…/","link":"","permalink":"https://wxmac.github.io/2019/12/06/1.react å¤šé¡µé¢æ‰“åŒ…/","excerpt":"ç¼˜ç”± ä¹‹å‰æˆ‘ä»¬ç”¨çš„æ˜¯reactå•é¡µé¢æ‰“åŒ…ï¼Œæ–¹ä¾¿æ˜¯æ–¹ä¾¿ï¼Œå¼€åŒ…å³ç”¨ã€‚ä½†æ˜¯å› ä¸ºæˆ‘ä»¬åšçš„æ˜¯æ´»åŠ¨é¡µé¢ï¼Œä¸€èˆ¬æ¯æ¬¡éƒ½åªæœ‰ä¸€ä¸ªé¡µé¢ï¼Œä¸ä»…è¦å»ºå¤§é‡çš„è·¯ç”±ï¼Œè€Œä¸”èµ„æºå†—æ‚ï¼Œå³ä½¿å·²ç»åšäº†èµ„æºåˆ†å‰²ã€‚è¿˜æœ‰åšå¤šé¡µé¢æœ€é‡è¦çš„åŸå› æ˜¯ï¼šå•é¡µé¢æ‰“åŒ…ï¼Œä¼šå½±å“æ‰€æœ‰çš„é¡µé¢ï¼Œå¦‚æœä¸€ä¸ªé¡µé¢æŠ¥é”™ï¼Œé‚£ä¹ˆå…¶ä»–çš„é¡µé¢ä¹Ÿæ— æ³•è®¿é—®ã€‚ä¸‹é¢å¼€å§‹é…ç½®: ä¸€.webpackåŠreactç‰ˆæœ¬12\"webpack\": \"^4.19.1\",\"react\": \"^16.8.3\",","text":"ç¼˜ç”± ä¹‹å‰æˆ‘ä»¬ç”¨çš„æ˜¯reactå•é¡µé¢æ‰“åŒ…ï¼Œæ–¹ä¾¿æ˜¯æ–¹ä¾¿ï¼Œå¼€åŒ…å³ç”¨ã€‚ä½†æ˜¯å› ä¸ºæˆ‘ä»¬åšçš„æ˜¯æ´»åŠ¨é¡µé¢ï¼Œä¸€èˆ¬æ¯æ¬¡éƒ½åªæœ‰ä¸€ä¸ªé¡µé¢ï¼Œä¸ä»…è¦å»ºå¤§é‡çš„è·¯ç”±ï¼Œè€Œä¸”èµ„æºå†—æ‚ï¼Œå³ä½¿å·²ç»åšäº†èµ„æºåˆ†å‰²ã€‚è¿˜æœ‰åšå¤šé¡µé¢æœ€é‡è¦çš„åŸå› æ˜¯ï¼šå•é¡µé¢æ‰“åŒ…ï¼Œä¼šå½±å“æ‰€æœ‰çš„é¡µé¢ï¼Œå¦‚æœä¸€ä¸ªé¡µé¢æŠ¥é”™ï¼Œé‚£ä¹ˆå…¶ä»–çš„é¡µé¢ä¹Ÿæ— æ³•è®¿é—®ã€‚ä¸‹é¢å¼€å§‹é…ç½®: ä¸€.webpackåŠreactç‰ˆæœ¬12\"webpack\": \"^4.19.1\",\"react\": \"^16.8.3\", äºŒ.æ–‡ä»¶å¤¹åŸºæœ¬æ„é€ 1234567891011121314151617181920212223242526272829303132333435config - path.js | - webpack.config.jspublic - index.htmlsrc - page - maintenance // å¯¹åº”path.jsçš„entriesPathFile - home - component.js | - index.js | - index.less - my - component.js | - index.js | - index.less - washstation // å¯¹åº”path.jsçš„entriesPathFile - home - component.js | - index.js | - index.less - my - component.js | - index.js | - index.lessindex.js //å¿…ä¸å¯å°‘ï¼Œå¯ä»¥ä¸ºç©º 1.pageä¸‹çš„index.js homeæ˜¯ä¸€ä¸ªå•ç‹¬çš„é¡µé¢ï¼ŒåŒ…æ‹¬ component.js: 1234567891011121314151617class Home extends Component&#123; constructor(props)&#123; super(props) this.state = &#123; &#125; &#125; componentDidMount()&#123;&#125; render() &#123; return( &lt;div&gt; ... &lt;/div&gt; ) &#125;&#125;export default Home; index.js: 123456import 'core-js/stable';import 'babel-polyfill'import React from 'react';import ReactDOM from 'react-dom';import Home from './component';ReactDOM.render(&lt;Home /&gt;, document.getElementById('root')); index.lessæ˜¯é¡µé¢ç›¸å…³çš„æ ·å¼ 2.configä¸‹çš„path.js12345678910111213const globby = require('globby');const entriesPathFile = 'maintenance';const entriesPath = globby.sync([resolveApp('src/page/' + entriesPathFile) + '/*/index.js']);/** æ³¨æ„äº‹é¡¹ï¼š - 1.entriesPathå°±æ˜¯æ‰“åŒ… maintenance ä¸‹é¢å¯¹åº”æ–‡ä»¶æ‰€æœ‰çš„index.js; - 2.æœ‰å¤šä¸ªé¡¹ç›®çš„è¯ï¼Œå°±æ–°å»ºå¤šä¸ªæ–‡ä»¶å¤¹,å¦‚ washstationï¼Œ - 3.å¯åŠ¨é¡¹ç›®æˆ–è€…æ‰“åŒ…é¡¹ç›®åªéœ€è¦æ›´æ”¹ entriesPathFileå°±å¯ä»¥äº†ï¼Œå¦‚ const entriesPathFile = 'washstation' - 4.æ–°å»ºæ–‡ä»¶å¤¹æˆ–è€…æ›´æ¢entriesPathFileå¿…é¡»è¦é‡æ–°å¯åŠ¨é¡¹ç›®;*/ module.exports = &#123; ... entriesPath&#125; ä¸‹é¢è¿™é‡Œæ˜¯å…³é”®ï¼Œä¸œè¥¿æœ‰ç‚¹å¤šï¼Œé…é”™äº†å°±æ²¡æ•ˆæœäº†ï¼šâ¬‡ï¸3.configä¸‹çš„webpack.config.js è·å–æŒ‡å®šè·¯å¾„ä¸‹çš„å…¥å£æ–‡ä»¶ 12345678910111213function getEntries()&#123; const entries = &#123;&#125;; const files = paths.entriesPath; files.forEach(filePath =&gt; &#123; let tmp = filePath.split('/'); let name = tmp[tmp.length - 2]; entries[name] = [ require.resolve('react-dev-utils/webpackHotDevClient'), filePath, ]; &#125;); return entries;&#125; å…¥å£æ–‡ä»¶å¯¹è±¡ 1const entries = getEntries(); æœ‰å¤šå°‘ä¸ªé¡µé¢å°±new å¤šå°‘ä¸ªHtmlWebpackPlugin 12345678const htmlPlugin = Object.keys(entries).map(item =&gt; &#123; return new HtmlWebpackPlugin(&#123; inject: true, template: paths.appHtml, // pulblic/index.html å…¬å…±htmlæ¨¡æ¿ filename: item + '/' + item + '.html', // è¿™é‡Œæ˜¯å…³é”®,è®¿é—®å…¥å£ç”±è¿™é‡Œå†³å®š http://localhost:3000/home/home.html chunks: [item] &#125;);&#125;); æ›´æ¢å…¥å£ 12345678entry: &#123; /* devtool: isEnvProduction ? shouldUseSourceMap ? 'source-map' : false : isEnvDevelopment &amp;&amp; 'eval-source-map', entries&#125; å‡ºå£ä¹Ÿé¡ºä¾¿æ›´æ”¹ä¸€ä¸‹ 123456789101112131415161718192021222324252627282930output:&#123; /*æŠŠå¯¹åº”èµ„æºæ”¾åˆ°å¯¹åº”é¡µé¢ä¸‹é¢,è¿™é‡Œ[name] å°±æ˜¯home isEnvDevelopment å¯¹åº”çš„å†…å®¹ä¸€å®šè¦é…ï¼Œä¸ç„¶æœ¬åœ°å¼€å‘åªèƒ½æ‰¾åˆ°ä¸€ä¸ªé¡µé¢ version æ˜¯æ—¶é—´æˆ³ const version = +new Date();*/ filename: isEnvProduction ? '[name]/static/js/[name].[chunkhash:8].'+version+'.js' : isEnvDevelopment &amp;&amp; '[name]/static/js/bundle.js', chunkFilename: isEnvProduction ? '[name]/static/js/[name].[chunkhash:8].'+version+'.chunk.js' : isEnvDevelopment &amp;&amp; '[name]/static/js/[name].chunk.'+version+'.js',&#125;//ä¸Šé¢æ˜¯jsï¼Œcssä¹Ÿæ”¹ä¸€ä¸‹ï¼Œå…¨å±€æœç´¢ MiniCssExtractPluginnew MiniCssExtractPlugin(&#123; // Options similar to the same options in webpackOptions.output // both options are optional filename: '[name]/static/css/[name].[contenthash:8].'+version+'.css', chunkFilename: '[name]/static/css/[name].[contenthash:8].chunk.'+version+'.css',&#125;),// å›¾ç‰‡èµ„æº å…¨å±€æœç´¢ .png ,å›¾ç‰‡æ˜¯ç‹¬ç«‹çš„&#123; test: [/\\.bmp$/, /\\.gif$/, /\\.jpe?g$/, /\\.png$/], loader: require.resolve('url-loader') , options: &#123; limit: 10000, name: 'static/media/[name].[hash:8].'+version+'.[ext]', &#125;,&#125;, 4.æ‰“åŒ…æ•ˆæœ123456789101112131415dist - 1 // æ‰“åŒ…å‡ºçš„å…¬å…±çš„jsæ–‡ä»¶ - 2 // æ‰“åŒ…å‡ºçš„å…¬å…±çš„jsæ–‡ä»¶ - assets // æœ¬åœ°é™æ€èµ„æº - static //æ‰“åŒ…çš„é™æ€å›¾ç‰‡èµ„æº - media - xxxx.png - home - home.html - static - css - xxx.css - js - xxx.js xxx å¦‚æœå¤šä¸ªé¡µé¢çš„è¯ï¼Œå…¶ä»–é¡µé¢æ•ˆæœå’Œhomeæ–‡ä»¶ä¸€æ ·ã€‚ 4.æœ€åä¸€ç‚¹ æ‰“å®ŒåŒ…ï¼Œå¯èƒ½ä¼šå‡ºç°èµ„æºè®¿é—®ä¸åˆ°ï¼Œåœ¨ package.json é…ç½®ä¸€ä¸‹homepage (1).æˆ‘çš„æ˜¯ä¸‹é¢ï¼Œæ ¹æ®é¡¹ç›®è·¯å¾„æ¥å†™ï¼š 1\"homepage\": \"../\", é¡ºä¾¿æä¸€ä¸‹ï¼Œæœ¬åœ°è·¨åŸŸï¼ŒåŒæ ·åœ¨ package.json é…ç½®ä¸€ä¸‹ proxyå°±å¯ä»¥äº†ï¼š 1\"proxy\": \"åŸŸå\", (2).æ‰“å®ŒåŒ…ä¹‹åï¼Œæ”¾åˆ°æœåŠ¡å™¨ä¸Šï¼Œè·³è½¬è®¿é—®è·¯å¾„ä¹Ÿè¦é…ç½®çš„ 123456789101112 //æ¯”å¦‚æœ¬åœ° http://localhost:3000/home/home.html;//çº¿ä¸Š:https:www.baidu.com/dist/demo/home/home.html//é‚£ä¹ˆå½“ä½ è·³è½¬é“¾æ¥çš„æ—¶å€™ï¼Œå°±è¦è¿™æ ·ï¼š//è·³è½¬const param = window.location.href.includes('baidu') ? '/dist/demo' : '';window.location.href = param + '/home/home.html';","categories":[],"tags":[{"name":"js","slug":"js","permalink":"https://wxmac.github.io/tags/js/"},{"name":"react","slug":"react","permalink":"https://wxmac.github.io/tags/react/"},{"name":"webpack","slug":"webpack","permalink":"https://wxmac.github.io/tags/webpack/"}]}]}